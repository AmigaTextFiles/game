; $VER: Detris-Install v3.1 (11.03.101)
; Installer script made by Stefan Blixth, OnyxSoft

(set #welcome "\nWelcome to Detris 3.1 installer.\n© 2000-2001 Daniel Westerberg, OnyxSoft.\n\nCheck our homepage for more stuff ;-)\n\nwww.onyxsoft.nu\n")
(set #endmsgs "Detris 3.1 has now been installed on your system.\n\nDon't forget to register the program.\nIt's totaly free!!!\n\nPlease use the Easy Register option which pops up when you start an unregistered copy of Detris!")

(message #welcome)
(welcome)
(complete 0)

; - create destination dir

(set destination
  (askdir (prompt "Please select the destination directory for Detris.\nA sub-directory \"Detris3\" will be created.")
    (default @default-dest)
    (help @askdir-help)
  )
)

(set @default-dest destination)

(set destination (expandpath destination))
(set destination (tackon destination "Detris3"))

(if (<> 0 (exists destination))
(
  (message "There is an older installation of Detris in the same directory.\n\nIt will be updated!")
  )
)

(makedir destination)
(run (cat "copy /Detris3.info \"" destination ".info\""))

(complete 25)

; - copy main files

(copyfiles (prompt "Copying ...") (source "Detris3") (dest destination) (help @copyfiles-help) )
(copyfiles (prompt "Copying ...") (source "Detris3.info") (dest destination) (help @copyfiles-help) )
(copyfiles (prompt "Copying ...") (source "Detris3.guide") (dest destination) (help @copyfiles-help) )
(copyfiles (prompt "Copying ...") (source "Detris3.guide.info") (dest destination) (help @copyfiles-help) )
(copyfiles (prompt "Copying ...") (source "Detris3.Readme") (dest destination) (help @copyfiles-help) )
(copyfiles (prompt "Copying ...") (source "Detris3.Readme.info") (dest destination) (help @copyfiles-help) )
(copyfiles (prompt "Copying ...") (source "Detris3.img") (dest destination) (help @copyfiles-help) )
(copyfiles (prompt "Copying ...") (source "Detris3 Game Over.img") (dest destination) (help @copyfiles-help) )
(complete 50)

; - copy plugins

(makedir (cat destination "/ColourPresets"))
(copyfiles
  (prompt "Copying...")
  (source "ColourPresets/")
  (pattern "#?")
  (dest (cat destination "/ColourPresets"))
)
(complete 66)
(makedir (cat destination "/KeyPresets"))
(copyfiles
  (prompt "Copying...")
  (source "KeyPresets/")
  (pattern "#?")
  (dest (cat destination "/KeyPresets"))
)
(complete 83)
(makedir (cat destination "/GamePresets"))
(copyfiles
  (prompt "Copying...")
  (source "GamePresets/")
  (pattern "#?")
  (dest (cat destination "/GamePresets"))
)

(complete 100)
(message #endmsgs)
(exit)