; Install-Script for SpeedBreak (written by Elwood)

(welcome)

(complete 0)

(set continue 0)

(while (= continue 0)
  (set maindir
    (askdir
      (prompt "In which directory would you like\nto install SpeedBreak ?\n"
              "A directory called SpeedBreak will be created there.")
      (help @askdir-help)
      (disk)
      (default "t:")
    )
  )
  (if (= (getdevice maindir) "RAM")
    (set continue 1)
    (if (< (getdiskspace "aq0:") 700000)
      (message "Sorry not enough disk space on this device")
      (set continue 1)
    )
  )
)

(set @default-dest (tackon maindir "SpeedBreak"))

(if (= 1 (askbool
           (prompt "Do you want to copy the documentation file ?")
           (help "Documentation will be copied with SpeedBreak.\n"
                 "It is not necessary because the game is\n"
                 "very simple to understand")
         )
    )
  (set doc 1)
  (set doc 0)
)

(if (= 0 (exists @default-dest))
  (makedir @default-dest (infos))
)

(if (= 1 doc)
  (
    (set docdir (tackon @default-dest "Docs"))
    (makedir docdir (infos))

    (if (= @language "français")
      (copyfiles
        (source "SpeedBreak/Docs/SpeedBreak.doc.fr")
        (dest docdir)
        (newname "SpeedBreak.doc")
      )
      (copyfiles
        (source "SpeedBreak/Docs/SpeedBreak.doc.eng")
        (dest docdir)
        (newname "SpeedBreak.doc")
      )
    )

    (copyfiles
      (source "SpeedBreak/Docs")
      (dest docdir)
      (pattern "*.info")
      (newname "SpeedBreak.doc.info")
    )
  )
)

(complete 10)
(copyfiles
  (source "SpeedBreak")
  (dest @default-dest)
  (pattern "*.abk")
  (infos)
)
(complete 30)
(makedir (tackon @default-dest "Images"))
(copyfiles
  (source "SpeedBreak/Images")
  (dest (tackon @default-dest "Images"))
  (pattern "*")
  (infos)
)
(complete 50)
(copyfiles
  (source "SpeedBreak")
  (dest @default-dest)
  (pattern "speed*")
  (infos)
)
(complete 100)

(exit)
