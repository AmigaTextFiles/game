@database EdSet.guide
@rem
@rem      **** HOLD IT!!...  You're not using AmigaGuide! ****
@rem
@rem  This is an AmigaGuide document.  Workbench 3.0 (and higher) users
@rem  should view this document with the SYS:Utilities/MultiView program
@rem  that came with their systems.  Other users should find a copy
@rem  of AmigaGuide, and use that.  AmigaGuide is available in a
@rem  freely distributable archive from Commodore.
@rem
@rem  If you don't have MultiView or AmigaGuide, keep reading as plain
@rem  text.  You'll have to ignore the weird @ commands.
@rem
@node MAIN
@title "EdSet, 'The Settlers' save file editor, v0.8 BETA"

                          Welcome to EdSet!
                            by Ed Mackey

Table of contents:

  1. @{" Legal disclaimers " link LEGAL}
  2. @{" System requirements " link REQUIREMENTS}
  3. @{" READ THIS BEFORE USING EDSET " link READFIRST}
  4. @{" Easy functions " link EASY} (everyone learn these first)
  5. @{" Stencil functions " link STENCIL} (intermediate users, learn these second)
  6. @{" Advanced functions " link HARD} (advanced users only)
  7. @{" The file format " link FILEFORMAT} (programmers only)
  8. @{" Author info " link AUTHOR}

Well don't just sit there.  Click on stuff!

@endnode
@node LEGAL "Legal disclaimers"

EdSet is Freeware.  That is, you are allowed to distribute it anywhere you
like, free of charge, as long as it remains unchanged.

Understand that EdSet is "BETA TEST" software.  That means it is in an
unfinished state, and should only be used by adventurous people willing to
take the risk of finding bugs or other problems with it.  Normally I don't
release such unfinished software to the general public, but in this
particular case, I feel the demand for it far outweighs the probability
that I will ever 100% finish it.  Since this unfinished version is very
usable and powerful, and it looks like my time will soon be absorbed by
other projects, I'm releasing it.

USE AT YOUR OWN RISK.  THERE ARE NO WARRANTIES, EXPRESS OR IMPLIED, NOR
DOES THE AUTHOR ACCEPT ANY RESPONSIBILITY FOR DIRECT OR INDIRECT
CONSEQUENCES OF USE OF THIS PROGRAM.

Did I get that right?  Looks close enough.

For a description of which parts are dangerous or unfinished,
  @{" READ THIS BEFORE USING EDSET " link READFIRST}

I should also point out that I did not disassemble or decompile "The
Settlers" in any way during the making of this program.  Everything I know
about the format of "The Settlers" save file, I know by simple
trial-and-error experiments, modifying my own saved games with a hex
editor.  This means EdSet is not infringing any copyrights held by Blue
Byte or any other software companies.

I did not uncover the entire format of the file.  If any programmers out
there want to try to figure out more of it, they should practice using
EdSet in all its modes (especially the advanced ones, but read the docs
first), and then read what I have so far in @{" The file format " link FILEFORMAT}.

@endnode
@node REQUIREMENTS "System requirements"

The program "CycleToMenu" is not required but STRONGLY recommended.  I
think it is on AmiNet and many BBSs.

EdSet requires Workbench 2.0 or higher to run.  Workbench 3.x is strongly
recommended, because ListViews and several other gadgets have much improved
functionality under 3.0 and 3.1.  For example, EdSet likes to scroll
selected ListView items into view.  Under WB 2.x, this means moving them to
the top of the list, which has the effect of making the list "jump"
underneath the mouse when clicked.  It's rather annoying.  Under WB 3.x, I
can tell the ListView to scroll only as far as needed to make an item
visible.  It never "jumps."  Also, WB 3.x uses a highlight bar in the
ListView, instead of copying the selected name into a box at the bottom.
It's much easier to see which item is currently selected.

If you edit large saved games, quite a bit of memory is used.  The whole
save game file must be loaded into a contiguous chunk of memory.  My hope
is, if you had the memory to create a large saved game, you probably have
the memory to load it into EdSet.  EdSet will tell you if this is not the
case.

  @{" READ THIS BEFORE USING EDSET " link READFIRST}

@endnode
@node READFIRST "Important stuff to know before using EdSet."

This program operates on save files created by the game "The Settlers" from
Blue Byte.  It can't create these files from scratch, but it can modify
existing ones in certain ways.

                        ** VERY IMPORTANT **

Notice that this editor currently only edits the landscape, and NOT the
buildings, flags, roads, or people.  The buildings, flags, roads, and
people are all referenced by numbers in the landscape, but these references
are to separate lists, deeper in the save file, that EdSet does not yet
know how to deal with.  DON'T MESS WITH THEM!  EdSet is for editing the
"landscape" type things, such as Objects (trees, rocks, geologist signs,
wheat, etc), Terrain Type (grass, water, etc), Altitude, underground
minerals and fish, etc.  All this is explained in detail in the advanced
section of the docs, for those who wish to edit by hand.  When you first
start using EdSet, you should stick to the @{"Easy functions" link EASY}.

                          -- GURU ALERT --

"The Settlers" is a very picky game.  It assumes, without checking, that
many of the numbers in the save file are valid and legal.  EdSet can easily
change many of these numbers to illogical or unreasonable numbers.  This
shouldn't bother EdSet too much, but the next time you load such a file
into The Settlers, it will crash or GURU on you.  There are a number of
ways to protect yourself and your save files from such damage:

1.  Read and understand my @{"Legal disclaimers" link LEGAL}.  I'm not responsible for
    trashing your save files.

2.  MAKE A BACKUP OF YOUR SAVE FILES.  Please do this!!  Don't run EdSet on
    any important save file that is not backed up elsewhere.  You can
    even use EdSet to help you with this, by loading a file and using
    "Save As" on that file without changing it.

3.  Stick to the @{"Easy functions" link EASY}.  Namely, MEGA-Geologist,
    Phoney Geologist, Imprison/Free, Stock/Empty Lakes,
    Stock/Empty Mountains, Add/Remove Useless Objects, and @{"Stencil" link STENCIL}.
    These built-in functions have many checks to try to prevent putting
    illegal values in a save file.

4.  Read the docs for any function very carefully before using it.
    Especially, don't change the "Mode" gadget from "View" to "Edit" unless
    you have read all about how to edit stuff by hand.  Messing with
    Edit Mode is the easiest way to wreck a saved game.

Also, some features are unfinished in this beta version of EdSet:

1.  I wanted a lot of cute graphics, to represent different objects on the
    landscape etc.  Right now there are only hex numbers.  But don't worry,
    the @{"Easy functions" link EASY} should be plenty useful even if you can't easily
    "see" the landscape on the screen.

2.  I wanted some nice colors, like green and blue, to represent
    Terrain Types such as grass and water.  Right now there are only hex
    numbers.  As a result, the "Show Terrain" menu item does nothing.  But
    don't worry, you can use @{"Stencil" link STENCIL} and "Replace Terrain Type" functions
    to affect the landscape.

3.  Each point of the landscape has an altitude.  Each point is adjacent to
    six other such points.  No two adjacent points can be more than 4 units
    difference in altitude.  There is a menu function,
        Repair insane settings for » Altitude: Max Steepness
    This function has not been written yet.  It will bring up a requester
    saying so.  Three other menu functions in the "repair" sub-menu are
    waiting for this to be written before they are fully functional, namely,
    "Water: Altitude," "Water: ALL," and "EVERYTHING."

4.  The game will probably crash if two adjacent altitudes are not in range
    of each other.  Without the "repair" menu item to fix this, you will
    have to fix it by hand if you create such an error.  Switching off "Show
    Altitudes" and switching on "Show as numbers" can be helpful here.  Of
    course, it's easier if you just don't mess with altitudes in the first
    place.  As a last resort, you can set the entire map to an altitude of
    01.  This usually works, but makes your game kinda flat (ouch!!!!).

@endnode
@node EASY "The easiest functions to use in EdSet."

This section describes the functions of EdSet which every beginner should
be familiar with before running the program.  These are easy to use, and
safer than the other functions (all the boring complicated stuff happens in
the computer instead of in your brain, which if you ask me, is how things
should work more often)!

First, there's the save/load requester.  This is probably the first thing
you see when you run the program.  There are actually two different
requesters that can show up here.  One is a standard ASL requester, asking
you to find the directory where your Settlers save files are stored.  If
you have a hard drive, this is the same directory the game itself is in.
If you use floppies, put in the floppy and select it.  Your saved games
should show up in the ASL requester, like so:

    SettlerArchive
    SettlerSave0
    SettlerSave1
    ...
    SettlerSave9

Click on "SettlerArchive" or any file in that directory.  This brings you to
the second requester, which is designed to look as much like the "real" one
in the game as possible.  You'll see the ten saved game positions, and
buttons for "Load," "New Drawer," and "Exit."  New Drawer takes you back to
the ASL requester mentioned above.  (Incidentally, you can add a tooltype
to EdSet's icon, "DRAWER=dh0:games/Settlers" or wherever your saved games
are kept.  This keeps you from having to do the ASL thing over and over).

After loading a game, you get to the main screen of EdSet.  Part of the
landscape appears in the window.  It may look strange, but don't worry too
much about it.  You can scroll it by pressing the right mouse button over
it (just like in the real game).  If you press the right mouse button in
the title bar (or anywhere outside the landscape view), you get to EdSet's
menu system.

The first menu is "Project."  In it, "Open..." takes you back to the load
requester.  "Save" will save over the game you just loaded (MAKE A BACKUP
FIRST!!).  "Save As..." brings up the Save Requester, which looks like the
load requester, only you can edit the name of the saved game in a string
gadget (this is NOT the actual file name, it is a name stored in a small
file called "SettlerArchive").  "About" brings up some info, and "Quit"
will exit EdSet.

The next menu is marked "Special Functions."  There are some fun toys in
this menu!  Just to be different, I'll work my way from bottom up in this
menu.  Here are the coolest functions in EdSet:

* MEGA-Geologist.  You know those little guys with white hair, that go out
  into the mountains and look for minerals?  When they find stuff they jump
  for joy.  They're cute eh?  Well, they get on my nerves.  I'm sorry, but
  it takes a whole team of them just to cover a small area, and even then,
  they never check the exact spot I want them to.  They waste hammers, and
  they cause traffic jams to and from work.  Worse, they're so slow that
  some of their signs disappear before they finish checking the whole area.
  Well, YOU DON'T HAVE TO PUT UP WITH IT ANYMORE!!  My new MEGA-Geologist
  can scan all of the mountains, on an entire planet, in mere seconds.
  Mr. Mega-G is the real reason I started writing EdSet in the first place.
  Try it!  Load a game, hit MEGA-Geologist, save, and then see the results
  in "The Settlers."  All minerals everywhere are clearly labeled.  You'll
  even find some minerals in the grass near the mountains!  This is because
  a mine has a certain limited range that it can get minerals from, even if
  those minerals are in the grass next to a mountain.  Unfortunately, the
  signs left by MEGA-Geologist still disappear after a while.  This is
  built into the game and unavoidable.  If you watch closely, there is a
  distinct pattern and order in which they disappear.  You can replace them
  just by running Mr. Mega-G again.

* Phoney Geologist.  This guy is like the MEGA-Geologist, except he always
  lies, about everything.  What good is he?  He's useful because, unlike
  you, the computer players in "The Settlers" always play by the rules.
  They don't "peek" underground to see where minerals are, and where to
  place mines.  They just look at geologist's signs and build their mines
  according to the signs.  You can send Phoney Geologist in to infiltrate
  enemy territory, and erect a bunch of lying, sometimes randomly selected
  geologist signs in his mountains.  The computer opponent will see the
  signs, and build all the wrong mines, wasting time, construction
  supplies, and food.  Normally you don't want Phoney Geologist pulling the
  same stunt on your own territory, so you should use the @{"Stencil" link STENCIL}
  function on him.  Note that the Phoney Geologist's signs also disappear
  after a while, giving enemy geologists a chance to tell the truth about
  what's underground.  If this starts to happen, run Phoney Geologist
  again, and he will rearrange the new signs to be lies again.

* Lake contents » Stock lakes with fish.  Every point in every lake gets
  160 fish.  Back in the game, your fishermen will drop their fishing lines
  into the lake, and simply pull out a fish first try.  Fishing production
  quickly rises to maximum and stays there for hours.  No need for
  space-wasting farms!  Just build a whole bunch of fishermen, and get your
  toolmaker working on those fishing poles.

* Lake contents » Empty lakes of fish.  Fishing production falls to zero.
  The end.  Once again, it is a good idea to learn the @{"Stencil" link STENCIL} function,
  so that only enemy territory suffers from this sudden bout of acid rain.
  Note that fish are stored the same way that minerals are stored, except
  that fish tend to increase in number over time.  If a certain spot in the
  water has 10 fish, then after a while of no fishing it will have 11 fish.
  But if the spot next to it has no fish, then no fish will ever grow
  there (unless EdSet changes it).  Fish don't swim or migrate in "The
  Settlers."  The fishermen, however, feel free to walk across the border
  and fish in a nearby enemy-owned lake.

* Mountain contents » Stock mountains with minerals.  Unfortunately, EdSet
  can't yet tell buildings apart, and can't figure out what kind of mine a
  given building is.  So, this function looks for existing minerals in the
  mountains, and amplifies their quantities to maximum.  This should
  breathe new life into all your mines!  If there are no minerals in a
  given spot, EdSet will pick a mineral to put there based on the position
  in the landscape.  This positioning info creates big bands of all four
  minerals, running south-west down the landscape.  As usual, you'll want
  to stencil this function so that only friendly territory gets minerals.
  REMEMBER, your geologist signs will be out of date after you stock the
  mountains!  Run "MEGA-Geologist" again to fix that problem.
  This function should probably put minerals in the grass *near* the
  mountains, as well as in the mountains, since mines can reach there.
  But I haven't added that little feature yet.

* Mountain contents » Empty mountains of minerals.  Stencil it, baby.
  Awww, what's the matter, Mr. Purple Computer Opponent?  Doesn't look like
  your mines are doing so well.  And now you're setting fire to them!  Gee,
  that's too bad.
  Actually, this function is handy at the start of a game too.  When you
  start a game, empty mountains everywhere.  Then, once you and your
  opponents have got some territory, run "Phoney Geologist" on enemy
  territory, and "Stock mountains" followed by "MEGA-Geologist" on your own
  territory.  Your territory will have neat, orderly bands of minerals in
  it, clearly labeled with geologist signs.  Enemy territory will have no
  minerals, and plenty of "fake" geologist signs encouraging the computer
  opponent to build useless mines there anyway.  Are you starting to enjoy
  that @{"Stencil" link STENCIL} function yet?  ;-)

* Land, desert, etc. » Remove useless objects.  "Useless Objects" are:
  Palm Trees (desert), Willow Trees (water), Big and Small "Piles of Junk"
  (big brown things that have no use), Cross (found at the tops of
  mountains), Stump (from chopped tree), Pebbles, Skeleton (desert), Skull
  (desert), Rocks (the small rocks poking up out of water), Cactus
  (desert), Dead Tree (grass), and Dead Wheat.  Your territory looks much
  cleaner after this.  But grassy areas everywhere lose their individuality
  and start to all look the same.  It's your choice.

* Land, desert, etc. » Add useless objects.  Some of the nastier of the
  above-mentioned "useless" objects are strewn about.  You are given a
  choice of how full of useless objects the landscape should be:
  25%, 50%, 75%, or 100%!  This must be really irritating, but I haven't
  used it on a human player yet, only computer players.  It looks like
  someone was really neglecting their lawn-care duties when a horde of
  vandals came through and trashed their yard.

* Imprison.  This is a lethal last resort.  Do NOT use the stencil on this
  function!  The purpose of this is to contain an enemy that has gotten too
  large and powerful to be otherwise dealt with.  To use it, make sure your
  stencil is set to full (or not in use at all), then click the "Show:"
  gadget until it says "Ownership."  Click the "Using:" gadget to bring up
  a list of players.  Double-click the player you wish to imprison.  Your
  choice should show up in the upper-right text box.  Now pick "Imprison."
  Each point on the landscape that is either *just* inside, or *just*
  outside the selected player's territory, will have a "Big Pile of Junk"
  placed on it (unless a road or flag is there).  With any luck, they
  should form an unbroken chain of "BorderBoulders" around the territory.
  Inspect the chain carefully for any spot where both the inner and outer
  ring of BorderBoulders is broken in the same place.  If no such place
  exists, then your opponent is successfully trapped inside.  He can't send
  knights to attack, nor roads and supplies to build new guard huts.  His
  territory can expand a tiny bit, by building guard huts near the
  BorderBoulders, but he can't get through.  If he tries to attack you, his
  knights buzz around like bees trapped inside their own nest.  You can let
  him rot in there, starving his territory of minerals and fish, while you
  build up your own army and supplies.  Then, once the time is right, use
  this:

* Free from imprisonment.  Normally you don't use the stencil on this
  function either.  Select a player from Ownership exactly the same way you
  did for "Imprison," except calling "Free from Imprison" instead.  This
  removes any "Big Pile of Junk" from anywhere inside his territory and
  from points *just* outside his territory.  His territory probably
  expanded a bit while he was imprisoned, which is why the whole interior
  is cleared of any possible BorderBoulders.  All of his knights will be
  free, and may home right in on their original targets all at once.  But
  once the initial onslaught is over, you can retaliate with the full
  force of mountains on steroids.

The rest of the functions in the "Special Functions" menu are for the more
advanced editing modes.  Don't play with them just now, because first you
should learn about the @{"Stencil" link STENCIL} and how to apply it to the above fun
functions.

@endnode
@node STENCIL "The Stencil Function"

                       ** THE STENCIL FUNCTION **

The stencil is the most powerful tool in EdSet.  It affects the operation
of ALL of EdSet's other functions.  The stencil itself is not a part of the
save file, and does not directly modify your game.  Instead, it is used as
a big mask, telling which parts of the landscape can be modified by EdSet's
many other functions.

Each point on the landscape can be either "inside" or "outside" the
stencil.  Points that are inside the stencil can be modified by any EdSet
function.  Points that are outside the stencil are considered
"write-protected," and are skipped by such functions as "MEGA-Geologist"
and "Empty Lakes of Fish."  When you first run EdSet, the stencil is
"flooded," meaning every point on the landscape is inside the stencil.

EdSet's menu system has a "Stencil" menu on the far right.  This is where
stencil functions are controlled.  There are a couple of ways I can
describe them:

  1. @{" Easy tutorial " link STENCILTUTOR} of putting territories in the stencil.
  2. @{" Full description " link STENCILFULL} of each "Stencil" menu item.

@endnode
@node STENCILTUTOR "Easy tutorial of putting territories in the stencil"

Simple territory-masking functions are the easiest things to do with the
stencil.  Here are two step-by-step procedures for building such a stencil,
one for friendly territory, and one for enemy territory.

                          ** Friendly Territory **

For friendly territory, I will make the stencil empty, and then add
Player 1's territory to it.  This makes Player 1's territory the only place
affected by other EdSet functions.

Step 1.  Click on the "Show:" gadget until it shows "Ownership."

Step 2.  From the right-most menu, pick "Clear Stencil to Empty."  A
         requester confirms it has been cleared (click "OK" on that).

Step 3.  Click the "Using:" gadget.  A list of players appears.

Step 4.  Double-click "Property of Cyan (Player 1)" in the list.  The list
         should disappear, leaving your choice in the upper-right text box.

Step 5.  From the stencil menu, pick "Add Current Object to Stencil."  A
         requester confirms it has been added (click "OK" on that).

Step 6.  Look in the stencil menu, and make sure the item "Use Stencil" has
         a checkmark beside it.  If it doesn't, select it and make sure
         that the checkmark appears.

Step 7.  Friendly territory is now stenciled!  Use some friendly functions
         on it.  My suggestions are:  Stock mountains with minerals, Stock
         lakes with fish, Remove useless objects, and MEGA-Geologist.

Step 8.  Once you are finished, pick "Flood Stencil to Full" from the
         stencil menu.  This will return EdSet to "normal," where all
         points on the landscape can be modified.

                            ** Enemy Territory **

For enemy territory, I take the reverse approach.  I fill the stencil to
full, instead of emptying it out.  Then, I remove Player 1's territory from
the stencil, leaving the other players inside.  I can also remove "No man's
land" if I need to.

Step 1.  Click on the "Show:" gadget until it shows "Ownership."

Step 2.  From the right-most menu, pick "Flood Stencil to Full."  A
         requester confirms it has been filled (click "OK" on that).

Step 3.  Click the "Using:" gadget.  A list of players appears.

Step 4.  Double-click "Property of Cyan (Player 1)" in the list.  The list
         should disappear, leaving your choice in the upper-right text box.

Step 5.  From the stencil menu, pick "Remove Current Object from Stencil."
         A requester confirms it has been removed (click "OK" on that).

(Optional:  In a 2-player game, if you want to be nice to player 2, then
            repeat steps 3 to 5 for "Property of Red (Player 2)")

(Optional:  If you do not wish to affect unclaimed land, then repeat steps
            3 to 5 for "No man's land.  Conquer me!")

Step 6.  Look in the stencil menu, and make sure the item "Use Stencil" has
         a checkmark beside it.  If it doesn't, select it and make sure
         that the checkmark appears.

Step 7.  Enemy territory is now stenciled!  Use some nasty functions on it.
         My suggestions are:  Empty mountains of minerals, Empty lakes of
         fish, Add useless objects, and Phoney Geologist.

Step 8.  Once you are finished, pick "Flood Stencil to Full" from the
         stencil menu.  This will return EdSet to "normal," where all
         points on the landscape can be modified.

@endnode
@node STENCILFULL "Full description of each 'Stencil' menu item"

Use Stencil:  This is a simple toggle.  When you see a checkmark next to
	it, other EdSet functions respect the stencil.  If you select it,
	removing the checkmark, then the stencil is "disabled" and other
	EdSet functions will affect the entire landscape.  This is a good
	means of temporarily ignoring a stencil without losing it.  The
	controls for building a stencil still work, even when "Use Stencil"
	is turned off.  Just don't forget to turn "Use Stencil" back on
	before you run any functions that you want to be stenciled.

The next three groups of menu items talk about "adding" and "removing"
things from the stencil.  Before you start calling them, you should set the
stencil to a known state, such as with the "clear" or "flood" functions at
the bottom of the menu.  Then use add and remove to build the stencil.
"Add" functions will put points inside the stencil, making that part of the
landscape modifiable by EdSet.  "Remove" functions will take points outside
the stencil, so that area of land is frozen until you add it back.

Note that the stencil is NOT just a bunch of "add this" and "remove that"
commands.  It is a complete internal map of which points are modifiable and
which are not.  You *build* the stencil with a bunch of "add this" and
"remove that" commands, but once built, the stencil does not change all by
itself.  For example, let's say you clear the stencil and add your trees to
it.  Now you can only modify points on the landscape with trees on them.
If you delete some trees from the landscape, however, the newly treeless
points will STILL be inside the stencil and modifiable.  The stencil does
not change when you are deleting trees.

The four flavors of add/remove functions are:

	Add [something] to Stencil
		All points on the landscape that contain a [something] are
		added to the stencil, which means they become modifiable
		points.  Programmers call this a "Boolean OR" operation.

	Add Everything But [something] to Stencil
		Every point on the landscape that does NOT contain a
		[something] is added to the stencil, and can be modified.

	Remove [something] from Stencil
		All points on the landscape that contain a [something] are
		removed from the stencil.  They cannot be modified again
		by EdSet unless you add them back.

	Remove Everything But [something] from Stencil
		Every point on the landscape that does NOT contain a
		[something] is removed from the stencil, so that it cannot
		be modified.  Only points that contain a [something] can
		remain in the stencil (if they were there already).
		Programmers call this a "Boolean AND" operation.

The actual menu functions which follow the above style are:

Add Current Object to Stencil
Add Everything But Current Object to Stencil
Remove Current Object from Stencil
Remove Everything But Object from Stencil
	These four menu items deal with the "Current Object."  The Current
	Object appears in a text box in the upper-right of EdSet's main
	window.  Not everything that appears in that box can be accurately
	described as an "object," but the functions work on whatever's
	there.  Keep in mind that certain objects (notably trees) consist
	of more than one animation frame, and therefore have more than one
	object number.  Since these four functions deal only with an exact
	match of a certain object number, you are often better off using
	the group functions below:

Add Group to Stencil...
Add Everything But Group to Stencil...
Remove Group from Stencil...
Remove Everything But Group from Stencil...
	These functions work much like the "Object" ones above, except that
	they know how to deal with a range of object numbers.  When you
	select one of these functions, a requester opens, asking you to
	adjust or confirm the range of object numbers to be used for the
	stencil.  This requester is initialized with the object number or
	numbers that are associated with the current object.  You can edit
	them if they are not the ones you wanted.  Keep in mind that the
	main window, including the "Using:" gadget and its list, are still
	usable even while the group stencil requester is open.

Visible Area » Add to Stencil
Visible Area » Add Everything But to Stencil
Visible Area » Remove from Stencil
Visible Area » Remove Everything But from Stencil
	The "Visible Area" is any point you can see in EdSet's main window.
	You can use these functions, along with different "zoom" strengths
	and EdSet's window sizing gadget, to affect a certain area of the
	landscape.  This is useful for times when you have a huge
	territory, and you don't want to have a change affect the entire
	territory.  You can stencil a small area of it to be affected.

Clear Stencil to Empty
	Wipe out!  All points are thrown out of the stencil.  It is good to
	run this before you start building a stencil with a bunch of "add
	this" commands.

Flood Stencil to Full
	All points are brought inside the stencil (the default).  It is
	good to run this before you start building a stencil with a bunch
	of "remove that" commands.  It is also handy to run this once you
	are finished with a stencil, to return things to normal.

Invert Stencil
	All points that were in the stencil are thrown out, and the points
	that were out are brought in.  This can be used to change a stencil
	from enemy territory to friendly territory, etc.

@endnode
@node HARD "Advanced Functions"

OK, for those of you who really want to get deep into experimenting with
the save file and editing stuff by hand, this is the place.  Make sure you
are familiar with the @{"Easy functions" link EASY} and the @{"Stencil" link STENCIL} before you read any
further in this section.

First, object numbers are described in hexadecimal.  You do NOT need to
understand hexadecimal ("hex") to use EdSet.  All you need to know is that
in hex, a "number" is allowed to contain the digits 0 to 9 as well as the
letters A through F.  All object numbers are two characters max.  So, valid
object numbers are "5A," "08," etc.  EdSet keeps lists of interesting
objects and their names in English.  These lists can be accessed by
pressing the "Using:" gadget, so you don't have to memorize object numbers.

What you get when you press "Using:" depends entirely on what type of thing
is being shown on the map at that moment.  EdSet can edit 13 different
parts of the landscape data.  They are available in the "Show:" cycle
gadget, in the upper-left part of EdSet's main window.

Show:	@{"    Flags     " link SHOW_FLAGS}
	@{"  Obstacles   " link SHOW_OBSTACLES}
	@{"    Roads     " link SHOW_ROADS}
	@{"  Ownership   " link SHOW_OWNERSHIP}
	@{"   Altitude   " link SHOW_ALTITUDE}
	@{" Terrain Type " link SHOW_TERRAIN}
	@{"    Waves     " link SHOW_WAVES}
	@{"   Objects    " link SHOW_OBJECTS}  <-- Default setting.
	@{" ID Num High  " link SHOW_IDNUMH}
	@{"  ID Num Low  " link SHOW_IDNUML}
	@{" Underground  " link SHOW_UNDERGROUND}
	@{" Person Num H " link SHOW_PERSON}
	@{" Person Num L " link SHOW_PERSON}

Click on any of the above that catch your interest.  NOTE THAT SOME OF THEM
ARE READ-ONLY.  Well, you can edit the "read-only" ones, but you'll almost
certainly crash The Settlers.  The individual descriptions of them warn you
which ones not to edit.

When you select one of the above in EdSet, the view of the landscape will
change to show it.  Remember that the view can be scrolled with the right
mouse button.  The view can also be affected by @{"The View Menu" link VIEW}.

The whole landscape has a @{"Coordinate System" link COORDS}.  This lets you, EdSet, and
"The Settlers" keep track of where things are.

To edit things by hand, read about the "Show:" modes above, and then read
about @{"Edit Mode" link MODES}.

Finally, there are a few more functions in the @{"Special Functions" link SPECIAL} menu for
advanced users.

@endnode
@node SHOW_FLAGS "Show: Flags"

Set the "Show:" gadget to "Flags."

This is a single-bit field.  This means that only two object numbers are
valid here:

  00 means no flag is at this point in the landscape.
  80 means there is a flag here.

The "Using:" gadget will simply toggle between these two.

Note that flags also get object number 01 in @{"Objects" link SHOW_OBJECTS}.  This may seem
redundant to you, but I'm sure it is very convenient for the programmers at
Blue Byte, and helps The Settlers run faster.

Flags also get an ID number in @{"ID Num High" link SHOW_IDNUMH} and @{"ID Num Low" link SHOW_IDNUML}.  This ID number
is a reference to a list of flags in a deeper part of the save file that
EdSet does not yet know how to find or deal with.  It is in that hidden
list that things like supplies waiting at the flag are stored.

In other words, DON'T USE EDSET TO MAKE NEW FLAGS.  You won't be able to
create a new entry in the flag list.

@endnode
@node SHOW_OBSTACLES "Show: Obstacles"

Set the "Show:" gadget to "Obstacles."

This is another (but different) single-bit field.  The two valid numbers in
this case are:

  00  No problem.
  40  An obstacle.

The "Using:" gadget will simply toggle between these two.

This is a rather strange bit, with more than one effect.  It's main
function seems to be to prevent "wandering people" from wandering onto this
point of the landscape.  Even when settlers aren't walking on roads that
you built, they are still confined to the basic underlying grid of the game
itself.  They can't walk onto points that have the obstacle bit set.

But don't just set the bit without reason.  The places to set this bit
include:

* Any point _completely_ surrounded by water.  This keeps people from
  walking out on the surface of the water.  Try removing this bit from the
  water, and putting some oak trees in the lake.  Your tree choppers will
  happily walk out on the surface of the water and cut down the trees.

* Any object that is too big to walk around.  Namely, all sizes of Granite
  (the kind found in the grass), the Big and Small "Piles of Junk" (those
  big brown rocks with no apparent use), and buildings of all sorts.

If you think that your obstacle bits are no longer in sync with the water
and other objects on your landscape, call this function from the "Special
Functions" menu:

	Repair Insane Settings for » Water: Obstacles

But the Obstacle bit also does something else.  There's some weirdness that
happens when a road or boat supply person comes to rest.  If a road or boat
supply person has no supplies to move, he gets out of everyone's way by
disappearing from the landscape's @{"Person Num H" link SHOW_PERSON} and @{"Person Num L" link SHOW_PERSON} bytes
entirely.  But you still see him standing there waving his arms about,
thanks to some odd values in (of all places) @{"ID Num High" link SHOW_IDNUMH}.  With him out of
the "Person Num" bytes, however, the game can't tell who he is, or even if
he's a road supply person or a boat supply person.  So, to help out with
this little programming problem, the game looks for help in -- get this --
the obstacle bit.  That's right.  The obstacle bit is set for water, and
clear on land where roads can be built.  SO, if an obstacle is there, the
game draws a guy sitting in a boat, waiting for supplies.  Otherwise, the
game draws a guy standing around and waving his arms, waiting for supplies.

This isn't harmful.  It just means that water without the obstacle bit
(a) can be walked on by wanderers, and (b) will cause boat people to not
have their boats on screen when waiting for supplies.

Likewise, setting the obstacle bit on a section of road will cause a road
supply person to wait for supplies in a boat.  Very strange.

@endnode
@node SHOW_ROADS "Show: Roads"

Set the "Show:" gadget to "Roads."

Each point of the landscape has six "adjacent" points that a road segment
can lead to.  Thus, "Roads" is a six-bit field showing which of those
directions actually have roads on them.  Note that the whole road system is
cross-referenced:  If one point has a road leading east, then the point
immediately to the east must have a road leading west.  They're two-way
streets.

When you click "Using:," you get a requester showing these six directions
and allowing you to turn them on and off (in the current object, remember).
EdSet will try to do the cross-reference automatically when you are playing
with them by hand.  It will not do any cross-reference when you use the
"Set unused spaces" or "Set whole map" special functions.  After using one
of these, you should call:

    Repair insane settings for » Roads: Cross Reference

It will try to fix any mistakes for you.  It even watches out for the
stencil.  It never modifies a point outside the stencil, but will try to
make the points inside the stencil conform to what's outside.

Once again, roads are also referenced by a strange list deeper in the save
file that EdSet doesn't know about yet.  As far as I can tell, roads are
identified by the start and end flags, and the directions from which they
emerge from those flags.  The "middles" of roads, that is the part that's
not near any flags, is not stored anywhere except on the landscape itself.
This means you are free to modify the middles of roads, as long as the
start and end of the road remain unchanged.

In my experience however, changing the roads usually crashes
"The Settlers."

@endnode
@node SHOW_OWNERSHIP "Show: Ownership"

Set the "Show:" gadget to "Ownership."

This shows who owns what piece of land.  There are five valid object
numbers that work here.  You can see the list of them by clicking the
"Using:" gadget.

	00  No man's land.  Conquer me!
	80  Property of Cyan (Player 1).
	A0  Property of Red (Player 2).
	C0  Property of Purple (Player 3).
	E0  Property of Yellow (Player 4).

	(20, 40, and 60 are illegal, but possible, values)

This is just great for stenciling people's territory.  However, it's not so
good for modifying.  Basically, any modifications you make will hold until
a new guard hut opens in the range of the modified area.  Whenever a guard
hut (or castle) opens (or dies), the ownership of the surrounding land is
recomputed.  If the existing ownership was not what the computer expected,
it will sometimes crash or lock.  It's wise to your schemes!!

@endnode
@node SHOW_ALTITUDE "Show: Altitude"

Set the "Show:" gadget to "Altitude."

Yep, this is altitude, which controls the height of each point on the
landscape.  There are a number of restrictions on the altitudes, and
unfortunately, I have not yet written the "Repair insane settings for »
Altitude: Max Steepness" function that would otherwise let you play around
more freely.  This function is complicated by the following restrictions:

* Altitudes range from 00 to 1F.

* Points touching the water should have altitude 00, so that @{"Waves" link SHOW_WAVES} look
  right.

* Large buildings and Castles require a small area of flat land, after they
  have been smoothed by the shovel guy.

* Most large buildings cannot be built at altitude 00 (sea level),
  otherwise the game may crash.  If you have some grass at altitude 00, and
  try to build on it, you will see a shovel guy come out and raise it to
  altitude 01.

* Altitudes must not be more than 4 units difference between adjacent
  points of the landscape, else "The Settlers" will crash.  When building
  roads in the game, you see this difference on the little road-build icons
  you click on.  Here's a chart of altitude changes between adjacent
  points:

	0 difference:  Dark green, flat.
	1 difference:  Light green, tiny incline.
	2 difference:  Yellow, average steepness.
	3 difference:  Light red, steeper incline.
	4 difference:  Dark red, steepest incline.
	5 and up:      *crash*

Keep in mind that these are hexadecimal numbers, so 09 plus one is not 10,
it's 0A.  For you non-programmers, the sequence goes like this:

00 (sea level), 01, 02, 03, 04, 05, 06, 07, 08, 09, 0A, 0B, 0C, 0D, 0E, 0F,
10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 1A, 1B, 1C, 1D, 1E, 1F (high point)

Setting the entire landscape to 01 (with the "Set whole map" function) is a
fun way to flatten everything, but the game does seem a bit more boring
after this.  More like a board game.  A flat board game.

A trick that also works is to flatten all points above a certain height.
To do this one, clear your stencil, then hit "Add Group to Stencil."  In
the group stencil requester, type in the range of altitudes, say from 0E to
1F, and hit OK.  You just stenciled all points of height 0E and higher.
Set the current object to altitude 0E and pick "Set whole map to current
object."  All those high points get chopped off at 0E, leaving the lower
areas intact.  Remember to refill your stencil before going on to other
tasks.

@endnode
@node SHOW_TERRAIN "Show: Terrain Type"

Set the "Show:" gadget to "Terrain Type."

Terrain Type controls what the landscape is.  Available terrain types
include water, grass, desert, mountains, and mountain snow.  There are
actually subdivisions in each group, with minor (but sometimes important)
differences between the subdivisions.

Note that the light/dark shading that you see during the game (both on the
playfield and on the map) are a result of altitude changes.  Except for
water, there is no visible color difference between the subdivisions.

  00  Water: Really deep.
  01  Water: Deep.
  02  Water: Shallow.
  03  Water: Really shallow.

Water is good for fishing, and little else.  The only difference between
the depths, as far as I can see, is that the two "shallow" types of water
show up as light blue on the overall map, whereas the two "deep" types show
as dark blue.  You can use this to write silly messages in your lakes, and
little else.  The messages are only visible from the "map" icon of the
game, not the regular screen and playfield of the game.

Make sure, when adding or removing water, that you watch out for water's
special requirements of @{"altitude" link SHOW_ALTITUDE}, @{"obstacles" link SHOW_OBSTACLES}, and @{"waves" link SHOW_WAVES}.

  04  Grass: Wetlands near lake.
  05  Grass: Middle of patch.
  06  Grass: Near the mountains.
  07  Grass: Near the desert.

Grass is always useful.  But, if you build a building on the wrong type of
grass, "The Settlers" has a nasty habit of burning it down without warning!
Especially notorious is the practice of having 05 grass right next to the
desert.  If you're missing the 07 buffer zone, your buildings may be in
danger of spontaneous combustion.  To try to prevent such occurrences,
EdSet has a menu function
	Repair Insane Settings for » Terrain: Edges
that will re-organize your grass (causing no visible color change in the
game) so that the proper sub-division of grass is used in the proper spots
(as best EdSet can figure out, anyway, which is usually good enough).  This
takes a while.

Some of these types of grass do not allow you to build large buildings
(wetlands near lake) or won't allow wheat to grow (near the desert).

  08  Desert: Very near the edge.
  09  Desert: Near the edge.
  0A  Desert: Middle of patch.

I honestly don't know what good it does to have three different types of
desert.  But when "The Settlers" puts a desert in a landscape, it is always
a bunch of 0A's, surrounded by a ring of 09's, and those surrounded by a
ring of 08's.

  0B  Mountains: Very near the edge.
  0C  Mountains: Near the edge.
  0D  Mountains: Middle, no snow.

The differences between these types of mountains is equally puzzling.
Maybe miners are more productive in one than another?  This is left as an
exercise to the reader.

  0E  Mountain Snow: Light, mineable.
  0F  Mountain Snow: Deep, not mineable.

The difference here is clear enough.  The "light" snow (0E), that is
sometimes found at the edge of a patch of snow, can have mines built on it.
The deeper snow cannot (most snow is deep snow).  A simple search-and-
replace operation in EdSet will make all your snow mineable!

                  -- Search-and-Replace vs. Stencil --

EdSet has a function to search and replace terrain types, in its
@{"Special Functions" link SPECIAL 44} menu.  Why does this function exist?  Well, terrain types
behave differently from most other landscape settings.  The landscape is a
grid of points, and in all the different "Show:" settings, there can be
only one object per point, except for terrain types.  There are actually
two terrain types per point, because the square of land that the point
affects is divided into two triangles.  Note that the landscape types above
only use the right digit and not the left.  This allows two terrain
"digits" (4-bit fields, nybbles, whatever) to be combined on a single
point (a nice ASCII pic of this is in @{"Coordinate System" link COORDS 34}).

EdSet does its best to cope with this.  Most functions try to deal with the
two terrains in a pair separately.  However, the @{"stencil" link STENCIL} only uses one bit
per point, meaning that the two terrains in a pair are either both inside
or both outside the stencil.  Thus, a special search-and-replace feature
exists in the @{"Special Functions" link SPECIAL 44} menu, performing that function on the
different terrain types in each pair individually.  Its action is still
limited by the stencil.  This is so you can pull stunts like turning your
enemy's territory to sand.  That's always fun.

@endnode
@node SHOW_WAVES "Show: Waves"

Set the "Show:" gadget to "Waves."

This is yet another single-bit field.  The two valid numbers here are:

  00  No waves.
  80  Waves, for use with water.

The "Using:" gadget will simply toggle between these two.

Without waves, the water @{"Terrain Types" link SHOW_TERRAIN} are just flat blue.

Setting this bit will activate the anim of watery waves on this part of the
landscape.  The anim assumes that the altitude here is 00, and will appear
too far down on the screen if the altitude is higher (actually, the anim
stays in place, but the land appears too high).  Water sound-effects are
also turned on when the game is showing some waves.

If you make a new lake, or erase an old lake, you can fix the waves with a
function from the "Special Functions" menu:

	Repair Insane Settings for » Water: Waves

There is a similar repair function for the @{"obstacle" link SHOW_OBSTACLES} bits that lakes
require.

@endnode
@node SHOW_OBJECTS "Show: Objects"

Set the "Show:" gadget to "Objects."

This is the big one.  The main deal.  The default setting, if you will.
EdSet shows these objects when you first run it.

Don't confuse these "objects" with what EdSet sometimes refers to as the
"current object."  The "objects" listed here are the physical objects on
the landscape, such as trees and rocks.  But, the terms "current object"
and "object number" often refer to a member of whatever object list the
"Show:" gadget is showing, which may or may not be one of the physical
objects listed here.

This list of objects is the largest list in EdSet.  You can access it by
setting the "Show:" gadget to "Objects," and then clicking the "Using:"
gadget.

Many of these objects are meant to be placed on only one type of terrain
(grass, water, mountains, or desert).  But almost all of them work on other
terrains as well, which makes for a weird effect.  You can grow pine trees
in the mountains, or put geologist signs in the water, etc.

Here is a detailed description:

   00  Nothing.
   01  A flag.  See @{" Flags " link SHOW_FLAGS}
   02  A small building.  The game will expect to find a building ID number
       in @{"ID Num High" link SHOW_IDNUMH} and @{"ID Num Low" link SHOW_IDNUML}.  It will use this number to look up
       the building in a list deeper in the save file, that EdSet doesn't
       know about yet.  From that list it figures out what kind of building
       it is, how much is built, what supplies and people it contains,
       whether it is on fire, etc.  Don't mess with flags or buildings.
   03  A large building.  Just like 02 but needs some flat land.  The flat
       land must be higher than altitude 00 (sea level).
   04  The main castle.  Similar to 03 and 02 above.
05-07  Unknown.
08-0F  Eight oak tree objects.  The game uses these as eight animation
       frames of a single oak tree, constantly changing the number.  If you
       wish to select all oak trees with the stencil, use the "group"
       stencil options to capture this whole range of numbers.  When you
       are creating oak trees, it does not matter which of these numbers
       you use (the game will start changing it immediately, to make the
       leaves of the tree rustle as usual).
10-17  Eight animation frames of the pine tree.  See 08-0F.
18-1B  Four animation frames of the palm tree, found in deserts.  See 08-0F.
1C-1F  Four animation frames of the willow tree, found in lakes.  See 08-0F.
20-47  Unknown.  Usually crashes.
48-4F  Eight sizes of granite.  These are not animation frames like the
       above trees.  Each of these objects has a different number of pieces
       of granite that can be chipped from it.  Usually the @{"obstacle" link SHOW_OBSTACLES} bit is
       set for granite.  Note that granite chippers can only approach the
       granite from the point directly southeast of the rock.  Make sure
       that no buildings or other obstacles are in the way.
50-51  I call these "Piles of Junk."  They come in big and small sizes (big
       is 50).  They are brown rocks that sit in the grass.  You can't chip
       them or do anything with them.  They just get in the way.  They are
       so rude they even have their @{"obstacle" link SHOW_OBSTACLES} bits set!
   52  Cross, found at the tops of mountains.
   53  A stump from a chopped tree.
54-55  Pebbles.  These objects are only a minor annoyance.  They prevent
       farmers and tree planters from doing their job there.  But they are
       easily removed during the game, by replacing the pebble with a flag
       or building, and then removing the flag or building.
56-57  Skeleton and skull.  These objects are found in the desert, and are
       only minor annoyances (like pebbles).  See 54-55.
58-59  These are some odd, non-chippable rocks.  They're some of the more
       rare objects, but they have no use.  They stick up out of the water,
       blocking the way for boat paths.  Usually you have to look carefully
       at many large lakes before you find one.
5A-5B  A cactus for the desert.  Your choice of two different appearances.
   5C  A dead tree, often found in the grass.  No one will cut it down.
5D-61  Some animation frames of a pine tree falling over.  A tree chopper
       triggers this anim.  Object 61 is left behind, it is a stump with
       some pine tree branches behind it.  After a short while it becomes
       object 53 (just the stump).  Later it disappears completely.
62-66  Same as 5D-61, but for oak trees.  Object 66 is a stump with some
       oak tree branches behind it.
   67  Baby pine tree.  After an uncertain amount of time, it will grow
       into a full pine tree (see 10-17).  Try covering a large area of
       land with these, and watch for any pattern in the order which they
       grow into full trees.
   68  Baby oak tree.  See 67, 08-0F.
69-6D  Growing wheat.  When first planted, wheat is object 69.  Slowly the
       wheat (and its object number) grow.  It is not harvestable until it
       reaches object number 6E.
   6E  Newly-harvestable wheat.  After one harvest (or some aging), it
       seems to become object 7A.  See 79-7E.
   6F  Dead wheat.  What all wheat eventually becomes.  Hangs around for a
       while and then goes away.
   70  Big gold sign.  This is one of the geologist's signs.  It appears
       when the little white-haired guy finds some minerals and jumps for
       joy.  NOTE:  Just because the sign is here, doesn't mean there are
       actually any minerals @{"underground" link SHOW_UNDERGROUND}!  See @{"Phoney Geologist" link EASY 68}.  The sign
       disappears automatically after a while.  Try filling all unused
       spaces in a test save game with these signs.  Play the game for half
       an hour or so.  There is a definite order in which the signs
       disappear, can you see it?  It's different for different world
       sizes.  As far as I can tell, all aging of objects in "The Settlers"
       (except burning buildings etc) is done NOT with time, but with weird
       obscure patterns like this one.
   71  Small gold sign.  Not as much gold as 70.  See 70.
   72  Big iron sign.  See 70.
   73  Small iron sign.  See 70.
   74  Big coal sign.  See 70.
   75  Small coal sign.  See 70.
   76  Big granite sign.  See 70.
   77  Small granite sign.  See 70.
   78  Blank sign, for when a geologist finds nothing @{"underground" link SHOW_UNDERGROUND}.  See 70.
79-7E  More harvestable wheat.  See 69-6D, 6E, and 6F.  My theory on this
       is that originally, "The Settlers" allowed you to harvest wheat only
       once before it died.  The game designers probably figured out,
       pretty quickly, that wheat grows far too slowly to only get one
       harvest from it.  So objects 79-7E were added here at the end of the
       object list, almost as an afterthought, to allow you to harvest
       wheat multiple times.  Wheat also ages over time, reducing the
       number of times you can harvest it (and making that number
       unpredictable).  One thing is predictable:  Once wheat gets to
       object number 7E, it only has one harvest or aging cycle left in it
       before it becomes object 6F, dead wheat.
   7F  Unknown.  Usually crashes.

That's the end of the object list.  Those of you who are programmers might
be curious what the 7th bit is doing (would-be objects 80-FF).  But that
bit isn't part of these object numbers, it's instead used for @{"Waves" link SHOW_WAVES}.

@endnode
@node SHOW_IDNUMH "Show: ID Num High"

Set the "Show:" gadget to "ID Num High."

Each building, and each flag, has a different ID number.  The number is
stored in two pieces, which I call "High" and "Low."  The lists are
separate -- that is, Flag 07 is different from Building 07.  These lists,
unfortunately, are deep in the save file where EdSet doesn't know how to
look yet.  In other words, don't mess with the ID numbers.

See @{"ID Num Low" link SHOW_IDNUML}.

ID Num High also has another use, when it's not holding half of a building
number.  It can mark the spot on a road where a currently inactive supply
person is waiting for supplies.  The numbers used here are:

  80  Cyan supply person (for player 1).
  81  Red supply person (for player 2).
  82  Purple supply person (for player 3).
  83  Yellow supply person (for player 4).

The supply person can be either a road supply person (standing, waving arms
about cluelessly) or a boat supply person (sitting in boat, waiting).  The
game figures out which to draw, not by looking at the person's identity,
but by reading the @{"obstacle" link SHOW_OBSTACLES} bit for that point of the landscape.

Once again, EdSet does not have access to the person lists yet, so it is
best not to mess around with the supply people.

@endnode
@node SHOW_IDNUML "Show: ID Num Low"

Set the "Show:" gadget to "ID Num Low."

This is the lower half of the building number from @{"ID Num High" link SHOW_IDNUMH}.  It's only
used on points that have buildings or flags on them.

If you try to edit a point that has no building, you will see the message
	"Unmodifiable shared point.  See DOCs!"

This is because when no building or flag is on a certain point of the
landscape, the memory used by "ID Num Low" is instead used to contain
information about minerals found @{"Underground" link SHOW_UNDERGROUND}.

NOTE:  If you do add-to/remove-from stencil operations on "Current Object"
       or "Group" while "ID Num Low" is showing, you will only affect the
       stencil in points where a building or flag exists.  Other stencil
       points will remain unchanged, because the "Current Object" or
       "Group" does not even apply to them.

@endnode
@node SHOW_UNDERGROUND "Show: Underground"

Set the "Show:" gadget to "Underground."

This is where minerals are stored underground, and where fish are stored
underwater.  Unfortunately, it shares its memory space with @{"ID Num Low" link SHOW_IDNUML}.

THIS MEANS YOU CAN ONLY HAVE MINERALS OR FISH IN PLACES WHERE A FLAG OR
BUILDING DOES *NOT* EXIST.

If you put a lot of flags in the mountains, do you know what happens?  You
waste your minerals!  The reason for this seems to be that memory space is
very cramped here in the landscape data.

The object number here in "Underground" can be interpreted two different
ways.  If it is seen by a fisherman, it will be interpreted as a quantity
of fish.  This quantity can get extremely high ("Stock Lakes" uses A0,
that's 160 fish)!  However, if it is seen by a miner, it will be
interpreted as minerals:

21-3F  Gold
41-5F  Iron
61-7F  Coal
81-9F  Granite

The "Using:" gadget will give you a nice list of these.

Fisherman are pretty localized; I don't think they can fish from the
mountains.  Miners, however, have a certain underground "range" they can
mine from.  The mine itself has to be built in the mountains, but the miner
is not restricted to the mountains.  The game itself often puts minerals
into the grass right next to the mountains, because miners can reach them
there (MEGA-Geologist reveals this).  And guess what, if a lake is in range
of the mountains, a miner can reach that too.

Once I tried putting a lake right next to some mountains.  I left the
mountains empty, but filled the lake with "3F."  Guess what, not only could
my fisherman fish from that, but a nearby gold miner could also mine gold
from the same place.  My brother Al suggested that these were "goldfish."
Don't worry, I whapped him on the head.  ;-)

MEGA-Geologist had to be programmed not to put signs in the water.  It
surprised me a lot the first time I saw gold signs sticking up out of the
water!

The presence of water causes the "Underground" value to increase every now
and then (the idea is that the fish are breeding).  Mountains don't do this
(so your minerals aren't reproducing).  Fish don't seem to swim or migrate
though.

NOTE:  If you do add-to/remove-from stencil operations on "Current Object"
       or "Group" while "Underground" is showing, you will only affect the
       stencil in points where a building or flag does NOT exist.  Other
       stencil points will remain unchanged, because the "Current Object"
       or "Group" does not even apply to them.  See @{"ID Num Low" link SHOW_IDNUML}.

@endnode
@node SHOW_PERSON "Show: Person Num H, Person Num L"

Set the "Show:" gadget to "Person Num H" or "Person Num L."

These are the two parts of a 16-bit person number, as far as I can tell.
They seem to sometimes help out with buildings too, but I'm not sure about
that.  In any case, they reference a person list which EdSet currently
can't read or modify.

@endnode
@node COORDS "The Coordinate System"

NOTE:	Most people don't need to know this section in detail.  But it's
	very handy if you're trying to figure out how to use the X and Y
	numbers, or how things are stored in memory.

If you move the mouse over the view, without pressing any buttons, you will
see X and Y coordinates flashing by in the "Current Position:" text box.
Note that "The Settlers" uses a coordinate system that's a little strange.
The X axis is normal, increasing horizontally left-to-right.  But the Y
axis isn't vertical!  It runs kind of down and to the left (a direction I
describe as southwest).  If you wish to increase Y without changing X, then
southwest is the direction to go.  The whole landscape is effectively being
viewed at a slant.  This slant makes the land look like a grid of triangles
or hexagons.  But in memory, it is very much a rectangle.  The easiest way
to see this is to run the game itself, and look at the map with the grid
turned on.  See the lines?

              /                /
             /                /
      ------+----------------+------
           /                /
          /                /
         /                /
        /                /
   ----+----------------+-----
      /                /
     /                /

That's my ASCII rendition of the grid.  Beautiful, eh?  The landscape wraps
at the edges, so what we see above is one complete map and eight partial
copies of it.  The "+" signs show where X and Y are both 0.  X increases
along the "-" signs and Y along the "/" signs, wrapping to 0 at the next
"+" sign.

The landscape consists of a number of points, and some space in between
them.  A single "point" of landscape represents a small square of land,
that looks like this:

            X---------+
           / o       /
          /   o     /
         /     o   /
        /       o /
       +---------+

The X marks the spot where the real "point" is.  This is where a tree,
rock, building, etc., will appear if the point owns one.  There is a small
square (ok, a parallelogram, actually) of land associated with that point.
The three "+" signs show where three of the adjacent points are located (to
the east, the southwest, and the southeast).  Roads can connect the points,
and one such road (shown here with "o"'s) divides the square in half.  Note
that this forms two smaller triangles.  Each triangle can have its own
separate @{"Terrain Type" link SHOW_TERRAIN}, allowing for two terrain types per point!

The smallest world (size 1) has a grid of 32 by 32 of these points.  Each
larger world size doubles the width or height, like so:

  World Size 1:  32 wide,  32 high
  World Size 2:  64 wide,  32 high
  World Size 3:  64 wide,  64 high
  World Size 4: 128 wide,  64 high
  World Size 5: 128 wide, 128 high
  World Size 6: 256 wide, 128 high
  World Size 7: 256 wide, 256 high
  World Size 8: 512 wide, 256 high  ...this is just huge.

Let's put 4 points together to form an example 2x2 section of land:

               HOUSE------TREE-------+
                / o       / o       /
               /   o     /   o     /
              /     o   /     o   /
             /       o /       o /
           ROCK------FLAG-------+
           / o       / o       /
          /   o     /   o     /
         /     o   /     o   /
        /       o /       o /
       +---------+---------+

Note the flag in the middle, and how it has six potential directions for
roads to travel from it.  All points are like this (because of the seamless
wrap at the edges of the landscape), so people are tricked into thinking
the roads lie on a hexagonal grid.  The actual coordinates for this piece
of land might be:
	House:	X10 Y20
	Tree:	X11 Y20
	Rock:	X10 Y21
	Flag:	X11 Y21

Notice how diagonals are only allowed in one direction (marked by "o"'s).
In the game, the slant makes these diagonals the same length as the sides,
tops, and bottoms of points.  Thus, the house is "next to" the flag, but
the tree is not "next to" the rock.  The whole landscape is divided into
equilateral triangles, each with its own possible @{"Terrain Type" link SHOW_TERRAIN} (grass,
desert, mountain, etc).  Each point in the coordinate system must have
information about the two triangles of terrain, but only one "object" such
as the flag or tree.  Watch out for using stencil functions on the terrain
type, as the stencil operates on pairs of triangles instead of individual
ones.  This limitation gave rise to @{"Search and Replace Terrain Type" link SPECIAL 44}.

@endnode
@node MODES "View Mode and Edit Mode"

Normally, EdSet is in View Mode.  Just under the "Show:" gadget, you will
find a smaller cycle gadget that says "Mode: View."  In view mode, the left
mouse button can be clicked anywhere on the landscape to read what object
is there.  The object number is copied to the small string gadget to the
right of "Using:," to show that you are using that object now.  EdSet will
then give its best guess as to what the number means, taking into account
both the value of the number itself, and the setting of the "Show:" gadget.
This guess will appear in the text box to the right of the number.  If any
object lists are visible, they will be updated to reflect the new object.

The idea is, in View Mode, you click on things with the left button, and
EdSet tells you what they probably are via the top-right text box.

You can also set the "Mode:" gadget to "Edit."  In Edit Mode, a small box
follows your mouse pointer around the landscape.  This is to let you know
that you are in the dangerous "Edit Mode," and also points out the spot
that you are about to edit.  Careless use of this mode will destroy your
saved game, so make a backup of the game somewhere.

In Edit Mode, pressing the left button over part of the landscape will
overwrite that point with the current object (unless the stencil is on and
forbidding it).  There are a number of ways to set the current object
before writing it to the landscape, including View Mode, the "Using:"
gadget, and simply entering an object number by hand.

@endnode
@node VIEW "The 'View' Menu."

	Zoom: Way In
	Zoom: In
	Zoom: Normal
	Zoom: Out
	Zoom: Way Out

These menu functions control how far apart points on the landscape are
spaced when rendered to the screen.  Currently the view does not take
aspect ratio into account.  Things generally look nicer on an interlaced
screen (which is closer to a 1:1 aspect ratio than a non-interlaced one).
Trust me, using 1:1 makes the mouse math a whole lot faster.

You can pick whatever Zoom setting you like, but keep in mind that the
zoomed-in ones refresh and scroll MUCH faster than zoomed-out ones.

	Show X and Y Axis

When checked, the landscape will show places where X or Y coordinates are
zero, by drawing them in a different color.  This turns out to be the same
lines that show during the game itself, when you bring up a map and switch
the white "grid" on.  It's where the landscape "wraps" or repeats.  It's a
nice landmark sometimes.

	Show as Numbers

Certain items from the "Show:" cycle gadget have their own specialized
rendering routines.  For example, "Ownership" shows up as "C," "R," "P," or
"Y," depending on the owner of the land in question (Cyan, Red, Purple, or
Yellow, the four colors of players).  But, if you check "Show as Numbers,"
then these types of "special" rendering are turned off, replaced by the
actual object numbers (raw hex numbers straight from the save file).  In
the example above, it would be "80," "A0," "C0," and "E0."  A more useful
time to use this option is when you are showing altitudes.  Altitudes are
normally shown just with positions on the screen, but this option lets you
view the numerical data that governs them.

	Show Altitudes

When checked, points on the landscape are shown with proper positioning by
their altitudes.  However, if your altitudes are messed up, sometimes lines
or points will overlap in odd ways.  You can switch this off to flatten the
appearance of the landscape in EdSet.  Then you can edit things back to
normal, perhaps with some help from "Show as Numbers."

	Show Terrain

This does nothing.  Someday I may have the terrain show up as nice, pretty
colors (green grass, blue water, etc).  But this is only a beta version.

	Show Roads

When checked, roads show up on the landscape.  If you only have a 4 color
workbench screen, they will be the same color as the X and Y axis.  This
can be confusing if you're not used to it, but you can always turn one or
the other option off.  A nicer solution is to use at least 8 colors on your
workbench screen.

@endnode
@node SPECIAL "The 'Special Functions' Menu."

This menu has all the fun toys in it.

Set Unused Spaces to Current Object
	For each point in the landscape that's inside the stencil, EdSet
	checks if the value being shown is "00" (00 is never written to the
	screen, because it almost always means nothing interesting is
	happening at that point).  If it is 00, it will be replaced by the
	current object (the value showing to the right of the "Using:"
	gadget, with a text description of it further to the right).

	Try stenciling enemy territory, then select Show: Objects and type
	object number 5C (dead tree).  Then pick this menu function.  Watch
	the fun begin as your enemy's territory fills with dead trees.  But
	the dead trees do NOT overwrite existing buildings and such, which
	would be bad news for The Settlers.

Set Whole Map to Current Object
	Similar to the above menu function, only more dangerous, because
	the check for 00 is not done.  Usually one uses this only after
	careful stenciling of the appropriate areas.  With the right
	stencil, you can use it to erase all trees or granite from
	someone's territory, etc.

Search for Current Object in Map
	I myself keep forgetting that THE SEARCH IS LIMITED TO THE
	STENCILED AREA.  If the object is found in the map, the map will
	scroll to place it in the upper-left corner of your view (you may
	have to scroll a bit to see it, if you are using a font that's too
	large).  If the object was not found, the screen will "beep."
	The actual search begins in the top-left of the current view, and
	continues to the right edge of the entire map.  It then drops down
	a row and keeps searching from the left edge of that row.  The
	entire map is eventually searched before EdSet gives up and beeps.
	So, if there are only a handful of such objects on the map, you can
	cycle through them with repeated searches (right-amiga-F).

	Let's say you want to search Purple's huge territory for his main
	castle.  You would first set the stencil to just Purple territory.
	Then, you would Show: Objects, and type object 04 (Castle) as your
	current object.  Then pick this menu item.  The enemy castle should
	now be in the upper-left corner of the EdSet view.  Don't forget to
	refill your stencil.

Search and Replace Terrain Type...
	@{"Terrain Types" link SHOW_TERRAIN} are not handled well by the stencil, because there
	are two triangles of terrain per single stencil point (see the
	@{"Coordinate System" link COORDS 34} for an explanation).  So, this menu item brings
	up a special search-and-replace mechanism only for Terrain Types.
	Check any terrain types you wish to replace with the current one.

	Try this:  Show Terrain Types, and select object 05 (Grass: Middle
	of patch.)  Then pick this menu item.  You see all the terrain
	types, but "Grass: Middle of patch" is checked and ghosted.  Now,
	click on the boxes for the three types of Desert, as well as the
	box for "Grass: Near the desert."  Checkmarks appear.  You are
	telling EdSet to replace all types of desert, as well as one type
	of grass found near the desert, with normal grass.  Click the big
	OK button to make it happen.  All your deserts are gone!  This
	trick also works with a stencil (if you want to remove deserts from
	your territory but no one else's, that's an easy stencil
	operation).  But if you do it with a stencil, you should then call
	Repair Insane Settings for » Terrain: Edges (see description
	below).

Find Maximum
	This function scans the type of things being shown for the maximum
	value.  Once again, only the stenciled area is scanned.  If the
	whole map is inside the stencil, the whole map is scanned.  The
	largest value found becomes the new current object.  The display
	does NOT scroll to show it.  You can make that happen with the
	above search function (right-amiga-F).

Repair Insane Settings for »
	This brings up a submenu of things that EdSet can try to fix if you
	screw them up with Edit Mode or one of the above functions.
	Beware, all of these functions are limited by the stencil!  The
	submenu has:

	EVERYTHING
		This is not done yet.  It's waiting for "Altitude: Max
		Steepness" (below).

	Water: All
		Not done yet.  Waiting for "Water: Altitude" (below).

	Water: Waves
		Working.  See Show: @{" Waves " link SHOW_WAVES}

	Water: Altitude
		Water should be at altitude 00, so that waves look right
		and boats don't go uphill.  Currently this function simply
		zeros out the watery areas.  It should really call
		"Altitude: Max Steepness" (below) to ensure that illegal
		values are not present.

	Water: Obstacles
		This tries to fix your Obstacle bits, over the whole
		landscape, so that people don't walk on water and so forth.
		This is not possible on the thinnest water strips, so be
		careful.  See Show: @{" Obstacles " link SHOW_OBSTACLES}

	Altitude: Max Steepness
		Not done yet.  There are some weird complications which
		have kept me from writing this function so far.  It would
		be easier to write if I had access to the internal building
		lists, but I haven't figured those out yet.

	Roads: Cross reference
		Working.  See Show: @{" Roads " link SHOW_ROADS}

	Terrain: Edges
		Most of your grass is probably 05 (Grass: middle of patch).
		But near the water it becomes 04, near the mountains 06,
		and near the desert it's 07.  Each of these has slightly
		different qualities, although they look exactly the same
		during the game.  However, if the edges of the grass are
		incorrect, the game sometimes burns down buildings that you
		put there!  To try to prevent this, I made this function.
		It fixes your grass to have the proper edges.

The remainder of the functions in the "Special Functions" menu are all
@{"Easy functions" link EASY 44}, described in that section.

@endnode
@node FILEFORMAT "What I know about the save file format so far."

Beginners, keep out!  This section is for experienced Amiga programmers who
want to poke around in "The Settlers" save files for themselves, with a
hex file editor or something.

I only figured out one section of the file (the landscape data), and that
is all that EdSet deals with.  There are other things in that file that I
haven't even looked at yet.  Read up on the advanced editing modes and
other complicated stuff that EdSet does, and you'll see why.

I'm going to start talking about offsets into the save file.  An offset is
the position of some data relative to the start of the file.  Offset 0 is
the first byte of the file.  Offsets are given in hex.

At offset $80, there is an 8-letter ASCII password.  Most files will have
"START   " written here, but "mission" games will have other passwords,
depending on the mission level.  These passwords can be found on Usenet and
other "game cheat" type places.  I won't give them away here.

At offset $89 is one byte that contains the world size, range 1 to 8.  You
should read about the @{"Coordinate System" link COORDS} and fully understand it before you
get any further reading about the file format.

At offset $8A is a 6-byte random seed.  It was probably entered by the
user, and was originally used to generate the landscape.  It is being saved
here for no other reason than to show it to the user later, in case he or
she wants to write it down.  When shown to the user, the random seed looks
like a 16-digit octal number, except the range is 1-8 not 0-7.  Amazing,
you never thought you'd find a use for octal, did you?

The rest of this general area seems to have all kinds of header
information.  I think I've found the most interesting bits.

The next 30k or so of data seems to be charts and graphs.  All those red
graphs detailing coal production, farmer productivity, etc., not to mention
the line graphs showing the four player's relative strengths in terms of
territory, buildings, and knights, are kept here.

After that, the great landscape data begins.  It always seems to start at
offset $87CA.  That offset is hard-coded into EdSet, in fact, as MAP_START.

There are 8 bytes of data per point on the landscape, in two groups of 4
bytes each.  I am going to number these 8 bytes, so you can tell them
apart, like this:

Byte 1:  Bitwise OR of @{"Flags" link SHOW_FLAGS}, @{"Obstacles" link SHOW_OBSTACLES}, and @{"Roads" link SHOW_ROADS}.
Byte 2:  Bitwise OR of @{"Ownership" link SHOW_OWNERSHIP} and @{"Altitude" link SHOW_ALTITUDE}.
Byte 3:  Two @{"Terrain Type" link SHOW_TERRAIN} nybbles (4-bit fields).
Byte 4:  Bitwise OR of @{"Waves" link SHOW_WAVES} and @{"Objects" link SHOW_OBJECTS}.

Byte 5:  @{"ID Num High" link SHOW_IDNUMH}
Byte 6:  @{"ID Num Low" link SHOW_IDNUML} or @{"Underground" link SHOW_UNDERGROUND}.
Byte 7:  @{"Person Num H" link SHOW_PERSON}
Byte 8:  @{"Person Num L" link SHOW_PERSON}

The landscape is divided into rows.  There is a whole row of groups of the
first 4 bytes, followed by a row of groups of the second 4 bytes.
Graphically, it would look like this:

      X0   X1   X2   X3   etc...
   /--------------------
Y0 | 1234 1234 1234 1234
Y0 | 5678 5678 5678 5678
   |
Y1 | 1234 1234 1234 1234
Y1 | 5678 5678 5678 5678
etc.

So in memory, we have whole bunches of "1234" bytes before we see any
"5678" bytes.  Got that?  Good.

After the end of the landscape data, we have some weird pad bytes.  Then
comes a list of 16-byte items.  I suspect this to be a list of people
available in the world.

After that, there's some pad bytes and a general mish-mash of stuff.  I
think building and flag lists are in here somewhere, and further, I suspect
that they may take 70 bytes each.  You'll notice the save file grow in size
when you add buildings and flags.  It grows when people are being produced
also.  Somewhere just past all this is the end of the file.

EdSet doesn't attempt to modify anything except the landscape data.  All
other parts of the save file are copied verbatim.

If you try to figure out some of these other parts of the save file, I'd be
interested in hearing the results.  Send email to me at:

  emackey@BIX.com

                                             --Ed.

@endnode
@node AUTHOR "Some stuff about me."

Well, my name is Ed Mackey, and in the Amiga community I'm known for
creating a game called "MegaBall" and an old modplayer called "EdPlayer."
You can reach me by Internet email at:  emackey@BIX.com

I started work on "EdSet" after getting addicted to "The Settlers."  I was
addicted enough that the cuteness of the geologists had worn off, and I was
really fed up with their slow performance and traffic-jam-causing habits.
I needed to see ALL of the minerals, everywhere in the world, all at once,
so that I could make good decisions for where to put mines.

I took a binary file editor to some test saved games of mine and started
poking around.  After many crashes, I found the part of the save file that
represents the landscape.  I started work on a program to play with just
that range of the save file (ignoring charts, flags, buildings, roads, and
people).  Soon my program had grown a full GUI (thanks to GadToolsBox
v2.0c) and let me edit the various bytes by hand.  That's when I really
started to sort out their meanings, and several crashes later, I had a
pretty good idea of what I was allowed to play with and what was "off
limits."  Soon I started to make specialized functions that were pretty
safe to use.  MEGA-Geologist was one of the first, and I was really happy
when it worked.  Others soon followed.  I had a "Search for object"
function, and I was planning to write a general "Search-and-replace object"
function, when out of the blue, the idea for the stencil hit me, making
search-and-replace quite obsolete (it was later put back in for Terrain
Types).

More and more features got added, and my friends bugged me more and more to
release it.  Lately, several other projects are demanding my attention, and
it looks like I will be prevented from working on EdSet for some time.  But
I couldn't just let it sit on my HD unused, so I'm releasing it as a "Beta
Test" version.  Now I'm off to work on more profitable things (I don't
think of myself as greedy, but money is tight sometimes.  You know how it
is).  I hope my friends and other people get some fun from EdSet.  I have.

	Ed Mackey		Call @{" Somerton Telecomm II BBS! " link SOMERTON}
	emackey@BIX.com		(215) 464-6775    Philadelphia, PA

@endnode
@node SOMERTON "What to do with your modem"

         CALL!
    ___ ___ ____ ___ ___ ____ ___       ____ ___     ___ ___ ___ ____  ____
   /__ /  // / //_  /__/  /  /  //| /    /  /_  /   /_  /   /  // / / / / /
  ___//__//   //__ / \\   /  /__// |/    /  /__ /__ /__ /__ /__//   / /   /

 * Teleconferencing     * 175 Local Message Bases     * Amiga/IBM/Mac/64/Unix
 * 100+ File Libraries  * 11,000+ Messages Since 9/92 * 4,250+ Files Online
 * 12 Incoming Lines    * Top Notch Staff to Serve    * Est. 10/17/1987
                        * Bi-Weekly Get Togethers     * Online KJ Bible

               * Coming Soon: FidoNet, Internet, and Much More!

    "A microcosmic electronic world, but with better living conditions!"

                      2400 baud modems : (215) 464-6775
                      14.4 Kbaud .32bis: (215) 464-8192
                      14.4 Kbaud HST   : (215) 464-4461
@endnode
