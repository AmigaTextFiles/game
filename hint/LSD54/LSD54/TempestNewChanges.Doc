.-----------------------------------------------------------------------------.
`-----------------------------------------------------------------------------'
.-----------------------------------------------------------------------------.
`-----------------------------------------------------------------------------'
                   /T\empest Changes/History Readme File
.-----------------------------------------------------------------------------.
.-----------------------------------------------------------------------------.
`-----------------------------------------------------------------------------'
`-----------------------------------------------------------------------------'

 ** This readme contains very important information on how to upgrade to
    newer versions.  If you don't read this text file you are taking a large
    risk in running the new versions.

.-----------------------------------------------------------------------------.
`-----------------------------------------------------------------------------'

**** UPGRADE INFO: o Upgrade your prompts.set file.

                   o Make sure you define the new File Copy Buffer size in the
                     BBSConfig's System Configuration Menu.

**** PROGRAMMER INFO: All programs that use the Globals or Node_info structure
                      should be re-compiled with the new Globals Structure.


[September 13, 1994]


o Bug Fix - Fixed bug in New File Catalog System when moving files from one
  area to another area.  There as a problem with the pointers if you tried
  to put a file back online that you took offline by moving.
  (Thanks to Tas for finding it)


[September 14, 1994]


o Bug Fix - in new cd rom handling if there was no path defined.

o Added new option to account editor that will allow a sysop to totaly wipe
  out an account, in case an account slot ever gets corupted or has
  an incorrect slot number, etc.  Command is "D" when you enter account
  editor.

o Added a corupt handle check to the UserIndexMaker, so if the handle is
  corupted and is not null terminated, the userindexmaker will report the
  slot that is corupt and will continue on to create valid index files and
  of course won't crash.
  (Thanks to Casa Nova for the idea)

o Bug Fix - Fixed bug when user logs on as a guest account, they were able
  to view all file mail, now they can not.
  (Thanks to Casa Nova for reporting it)


[September 15, 1994]


[September 16, 1994]


o When trying to download a message locally, it will no longer attempt
  zmodem, but will in fact do the same as the 'P'ut command to enter path
  to send message to.

o Installed Server Commands 30 & 31 for Sysop Login and Local Login.


[September 17, 1994]


o Removed Drop 2 Dos definition in BBSConfig since it is not used anywhere in
  the bbs.

o Bug Fix - Fixed bug in flagging of files from an area that is upload only.
  Users were able to flag files from a upload only area then go to another
  area and download files from that area since they were flagged, now the
  bbs won't allow users to flag files in an area that is upload only.
  (Thanks to TAS for reporting it)

o Added more error messages to bbsconfig util so if it does not load it will
  give more reasons why.

o Improved Tempest's error messges as well.


[September 18, 1994]


o Added ability to select 'A' for All when local uploading with wild cards.
  Before the sysop had to select 'y' yes every time a match was found, now the
  sysop can just type 'A' All and the bbs will local upload all matchs found.
  This also helps on mass uploading of files.
  Now it is possible to just select like 'FILES:AREA-01/*' and all files in
  that directory will be local uploaded without having to select 'y' for yes
  on every match.

o Edited prompts.set line 170 to add the 'A' command to the prompt of above
  listed feature.

o Changed FLEdit.mod so if a sysop kills a file and doesn't take credits, it
  won't report 0x taken.
  (Thanks to EFA for reporting it)

o Changed FlEdit.mod to add message to descriptions when a user has been given
  extra credit for a file uploaded.
  (Thanks to EFA for reporting it)

o Bug Fix - Got rid of a leading blank line on every reply to a message.
  (Thanks to EFA for reporting it)

o Modified file listing to move cursor up and blank file listing prompt out
  when flagging files, so that the screen doesn't have to scroll as much.
  (Thanks to EFA for reporting it)

o After considering what I did above with the flagging of files entry on
  the file listing prompt, I decided to do the same with all input on this
  prompt.  So now anytime you select a command of any kind on the file listing
  prompt, the file listing prompt is erased and the next line of text starts
  at that point.


[September 19, 1994]


o Added display of total bytes / files transfered and a daily download limit
  reward for uploads.

o Added ability to set the percentage of download byte/file credits that are
  added to the amount left for the day when a user uploads files.  Under
  System Configuration menu in bbsconfig.


[September 20, 1994]


o Added definable File Copy Buffer to the System Configuration.  If this new
  setting is set to 0, then the bbs will try to allocate memory for the entire
  file being copied, otherwise it tries to allocate what you define.

o Also added a check to the copy file routine so that if the copy buffer is
  greater than the file's size that is being copied, then the bbs will only
  allocate enough memory for that file, instead of using the copy buffer.


[September 21, 1994]


o Added ability to download files within archives, so users can now download
  files inside an archive.  This is handled through the View/Test archive
  function.  Supports ZIP and LHA formats only with zmodem protocol only.

  ** USES CD / DAT Temporary PATH, Make sure you define this path in
     BBSConfig, AND MAKE SURE!!! That the directory you give is Both different
     for every node, and HAS NO! FILES IN THE DIRECTORY YOU DEFINE!!!! The
     BBS will delete any files found in this CD / Dat Temporary Path.


o Added ability to local downlaod files from within an archive.  So that a
  sysop can extract single files out of an archive online and copy it to
  another path.  Cool eh?  Supports ZIP and LHA formats only with zmodem
  protocol only.


[September 22, 1994]


o Added 'Sysop Login' pull down menu to sysop login from menus.

o Added 'Local Login' pull down menu to local login from menus.

o Added 'Quit Node' pull down menu to quit the node from menus.

o Added 'Account Editor' pull down menu to enter account editor when no user
  is online.

o Added 'Local Color Toggle' pull down menu to allow the sysop to strip ansi
  color on their end or not.

o Bug Fix - Fixed bug in THydra where Hydra was still thinking it was a lame
  IBM program.  It is not educated.  hehehe

o Added many new variables to the Globals Structure that can be accessed
  through node_info structure.  New variables include:

 char ULFileName[100], // Current UL FileName
      DLFileName[100]; // Current DL FileName

 long ULPosition,      // Position of current file being uploaded
      DLPosition,      // Position of current file being downloaded

      ULFileSize,      // FileSize of current file being uploaded
      DLFileSize,      // FileSize of current file being downloaded

      ULBytes_Xfered,  // Total UL Bytes Transfered
      ULFiles_Xfered,  // Total UL Files Transfered

      DLBytes_Xfered,  // Total DL Bytes Transfered
      DLFiles_Xfered;  // Total DL Files Transfered

 BYTE ChatFlag,        // Sysop Avaialable Flag On       (1=Yes, 0=No)
      TempSysopAccess; // Temporary Sysop Access Flag On (1=Yes, 0=No)

  ***** NOTE:  This means that all programs that use the Globals structure
               already, should be re-compiled with the latest structure
               info!
 (Thanks to Amtrac for some of the ideas)

o Re-Designed the DSKEL-WHOsd Who door to add the new File Positions data.
  The who door is many times faster and uses less cpu as well.
  The new who door display looks like this:

    .-------.-------------------------.---------------------------------------.
    | LoGoN | HanDLe / LoCATioN       |  ACTiViTY CPS FiLENAME POSiTiON SiZE  |
.---|-------|-------------------------|---------------------------------------|
| 1 | 19:44 | The Skeleton            | DownLoading                           |
`---|  2400 | United States           | DL:  244     crap.dms   11500/  88383 |
.---|-------|-------------------------|---------------------------------------|
| 2 | 19:33 | The Skeleton            | UpLoading                             |
`---| 19200 | United States           | UL: 1672     shit.dms    1024/ 588383 |
.---|-------|-------------------------|---------------------------------------|
| 3 | 11:33 | The Skeleton            | UL: 1800 12345678.dms  100111/1488383 |
`---| 14400 | United States           | DL: 1780 abcdefgh.zip   20111/ 688383 |
.---|-------|-------------------------|---------------------------------------|
| 4 |   :   | [ Hidden from display ] | Logging On                            |
`---|       |                         |                                       |
.---|-------|-------------------------|---------------------------------------|
| 5 |   :   |                         | Waiting for call                      |
`---|       |                         |                                       |
    |-------^-------------------------^---------------------------------------|
    |------------------.------------------.-----------------.-----------------|
    | Active Lines: 8  | Users Online:  4 | Free Lines:  4  |  Hydra is Cool  |
    `------------------^------------------^-----------------^-----------------'

  Is this a cool who door or what?  Even shows positions now!!

o Bug Fix - Fixed a bug in THydra that I was hunting for about a week for.  I
  had put debug info in to catch it and finally it fell into my trap and was
  killed/Fixed!  This was the bug that locked up THydra when it tryied to Abort
  for whatever reason.  I am happy to have this one fixed!

o Added support to THydra for Total files/bytes uploaded and downloaded.  Now
  Upload rewards will work with Hydra transfers as well.

o Tempest will no longer grant extra time when a user failed to upload a
  single file.
  (Thanks to Chad Kovac for reporting).

o Added more prompt.set lines 494 -> 500.


[September 23, 1994]


o Added more prompts.set lines 501 -> 516.

o Bug Fix - Fixed bug with saving of new accounts to the end of the
  accounts.data file.  Seems it would work fine if there was an opening
  slot that was deleted, but on new accounts to the end of the data it would
  mess up.  This was like a MAJOR BUG FIX!
  (Thanks to JAF & EFA for helping me fix this problem and putting up with me).

o Bug Fix - Fixed bug in display of current protocol.  Seems I had them
  backwards.
  (Thanks to Casa Nova and others for reporting it)

o Fixed welcome text so if a sysop kicks the user off on this screen it will
  work.
  (Thanks to Chad Kovac for reporting it)

o Removed part of the script used to call the archive checker from, it use to
  set the stack at 25k before running, now it leaves the shell at whever the
  default stack is, which is 4k.

o Bug Fix - Downloading files inside an archive locally was not deleting the
  file in the temporary cd path.  Now it will.
  (Thanks to JAF for reporting it)

o Bug Fix - Fixed similar bugs in THydra like the one I hunted down earlier.

o Bug Fix - Fixed a bug with the Internal serial port picking up dtr signals
  from other serial ports.  The orginal code that handled the dtr was totaly
  messed up and not ment for multiple ports.  I re-wrote a new one that works
  perfectly.  No more conflicts!
  (Thanks to JAF and TAS for reporting this one)

o Found that tempest was opening/closing the serial port twice every time a
  user logged off.  Now it does it once, unless you run the a2232 serial
  card.  The a2232 has many problems and needs extra consideration in the
  code.


[September 24, 1994]


o Continued debugging of Hydra code.

o Working on Asynchronous routines for serial output.  If I succeed in making
  them, the serial output should be much faster.  Will see what happens.


[September 25, 1994]


o Have some what asynchronous seiral output routines in tempest now.

o Added upload script execution after Hydra Bi-Directional transfer is done
  and there was uploads.

o Fixed problem with File Listing Option (Ansi Off).  If ansi was turned
  off in file listings, there would still be some ansi left. Should be fixed
  now.

o Added new System Flag to control the ability to download files within an
  archive or not.

o Added download access ability check to view archive options "read text" and
  "Download file inside" options.  Now it is not possible to perfrom these two
  operations if a user does not have access to download.

o Added download access ability check to reading/viewing text files command.
  Did this since it is the same as a download on text files.

o Made modem go busy right away when resetting modem settings on BBS.  This
  way user's won't get a no answer on the modem while this is going on.

o Improved handling of dropping the line.  Now if DTR is on, the bbs will
  drop the dtr and not bother to send the hang up string.  This will result
  in fast kick offs.

o Re-coded File Mail System so if a sysop is on the system locally, the bbs
  will go into Local Uploading routine when they select 's' to send file mail.
  This makes it easier for sysops to figure out how to send private file mail.

o Added support for Local Downloading of File Mail.

o Bug Fix - Fixed bug in File Mail, Seems that it was not showing descriptions,
  sent to:, date uploaded:, Last Date DL:.  These things were not showing
  because of the conversion to the new catalog system.  I suppose these things
  were overlooked until now.  Fixed.

o Improved handling of modem on resets and other locations.

o Bug Fix - Fixed some bugs in the handling of the opening/closing of windows.
  There would be some problems when closing the screens or moving to workbench
  mode and back to custom screens.
  This fixes a few  different problems in the bbs.

  - Fixes bug with shutdown command or shutdown server commands in Servers.
    Before, the system would sometimes crash when trying to shutdown a node.
    This will not happen anymore.. All shutdown features work fine now.

  - Fixes bug where you toggle the screen to workbench screen then back to
    a custom screen again.  Before, this would crash the system as well.
    Now it works perfect, switch a hundred times back between different
    bitplanes and workbench screen.  It works great now.

  - This fix may fix a few other random crashes that happened now and then.


[September 26, 1994]


o Worked on a new File Listing Settings Menu.

 File Listing Settings:

 ( 1) View Mode.:
 ( 2) # of Lines: 15/15
 ( 3) Direction.: New -> Old

 Select # or return to exit:

o Added ability to change file listing scan direction in the file lisitng
  settings.

o Optimized SKEL-WTU Util.  The util was doing alot of work before, now it
  should be much faster.

o Had to go back to Synchronous serial routines since some sysops had
  problems on slower processors.

o Bug Fix - Fixed bug when user tries to change handle and hits return,
  deciding they didn't want to change it.  The bbs would tell them that
  they must change it.  Now it won't do that.

o Bug Fix - Fixed small display bug in FLEdit.mod with Receiver of files.
  If there was no reciever, the bbs would show the sysops handle.
  (Thanks to Chad Kovac for reporting it)

o Optimized internal routine that is used when a user scans the file listing
  from a certain date.  It was already faster than any other bbs's routine to
  do the same thing, but I made it even faster.  NO BBS Software can beat
  this routine for speed.

o Installed a check in ZModem transfers to check the pull down menus so that
  they will work even during a file transfer, I will test this to see if
  it slows it down any or not.

o Did New Programmers-Docs file.  Contains all programmer information.  I will
  remove door code from the main Tempest Docs and add it to the Programmers
  Doc file.

o Added new Server Command #11 : Node/Screen to Front.

o Added new Server Command #12 : Toggle Capture Log on/off.

o Added new Server Command #13 : Reserve Caller.   See new Programmer Docs.

o Activated Global Structure ChatFlag to determine if the chat flag is on or
  off.


[September 27, 1994]


o Fixed up some cleanup on NODE: Files.  Seems that when the bbs created
  file_id's to add to archives, it was not always cleaning up the work files
  by deleting them.  Now it does.
  (Thanks to Tas for mentioning it)

o Activated Logoff script to execute when doing a re-logon.


[September 28, 1994]


o Did debugging to try to find some recent problems.


[September 29, 1994]


[September 30, 1994]


o Continuing Debugging of code.

o Bug fix - Fixed yet another lock type bug in THydra.  Should be getting
  close to being bug free.

o Added stack line back into archive checker script.  Not sure but removing
  that may of caused some problems recently.  Putting it back to see if this
  fixes things.

o Bug Fix - Fixed bug in shutdown of Tempest.  Was a recent bug that was
  created in last few days.

o Bug Fix - Fixed bug with Online Account Editing being selected through
  pull down menus  Use to lock up after exiting editor if you entered it
  through the pull down menus.

o Bug Fix - Fixed small display bug on Sysop chat flag in user status window.
  (Thanks to Casa Nova for reporting)


[October 1, 1994]


o Did more debugging of code.

o Bug Fix - fixed another small lock bug in THydra.


[October 2, 1994]


o Added check marks to pull down menus, to see what is currently selected.

o Improved Instant Logon (Giving carrier to user that is on voice).  It now
  will send the carrier faster.

