

                                  O.T.T.
                                 Presents
                             Directory Opus 5
                     Typed and Edited By DIT 15-05-95
                                 Part Two


 COMMENT NAME/K,RECURSE/S,COMMENT/F

 Allows you to add comments to all selected entries, or to edit existing
comments. The maximum length of a comment is 79 characters. The RECURSE
switch enables recursive access to any selected files in subdirectories,
subject to the global Recursive Filter,

 PAGE 84

 DATESTAMP NAME/K, RECURSE/S, DATE/ F

 Allows you to change the datestamp of the selected files and directories
in the active directory window. When you select directories, you are asked
whether you wish the files within them to have their datestamps modified
also.

 The RECURSE switch enables recursive access to any selected files in
subdirectories, subject to the global Recursive Filter.

 For each entry, you are presented with a requester. If you Wish the file
to have its datestamp set to the current date and time, simply press
return. Otherwise, enter the date and time you want.

 To set the datestamp of all selected entries you should select the , All'
button from the datestamp requester

 Choose the 'OK' button, or press RETURN, to set the datestamp one file at
a time.

 PROTECT NAME/K,RECURSE/S,SET/K,CLEAR/K

 Modify the protection bits of the selected files and directories in the
active directory window. When you select directories, you are asked
whether you also wish the files within them to be Protected. For each
entry, you are presented with a requester displaying the protection bits
currently set for that entry. This is described in greater detail later.

 The RECURSE switch enables recursive access to any selected files in
subdirectories, subject to the global Recursive Filter.

 Protect applies to all selected files in all the current SCRE Listers.

 PAGE 85

 The Protection Requester allows you to change the protection bits of a
file or subdirectory.

 See Fig 8-5 Protection Requester

 The protection bits are a group of flags stored with the file, that
determine the characteristics of the file. These flags are given single
character names. The protection bits currently in use are HSPARWED.

      H Hidden: If this flag is set, the file is not normally displayed.
      this allows you to mark certain files as "invisible", to avoid
      cluttering your directories. The file can still be accessed
      normally, and not all programs implement this flag.

      S Script: A script file is a file containing a list of AmigaDOS
      commands to execute; it is like a simple computer program. This flag
      indicates that the file in question is a script file. A script file
      is sometimes called a batch file

      P Pure: If a program file is flagged as pure, it can be made to
      remain in memory ("made resident") , even when not in use This can
      save a great deal of time, especially if the program is used often,
      since it does not have to be loaded from disk each time.

      A Archive: This flag indicates that the file has not been changed.
      If this file is ever written to, the , A' flag will be cleared This
      flag is often used by hard disk backup programs to record which
      files have not been changed and do not need to be backed up again.

 PAGE 86

      R Readable: If this flag is set, the file can be accessed.

      W Writeable: If this flag is set, the file can be written to (ie,
      more information can be stored in it than is already there).

      E Executable: If a program file does not have this flag set, it can
      not be run.

      D Deleteable: If this flag is not set, the file can not be deleted.

 While AmigaDOS and other programs do not fully support all of these bits,
Directory Opus 5 gives you access to all documented protection bits. As
AmigaDOS is enhanced, some bits, such as Writeable, will become more
useful. If you have additional questions about the usage of the bits,
refer to your Amiga Documentation.

 The Protection Requester shows the current file to be modified and the
protection bits currently set. Underneath are two rows of buttons
corresponding to the protection bits which you may wish to set or clear.
When a button is highlighted, it means that the bit will be cleared or set
as shown when you click the 'Ok' button.

     Ok: Causes the current file's protection bits to be set as indicated
     in the display.

     All: Causes all selected files to be set, without additional
     prompting, as indicated in the display.

     Skip: Skips over the current file and moves on to the next selected
     file in sequence.

     Abort: Aborts the Protect command.

 PAGE 87

 IconInfo NAME/K

 Allows you to modify the characteristics of icons such as stack size,
default tool and tooltypes. I t operates in a similar fashion to the
Information menu of Workbench.

 To use this command you may either select the '.info' files themselves or
the actual parent files or directories to which the icons refer.

 See Fig 8-6 Icon Information

 A requester will appear when you run this command on a valid icon. The
actual apperance of the requester will vary  depending on the type of
icon, but in all cases the actual icon imagery will be displayed. If you
click on the icon imagery with the left mouse button, any alternative
imagery will be displayed if it exists.

 The information displayed for each icon type is listed below. Once you
have made the desired changes to the icon, the Save button will save the
changes to disk. The Next and Cancel buttons will exit without modifying
the icon on disk.

     Drawer icon: For a drawer icon, you may edit the drawer's protection
     bits, comment and tool types. The date of the last modification of
     the drawer is also displayed.

 PAGE 88

     Project icon: For a project icon, you may edit the project's stack
     size, default tool and tool types. Also displayed are the size of the
     project in bytes and blocks, and the last modification date.

     Tool icon: For a tool icon, you may edit the tool's blocks, and the
     last modification date. Also displayed are the size of the tool in
     bytes and blocks, and the last mofification date.

     Disk icon: For a disk icon, you may edit the disk's Default Tool.
     Displayed are the total number of blocks, and the number of blocks
     used and free. The block size, creation date and disk status are also
     displayed.

 Protection bits: (where appropriate) are modified in the same way as with
the Protect command, except that the Hidden and Pure bits are not
accessible.

 Tool types: (where appropriate) are modified in the same way as from
Workbench. To edit an existing ToolType, simply select it, and press
RETURN when you have modified it. To create a new ToolType, select the New
button. To delete an existing ToolType, select it and then select the
Delete button.

 AddIcon NAME/F

 Allows you to add icons to all selected entries in the active file
Lister. Directory Opus 5 will automatically sense what type of file it is
and add the appropriate icon (drawer, tool or project). The current
default icons as defined in your Amiga system ENV;Sys directory are used.
(See your AmigaDOS manual for more details.)

*************************************************************************
 This command may not create icons for default file types if you do not
have any default icons in your ENV:SYS directory. If this is the case, run
the IconEdit program to create and save a Set of default icons for the
various file
*************************************************************************

 PAGE 89

 types. For more information on the creation and editing of default icons,
please Consult your AmigaDOS user manual.

 AddIcon operates on all files selected in all current SRCE Listers.

 ENCRYPT NAME/K, PASSWORD/K, TO/F

 Have you ever had files that you wanted to encrypt So that only people
who knew the password could understand them? This command allows you to do
just that. lt will encrypt all selected files, using the password that you
enter, with a complex algorithm that most people will find impossible to
work out. The resulting files are not written over the originals, but are
instead written to the destination directory. They will be the same size
as the original files, so you can ensure you have enough room in the
destination directory.

 To decrypt a previously encrypted file, you should enter the same
password preceded by a minus sign. For example, to decrypt files you
encrypted with the password 'FOO', select the fields, choose the encrypt
command and enter '-FOO' as the password.

 Encrypt operates on all files selected in all current SRCE Listers.

 READ NAME/F

 Displays the Opus 5 text reader so you may read selected files. The name
of the file is displayed in the viewer window title bar. Since the Opus 5
Viewer is an independent program with its own window , you may open as
many Viewers to show as many different files as you wish at any one time.

 The Opus 5 viewer provides a number of options from its menu selections.
These include search and print capabilities and are discussed in detail on
page 125.

 Read operates on the current SRCE directory ONLY.

 PAGE 90

 ANSIREAD NAME/F

 Displays the same file viewer as the Read command, except that it handles
the special ANSI control sequences.

 HEXREAD NAME/F

 Reads the selected files in the same way as Read, except in hexadecimal
format. This allows you to view binary files and other files containing
non-text characters.

 See Fig 8-7 Hex viewer

 Shown above is an example of the Hex Viewer's output. The first value is
the offset, displayed in hex. This is the offset position, in bytes, from
the start of the file. The next four values are each a four-byte long-
word, with the actual ASCII representation at the end. Any non-text
characters are shown as a '.' character.

 SHOW NAME/F

 Displays IFF ILBM pictures, brushes and animations. It will also display
other picture formats via the datatypes system of OS3.0 and higher.

 PAGE 91

 Opus 5 will show most pictures and brushes, including overscan, extra
halfbrite (EHB), HAM (4096 colour) pictures, and AGA 8 bit pictures.

 Under OS3.0 and higher, if a file is not in IFF format, but in a format
for which a datatype has been installed, the picture will be displayed by
that datatype.

 The following keys can be used when viewing a picture or animation:-

     Mouse Pointer to scroll

     Esc or Right Mouse Button to abort

     Q or Left Mouse Button for Next

     Space, Help or P for Help and Print Requester

 These keys can be used when viewing an Animation:-

     S Starts and Stops

     N Next Frame

     - Slow Down

     = Speed Up

     / Original Speed

     F1- F10 Various Speeds (F1=Fastest)

 PLAY NAME/F

 Allows you to listen to sound files. This command plays IFF 8SVX format
sound files, and raw data files. It will also play other sound formats via
the datatypes system of OS3.0 and higher. A small requester will appear
while the sound is playing, showing the name, type of sound file, and
playing time. To abort a sound before it has finished playing, click the
'Abort' button in this requester, or click the 'Next' button to skip to
the next sound.

 PAGE 92

 Because of deficiencies in the Some OS datatypes system, Opus sometimes
Cannot tell when a Sound being played through datatypes finishes playing.
If this is the case, you will have to click the 'Next' or 'Abort' button
manually.

*************************************************************************
 Due to the explosion in the variety of Sound module formats, e.g. Star/
Sound/Noise/ ProTracker , Med, OctaMed, Octalizer, and Med with MIDI
modules, Opus 5 cannot play all such sound formats. To play these formats,
we recommended that you set up a button to call one of the many excellent
Sound players currently available.
*************************************************************************

 PRINT NAME/F

 Prints the selected files from all the current SRCE directories. It first
displays the Opus 5 Print Requester which allows Full control over Print
formatting.

 See Fig 8-8 Print Requester

 PRINTDIR

 Print the current directory list shown in the SRCE Lister. The directory
will be printed as currently displayed. To change the format of the print-
out you must edit the Lister format first. PrintDir works via the Print
Requester, giving control over print formatting.

 PrintDir operates on the current SRCE Lister ONLY.

 PAGE 93

 FreeCaches

 Clears all the cached directory buffers which are not currently displayed
and free all unused memory. If you are running a bit low on memory, this
is a good way to free memory quickly.

 If you are running under WB 3.0 or higher, Opus 5 will install its own
internal low memory handler which will flush all unseen buffers
automatically if required under low memory conditions.

 SCANDIR NEW /S,PATH/F

 With no arguments, re-reads the current directory in the first SRCE
Lister. If you specify a path it will read that path into the current SRCE
Lister. If there is no current SRCE it will open a new Lister. If the NEW
switch is used, it will always open a new Lister.

 SELECT NAME/K,FROM/K,TO/K,BITSON/K,BITSOFF/
        K,COMPARE/K,MATCHNAAME/S,NOMATCHAAME/S,I
        GNORENAME/S,MATCHDATE/S,NOMATCHDATE/S,I
        GNOREDATE/S,MATCHBITS/S,NOMATCHBITS/S,IGN
        OREBITS/S,MATCHCOMPARE/ S,NOMATCHCOMPARE
        /S,IGNORECOMPARE/S,BOTH/S,FILESONLY/S,DIRSO
        NLY/S,EXCLUDE/S,INCLUDE/S

 See Fig 8-9 Select requester

 PAGE 94

 When Called with no arguments, Select displays a requester allowing you
to specify a pattern to match files in the current SRCE Listers. Files
matching the selection criteria will be selected or deselected depending
on the state of the Include or Exclude switch.

 The optional arguments take their names from the fields displayed in the
Complex selection requester. If called with arguments which satisfy a
selection criteria, the requester will not be displayed.

 The selection requester may be used in simple or Complex mode as shown
above.

 FINISHSECTION

 Forces any preceding programs (AmigaDOS, Workbench, Batch or ARexx) to
finish executing before carrying on to the next command. Note that the
next command need not be a Directory Opus 5 command; it is just more
likely that it will be one,

 For instance, to add a beep to the end of the LHArc list Filetype
command, you would change the command list to read:-

     AmigaDOS LHARc v {f}
     Command FinishSection
     Command Beep

 LoadButtons NAME / F

 LoadEnvironment NAME/F

 LoadOptions NAME/F

 These three commands take a filename as an argument and load the Opus 5
component files as described.

 LoadEnvironment and LoadOptions will then reset the program operation to
the newly loaded parameters.

 PAGE 95

 If only a simple file name is given, each command searches in the
appropriate Opus 5 path of either DOpus5:Buttons/ or DOpus5:Environment/
or Dopus5:Settings/ for the specified file. If a full pathname is given,
the command will use that pathname instead.

 DEVICELIST

 Displays in the current SRCE Lister, the list of all devices, volumes and
assigned directories present in the system. You may read any of these
devices by clicking on them.

 If there is no current SRCE Lister, a new Lister will be opened.

 CACHELIST

 Displays a list of all the currently buffered directories. Click on one
of the displayed buffers to jump to that buffer immediately, rather than
having to locate it manually.

 If there is no current SRCE Lister, a new Lister will be opened.

 DOUBLECLICK NAME /F

 DRAGNDROP NAME/F

 Execute the defined action for either DoubleClick or DragNDrop as defined
by the user for files of the selected type. In other words, they perform
the same action, for example, as double-clicking on a file. (See FileTypes
on page 99 for more information.)

 Commands work on all files selected in all current SRCE Listers.

 LEAVEOUT NAME /F

 Places the currently selected files on the Opus 5 Main Window and leaves
them out for easy access. The command works on all selected files (and
directories) in all current SRCE Listers.

 PAGE 96

 SMARTREAD NAME/F

 Invokes the Opus 5 reader program in either text, ANSI or HEX mode
according to the type of file selected. As with the Read Command, if
multiple files are selected, they will be displayed in sequence. Pressing
ESC will terminate the reading of the sequence.

 DISKCOPY

 Invokes the Opus 5 Diskcopy Requeter allowing you to select the Source
and destination drives and parameters for Copying disk. (See page 115).

 FORMAT

 Allows you to format a new disk. All new disks need to be formatted
before the computer can write to them. without arguments, the command will
display the Opus 5 Format Requester allowing you to choose the disk to
format and other parameters. (See page 117.)

 User1, User2, User 3, User 4 NAME/F

 These commands invoke the four user definable commands associated with
your Filetypes. In the default configuration the command User1 is defined
to extract files from archives.

 PAGE 97

 This page EMPTY

 PAGE 98

                               CHAPTER NINE

 FILETYPES

 A file is simply stored data. Files can contain executable programs, IFF
pictures, icons for Workbench, or a multitude of other kinds of data.
Most, but not all files, have an identifiable structure. Directory Opus
5's FileTypes system is designed to examine a file's structure and
identify the kind or type of data it contains. You can configure Directory
Opus 5 to understand an unlimited number of Filetypes.

 Filetypes are a versatile feature of Directory Opus 5. By using
Filetypes, you can configure Opus 5 to play animations when they are
double-clicked, to load and use Multiview when you attempt to Read an
AmigaGuide help file, or to uncompress an archived file when you drag and
drop it to a new directory.

 This is the essence of the Filetypes: when you do something to a file,
Opus 5 can figure out what kind of file it is, and take the appropriate
action for that type of data.

 PREDEFINED FILETYPES

 Opus 5 comes with some fully defined Filetypes. These are in the
Dopus5:FileTypes directory and have both the Filetype structure fully
defined, plus have default commands attached to the various actions
available. The loading of

 PAGE 99

Filetypes is dynamic. Opus 5 will look to see what Filetypes you have
defined in this directory and load them automatically.

 For convenience, we have also provided a set of default Filetypes
definitions in the Dopus5:Storage directory. With these, we have done most
of the hard work, and have set out the details needed by Opus 5 to
recognise the specific Filetype. To use one of these pre-defined
Filetypes, simply drag the required one into the Dopus5:FileTypes drawer
and Opus 5 will recognise and load it automatically. Then, edit the new
Filetype and set out the specific actions you wish to attach to the new
definition. By doing this, you don't have to be an expert or know anything
about the internal structure of the various files. All you need to do is
attach the actions which Opus 5 should take when it recognises a file of
this type.

 FILETYPE MANAGER

 When selected from the menu Settings/Filetypes, the Filetypes requester
displays the list of Filetypes that Directory Opus 5 recognises. These are
found in the Dopus5:Filetypes directory. For starters, we have included
several definitions. These may include AmigaGuide, LHA archive, Workbench
icons, and Script files.

 See Fig 9-1 File Types Requester

 PAGE 100

 The currently defined and available Filetypes are shown in the list in
alphabetical order.

 ADD

 Allows you to create a new Filetype entry based on a predefined File
Class. When you select this button, two requesters appear where you may
define the actions and definitions of the new Filetype.

 DUPLICATE

 Allows you to quickly duplicate a current entry. Highlight the desired
entry, select 'Duplicate' and a new entry will be cloned from the current
one and presented for you for editing.

 EDIT

 Displays the Filetype events and allows you to edit the Filetype
definition and command actions.

 REMOVE

 Removes a Filetype definition from the list and deletes the entry from
the Dopus5:Filetypes drawer.

 PAGE 101

 EDITING FILETYPES

 The Filetype Editor consists of a number of parts, one showing the actual
Filetype definition, one showing the possible Events or user actions, and
one detailing the corresponding commands each action will perform.

 EVENTS

 Double-clicking on a particular Filetype, or selecting the 'Edit' button,
displays the list of events or user actions which can be defined for each
Filetype. Each o£ the actions is associated with either a mouse event or a
limited set of Opus 5 commands, namely User1 - User4.

 See Fig 9-2 JPEG Format Requester

 A tick on the left of an entry indicates that it already has an Event
Command List defined for it. Clicking on an entry in the list displays the
Command Editor , allowing you to edit the commands associated with this
Event. To compare the definitions for multiple events, or edit multiple
definitions

 See Fig 9-3 Command Editor

 PAGE 102

 simultaneously, double-click on multiple events in turn. While each of
these event types can be defined to do something different, usually only a
few are actually defined. It is certainly not necessary to define all
events for a particular Filetype.

 When one of these actions or Events occurs, Opus 5 does the following:

     * It first searches the Filetypes list, starting with the Filetype of
       highest priority, and checks whether it matches the entry's
       Filetype definition.

     * If it matches, it checks if the corresponding Event has been
       defined as a notifiable action. If it is defined, it performs the
       Command List sequence.

     * If there is no match for the Filetype definition, or if there is a
       match but no associated Command List, it continues to search the
       Filetypes list. It is possible for it to match a subsequent entry
       that has a Command List defined.

 MOUSE EVENTS

 Mouse events occur when you either double-click on a file or when you
drag and drop it into a new directory.

     Double-click: This occurs when you double click on a file. A popular
     use of this action is to examine a file and, for example, to show it
     if it is a picture, or play it if it is a sound. The actual double
     click speed is defined by your Amiga OS preferences.

     Drag and drop: This Event occurs when a file is clicked on, dragged
     to another window and released. One popular use of this Event is for
     extracting an archive.

 PAGE 103

 COMMAND EVENTS

 Command Events are called when a file is acted upon by a limited set of
Directory Opus 5 commands. Only the User event commands are available. The
terms User 1, User 2, User 3, and User 4 may seem cryptic, but they are
here to give you flexibility. Each of the normal Opus 5 commands has an
implied usage, but you may have an application which doesn't really mean
any of these. In that case, you can decide that one of these User Events
means "Perform this special operation".

 EDIT DEFINITION

 Underneath the Event list is a button which lets you modify the
definition for this Filetype. (This is discussed further on page 106.)

 SELECT ICON

 The 'Select Icon' button allows you to provide an icon for Opus 5 will
use when displaying this specific Filetype in a Lister in Icon Mode, or on
the Opus 5 Main Window. Either select the icon required through the file
requester, or drag and drop a suitable icon into the display area above
this button.

 PAGE 104

 DEFINITION OF A FILETYPE

 Selecting 'Edit Definition' from the Event requester brings up the
Filetype definition editor. Here, you specify the elements which Opus 5
will look for to recognise a specific Filetype.

 See Fig 9-4 FileType Definition editor

 NAME

 This is for the name of the Filetype.

 ID

 The ID will appear beside the Filetype in the Filetype manager screen. It
is a shorthand way for Opus 5 to display the name for the Filetype
definition.

 PRI

 The priority is used to determine the order of matching different file
types against the file in question. Generally, it should be left at zero,
but at times it can be very useful or even necessary to have different
priorities.

 For example, in the case of having two Filetypes defined, where one is a
subset of the other ( e.g., 24 bit ILBM pictures versus regular IFF ILBM
picture Filetype), you would want the 24 bit IFF ILBM pictures to come
first, because they are a special case of the regular ILBM picture
Filetype. Otherwise, pictures (in

 PAGE 105

this case) will be matched with the regular IFF ILBM picture Filetype and
will never have a chance to match with the subset 24 bit ILBM picture
Filetype. In this case, you would set the Priority of the 24 bit IFF ILBM
Filetype to a higher priority.

 Underneath these fields is the actual script used to perform the Filetype
identification. This is a series of actions that Opus 5 will perform in
order to identify a file of a particular type. The action may be as simple
as matching a filename to a pattern, or as complex as scanning an IFF form
looking for  data in a Specific IFF chunk.

 Below the list is a folder gadget, a read only field and an argument
field. These are used for editing the File identification definition as
discussed below.

     ADD

     Creates a new entry in the file definition script.

     INSERT

     Inserts a new entry in the file definition script above the
     highlighted entry.

     REMOVE

     Removes the highlighted entry.

 EDITING THE FILETYPE DEFINITION

 To edit a line, simply click on it and the read only and argument fields
will be filled in. To change the command in the read only field, click on
the list button and a list of other commands will be displayed. Select the
one you want or press 'Cancel' to abort.

 The structure of the Filetypes definitions script consists of a clause or
a sequence of clauses that describe what should be

 PAGE 106

considered a matching file for a given Filetype. There are only two
directives that delimit clauses: And and Or. These define what to do if a
clause fails or succeeds. When all the clauses are finished and the result
is true then the file is of the right type.

 EDIT COMMANDS

 AND

 If the preceding clause succeeds, then also do the following clause;
otherwise skip to the next clause. If the preceding clause failed, then
execution stops and the file does not match.

 OR

 If the preceding clause fails, then do the following clause; otherwise
skip to the next clause.

 TESTING DIRECTIVES

 MATCH MATCH TEXT OR $HEX

 States that a sequence of bytes starting at the current file offset must
match the given pattern. Match also supports binary matching. To match a
single unknown character when text is given, use the '?' character. To
match a single unknown byte when $hex is given, use two of them (??). You
can also use '000' syntax in text to specify ASCII characters by their
decimal number. A '009' would be a tab character, a '114' would be the

 PAGE 107

lower case 'r'. Use '063' to match a literal question mark.

 Example:

     Match $000003F3 (executables start with these bytes)
     Match FORM????ILBM (the way a IFF ILBM picture starts)
     Match HeyO09Overthere ("Hey" then a tab then "Overthere")

     Match $FFFA(match hex characters)
     Match %10110(match bits)
     Match text 127(match "text<DEL>")

 MATCH (NOCASE)

 Is identical to the Match command but case-insensitive for ASCII matching
(hex, binary and  xxx codes are still case sensitive).

 MATCH BITS Match Bits HSPARWED

 Tests the file's protection bits. To see if a bit is set, put a + before
the character. To see if the bit is unset use a -.

 Example:

     Match Bits +RW (read & write must be on, others don't matter.)
     Match Bits -E (executable must be off.)
     Match Bits +RW -E (read & write must be on with executable off.)

 MATCH COMMENT Match Comment text

 Compare the supplied text string against the comment of the file. Any
valid AmigaDOS wildcard pattern is usable here.

 PAGE 108

 Example:

     Match Comment Silly - Picture (a file with 'silly_picture' as a
     comment)
     Match Comment #?freddy#.? (any file with 'freddy' in its comment
     field)

 MATCH DATE Match Date dates

 Tests the date of the file against a given date. (See the Select command
on page 94 for information about date strings and ranges.)

 Example:

     Match Date 08Sept92
     Match Date < 10Jan92

 MATCH NAME Match Name filename

 Matches the given Name pattern against the filename. Any valid AmigaDOS
wildcard pattern is usable here.

 Example:

     Match Name #?.ilbm
     Match Name *.lzh

 MATCH SIZE Match Size > or < or = integer

 Tests the size of the file against a value.

 Example:

     Match Size > 1000

 MATCH FORM

 Performs a match for an IFF FORM type.

 PAGE 109

 Examples

    Match FORM ILBM(match an IFF ILBM picture)
    Match FORM SMUS(match a SMUS music file)

 MATCH DT GROUP

 Matches a standard datatype group. The Amiga datatypes.library must have
been installed on your system for this to function correctly.

 Examples

 Match DT Group picture (any picture file recognised by datatypes (only
first 4 characters are significant)

 Match DT Group sound (match any sound file)

 For further information, see the Amiga Documentation in
datatypes/datatypes.h for a complete list of current groups.

 MATCH DT ID

 Matches a datatypes ID. The datatypes.library must have been installed on
your Amiga for this to function correctly.

 Example:

 MATCH DT ID jpeg (match a JPEG file)

 This is dependant on what datatypes you have in your system.

 PAGE 110

 MOVEMENT DIRECTIVES

 MOVE TO Move To Byte location

 Moves to a specific byte offset from the beginning of the file. Initially
you are always at the beginning of the file, but you may have been moved
in a previous clause, so you might want to put a MoveTo at the beginning
of a clause in order to know exactly where you are.

 Example:

    Move To 0 (back to beginning of the file)
    Move To 100 (move to the 101st byte of the file)

 MOVE Move Byte offset

 Moves to a byte relative to the current file offset.

 Example:

    Move 16 (move sixteen bytes forward into the file)
    Move 4 (move back four bytes from where we are)

 SEARCH FOR Search For text or $hex

 Searches (starting at the current file offset) for a certain byte pattern
that matches the given pattern. See the Match command for valid options to
use with this directive. If the match occurs, then the current file
position will be the first character matched.

 Example:

    Search For CMAP (look for the 'CMAP', position on the 'C')
    Search For M.K. (search for 'M.K.", position on the 'M')

 PAGE 111

 A failure of any Movement directive means that the clause fails.

 One example of usage is the file class 24bit picture.

 Example:

    Match FORM???. .?ILBM (file must start with these characters)
    And (if the previous cause is true then do the following)
    SearchFor BMHD (then search for the BMHD chunk ID)
    Move 16' (move sixteen bytes into the file)
    Match $18 (this must be 24 (or $18 in hex) to be a 24bit picture.)

 FIND CHUNK

 Searches for an IFF chunk. This command is similar to using Search For
but much faster, since it understands IFF file format and skips non-
matching chunks (instead of searching the whole file). It will also only
match real chunk headers, whereas Search For is always likely to match on
erroneous data in the file when searching for chunk headers.

 Example

    Find Chunk BMHD(finds the next BMHD chunk)

**************************************************************************
 We would suggest that you look at the predefined Filetype definitions to
get an idea of the type of commands to use and what you can do with this
system.
**************************************************************************

 PAGE 112

 EXTRA EXAMPLES

 Some other often used examples are

    a) Match a JPEG picture. (You must have jpeg datatype in your system.)

         Match DT Grouppict
         Match DT IDjpeg

    b) Match a 24 bit ILBM picture

         Match FORMILBM
         Find ChunkBMHD
         Move16
         Match$18

    c) Match a GPFax file in FAXIFF format

         Match FORMFAXX
         Or
         Match FORMFAX3

    d) Match an AmigdGuide file

         Match (NoCase)
 PAGE 113

 This page EMPTY

 PAGE 114

                               CHAPTER TEN

 OPUS 5 UTILITY REQUESTERS

 THE DISKCOPY REQUESTER

 This Function allows you to make an exact copy of one disk on another.
When this Function is called, a requester with several buttons appears.

 See Fig 10-1 DiskCopy Requester

 FROM...

 This list contains the possible disk drives that may be used as the
source. When you click on one, it becomes the selected drive.

 TO...

 This list contains the possible destination drives which are compatible
with the selected source drive. The source disk drive is always available
as a destination to allow you to

 PAGE 115

 make single drive copies. This only makes sense with removable media such
as floppy drives as it would accomplish nothing to copy a hard drive to
itself.

 VERIFY

 This button allows you to turn off the integrity verification when
writing data to the destination drive. Although it is faster, you probably
won't want to do this.

 BUMP NAME

 This button allows you to change the volume name using the same naming
convention as Workbench's DiskCopy. (See AmigaDOS documentation for
details.)


 This function will not copy any protected software, or non- AmigaDOS
format disks.

 Selecting the 'DiskCopy' button will start the copy. The 'Cancel' button
will abort without attempting a DiskCopy.

 PAGE 116

 THE FORMAT REQUESTER

 This allows you to format a new disk. All new disks need to be formatted
before the computer can write to them.

 See Fig 10-2 Format Requester

 When the Format command is called, a requester with several buttons
appears. On the left side is a list containing the devices which can be
formatted using this operation. The selected device is highlighted. Be
sure the device you intend to format is the one that is highlighted!

*************************************************************************
 Warning! This option will destroy existing data on a disk. Be sure you
want to erase the data before you click Format or Quick Format buttons.
*************************************************************************

 NAME

 This field allows you to give a volume name to the drive to be formatted.

 FAST FILE SYSTEM

 This allows you to format a device using the Fast File System option of
AmigaDOS. You should consult AmigaDOS documentation for more detail.

 INTERNATIONAL MODE

 This allows file and directory names to include accented characters.

 PAGE 117

 DIRECTORY CACHING

 This will decrease the capacity of your disk but the directory reading
speed will be much greater.

 PUT TRASHCAN

 This button allows you to put a trashcan in the root directory of the
newly formatted device.

 MAKE BOOTABLE

 If this button is selected, Opus 5 will install a standard AmigaDOS
bootblock on the disk, making it bootable.

 VERIFY

 This button allows you to disable the format verification. As with the
DiskCopy function, the process is faster with Verify turned off, but you
won't be made aware of any errors, so it's better to leave Verify turned
on unless you trust your disks completely (you really shouldn't).

 FORMAT

 This button begins the formatting process. Be very careful that you have
selected the correct device. Once a Format begins, it can be aborted, but
data will be lost!

 QUICK FORMAT

 When this button is selected, the disk will be initialised (wiped). This
provides an extremely fast way to erase an old disk. It will not work on
new disks however, only on disks that have previously been formatted.

 CANCEL

 This button will abort the process without attempting the format.

 PAGE 118

 THE PRINT REQUESTER

 This Requester gives you full print formatting control for text files.

 See Fig 10-3 Print Requester

*************************************************************************
 These configuration options work in accordance with the Amiga Printer
Preferences. The Amiga Preferences may override these preferences or
simply make the output look silly. For example, you may not be able to use
these options to display more lines on a page than is specified in Amiga
Preferences. All printers are not created equal. Some printers will ignore
some of these configuration options.
**************************************************************************

 You may adjust the following configuration items:-

 LEFT MARGIN

 This field contains the number of characters to skip before printing each
line.

 RIGHT MARGIN

 This field contains the number of printed characters allowed on each
line. The Left Margin characters are not included in this value. For
example, a Left Margin of 5 and night Margin of 70 will result in the last
printable character in the column 75.

 PAGE 119

 TAB SIZE

 This field contains the number of spaces to which a tab character is
equivalent. Opus 5 converts tabs to spaces and will insert the appropriate
number of spaces to create columns based on Tab Size. For example, a Tab
Size of 8 specifies Tab positions of 8, 16, 32, 40, 48, 56, and 64.

 QUALITY

 This button cycles between Letter, and Draft. Some printers can be
toggled between Letter and Draft quality printing.

 PITCH

 This button cycles between Pica, Elite, and Fine. These values specify
the size of letters to print. Your printer will determine the exact
dimensions of these values.

 OUTPUT

 By default, the output will be sent to the current Preferences printer.
However, you can redirect the output to a file of your choosing.

     Printer: This option directs output to the printer

     File: When this option is enabled, output is directed to a selected
     disk file or device. When printing starts, a file requester is
     presented. Enter the file path required or enter the device name,
     such as PAR: or SER: etc.

 CONFIGURATION...

 This button cycles between Header and Footer. The Title, Date and Page
no. buttons can be used when creating a Header or Footer line for each
page in the printout. When the configuration button is Header, these
buttons affect the Header line; otherwise, they affect the Footer line. By
default, neither are created.

 PAGE 121

 TITLE

 When checked, a title will be generated. By default, the filename will be
the title. However, you can override this by putting text in the Title
field. You can have different titles in the header and footer lines.

 DATE

 When checked, the current date will be printed. Usually this is enabled
for either the header line or the footer line, but not for both.

 PAGE NO

 When checked, the page number will printed. Usually this is enabled For
either the header line or the Footer line, but not for both.

 STYLE

 This button allows you to modify the appearance of all the printed text
except the headers and footers. (Some printers do not support all of these
styles.) Clicking on the Text Style Cycle button allows you to choose from
the following options: Normal, Bold, Italics, and Unlined (Under Lined).

 PRINT

 When you click this button, Directory Opus 5 will begin printing the
information.

 This function will print all selected files, one at a time.

 If you select only one file to print, the print routine will be started
up as a separate process, allowing you to continue working with Directory
Opus 5. To cancel this type of print, simply select the print function
again. A requester will appear asking if you want to continue with the
print or halt it. This requester will also appear if you attempt to

 PAGE 121

quit Directory Opus 5 while a print operation is in place, as you cannot
quit until the print has finished.

 Even if you abort a print, the printer may not actually stop for some
time. This is because most printers have buffers, some quite large ones,
which store data for printing and will need to empty themselves before the
printout will stop.

 CANCEL

 This button will abort without attempting to print.

 PAGE 122

 THE OPUS 5 VIEWER

 When required, Directory Opus 5 uses its own in-built program to display
selected files in either ASCII, ANSI, or HEXadecimal Formats.

 The viewer opens as a separate window either on the Opus 5 screen or on
its own screen. The viewer's display is fully buffered so you may scroll
backwards and forwards in the file as required, using the scroll bars or
the keys. You may re-size the window to the required size using the size
gadgets on the bottom right of the window.

 The name of the current file is displayed in the window title bar, along
with various details about the creation date and size of the file being
displayed.

 See Fig 10-4 Opus Viewer

 ACTION KEYS

 up/down arrows Move up and down a line at a time

 U Moves up a page at a time

 D Moves down a page at a time

 T Moves to the top of the file

 B Moves to the bottom of the file

 Cursor keys Move up and down

 Cursor key + Shift Moves one page at a time

 Cursor key + Ctrl Moves to the top or bottom

 Keypad arrow keys and PgUp, PgDn are also available.

 Esc Leaves the viewer.

 PAGE 123

 The Viewer Menus

 The File Menu

     Next: If you have selected more than one file, the next one will be
     read when you exit. To exit without reading the next file, press the
     'Quit' button.

     Search: Searches for a string. Limited pattern matching is provided
     by using the '?' character.

     Repeat Search: Continue the search from the current position using
     the same search pattern.

     Print: Prints the current displayed file.

     Quit: Quits the viewer.

 THE SETTINGS MENU

     Tab Size: Allows you to specify how many spaces to be used in place
     of any TAB ($09) characters found.

     Mode: Choose to display the file in either normal, ANSI, or
     Hexadecimal mode.

       ANSI mode

       Some text files may contain imbedded ANSI sequences to provide
       extended formatting of the text using Bold, Italics and other
       sequences. When set in

 PAGE 124

       this ANSI mode From the menu, the Viewer is capable of displaying
       most of the standard ANSI sequences.

       Hex mode

       The viewer can display files in hexadecimal format. This allows you
       to view binary files and other files containing non-textual
       characters. The file is displayed in the following manner:

 See Fig 10-6 Hex Viewer

 At the top of the Function Editor display is the Function List which
contains the commands associated with this function.

 Beneath this list is a cycle button so you can select the function type
and below this are buttons to allow you to modify the order and
effectiveness of these commands.


     Add: Adds a new Command to the end list.
     Insert: Inserts a new Command at the highlight.
     Delete: Deletes the highlighted line from the list.

 To edit a line in the function list, simply click on it. The Command
string will be copied to the field below the list for you to edit it.

 EDIT FIELDS

 Below the Command list is a group of editing tools. These tools allow you
to edit active Function entries. When you click on an entry in the Command
list it becomes active, or an empty one is created when you select Add or
Insert.

 COMMAND TYPE

 The cycle button immediately beneath the function list allows you to
specify which kind of Function is to be used. When you click on this
button, it will cycle through the following types:

 PAGE 128

  Command    AmigaDOS    Workbench

  Script     ARexx

 Each of these Function types is described below.
 When you click on the small folder button just to the right of the
Command Type button, a requester appears allowing you to pick an
appropriate entry for the selected function type. Each of the following
descriptions indicates the kind of requester which will appear.

     Command: These are internal commands, built into Directory Opus. Many
     of these Commands can take parameters from buttons and menus as well
     as from ARexx. Internal Commands are documented in the Commands
     Chapter. The folder button brings up a list of internal commands.

     AmigaDOS: represents normal AmigaDos programs. Such executables are
     launched as if you were running them manually from the CLI. Thus,
     with an output window enabled, they can receive keyboard input from
     the user and display output on the screen. The folder button brings
     up a file requester for you to select the full command path to the
     application program.

     Workbench: Workbench programs are also executable programs. However,
     they are launched as if you were double-clicking on their icons from
     Workbench. This can be an advantage, as many programs do not take
     arguments, or do not work at all if run from the CLI.

     If the selected Workbench program is a tool (i.e., an executable
     program), Opus will look for its icon file to determine the
     necessary stack size to give to the program. If the icon cannot be
     located, Opus 5 will use a default stack size.

     If the selected Workbench program is a project (a non- executable
     file created by another program), Opus will

 PAGE 129

     look for its icon file to find its Default Tool, the actual program
     needed to load the file. If the icon cannot be found, or a Default
     Tool can not be loaded successfully, Directory Opus will not launch
     the file. The project's icon is also used to determine stack size.

     Workbench programs can also take arguments from Opus using the {f}
     and similar sequences. This can be very useful. DeluxePaint, for
     instance, does not accept arguments if run from the CLI; therefore
     you would be unable to select a picture file for DeluxePaint to load
     from Opus if you were running it as an Executable.


     If, however, you have the command defined as:

          DPaint {f}

     and have the Command type set to Workbench, DeluxePaint will be run
     as a Workbench program. From the Workbench, Paint will accept
     arguments, so the first file you selected would be loaded into DPaint
     automatically. The folder button brings up a file requester.

     Script: Script files, also called Batch files, are files that you
     might run with the Run command, or with the DOS Execute command from
     the CLI. Selecting a Function type as Script will cause the file to
     be executed as a script file. The folder button brings up a file
     requester. This file requester is initially set to S: because this is
     where scripts files usually reside by default.

     ARexx: This type indicates that the Function is an Arexx script. The
     script will only be launched if Arexx is active in the system.

*************************************************************************
 The address of the ARexx port is NOT set automatically. Scripts should
use the ARexx ADDRESS instruction to address the Command Correctly to
Directory Opus.
*************************************************************************

 PAGE 130

     The folder button brings up a file requester. This file requester is
initially set to Rexx: because this is the place ARexx files come from by
default.

 {}

 This button is located next to the Function Edit Field and brings up a
list of the argument functions. The definition of each of these argument
commands is shown briefly on the right of each argument in the displayed
requester.

 Function strings can contain many different command sequences to do
different things with files and directories.


 FLAGS

 Below the Command list is the Flags list. This is a list of all the flags
available for custom Commands. These flags apply to all Commands in the
Command list.

 The flags are:-

     CD source: If this is turned on, the current directory of the custom
     Command will be sent to the current source directory.

     CD destination: This has a similar effect to CD source, except that
     the current directory of the custom Function will be set to the
     current destination directory.

     Do all files: This Causes the Function to act on each selected entry
     in turn, instead of just the first entry. This is used for commands
     that do not support multiple filenames on the command line, where {F}
     to send all selected entries, would not work.

     No file quote: This option enables Directory Opus to operate
     correctly with some older or poorly written software. Normally,
     whenever Opus sends a filename

 PAGE 131

     to a custom Command with the flags such as {f}, {o}, etc., the
     filename is enclosed in quotation marks. This allows you to use
     filenames containing space with external programs. However, some
     software does not interpret the quotation marks correctly. If you
     find this is the case with any program, simply select the No file
     quote flag.

     Output to window: Opens a window for output from these Function
     commands. The window will open on the Opus screen, unless the Run
     asynchronously option is enabled, In this case, it will open on the
     Workbench screen, and the Workbench screen will be brought to the
     front automatically. This window is opened using the handle specified
     in the System/AmigaDOS section of the configuration.

     Output to reader: Redirects all output from the Commands to a
     temporary file in T:directory, which is then read via the Opus text
     reader. This allows you to read the output of a program thoroughly,
     and even to print it. Note that if you are sending output to a file,
     the Function cannot receive input from the keyboard.

     Recursive dirs: Allows the Function access to files within
     subdirectories. Normally used whenever a {f} or {F} or similar
     sequence would result in the name of a directory being included in
     the same way as a file. In other words, the Function would not act
     recursively on all files within the directory.

     If this option is enabled, the names of all files within that
     directory, and within subdirectories within the directory, and so on,
     are included in the program's parameters. This allows the Command to
     act on all files in the directory and not just on the directory
     itself.

     Reload each file: Causes Opus to rescan a file after it has been
     acted upon by a Function, and updates the size, datestamp, comment
     and protection bits of the file.

 PAGE 132

     You can therefore reflect changes in size, for instance, made by a
     text editor to a file.

     Rescan dest: This flag makes Opus reload the destination directory
     when the Function terminates. This, and the above option, allows Opus
     to display correctly any changes made to either directory window by
     external programs, such as archivers.

     Rescan source: Makes Opus reload the source directory when the
     Function terminates.

     Run asynchronously: Indicates that the Functions are to be launched
     as a new process, and Directory Opus is not to wait for it to return.
     If this is the case, and an output window is specified, the output
     window opens on the Workbench screen.

     Window on Workbench: Tells Opus to open any output window (if any) on
     the Workbench Screen instead of on the Opus screen.

     Window close button: Tells Opus to wait until you click on the output
     window close button before closing any outputwindow.


 KEY

 Allows you to set a shortcut or hot key sequence to activate this
function. The standard Amiga sequences are available. You may use any
combination of SHIFT, ALT, CTRL, AMIGA plus a key.

 Pressing the shortcut key will act exactly as if you selected this
function from a button, menu or with other action.

 PAGE 133

 THE TOOLBAR EDITOR

 As you have seen, the Directory Opus 5 Listers may have an optional
Toolbar showing a series of small icons. Each of these icon images is
actually a standard Opus 5 action button for which you may define separate
actions for left, middle and right mouse clicks.

 Because an Opus Lister is transient, you may only have one global Toolbar
for the system. You cannot have individual Toolbars for different Lister
displays.

 The Directory Opus 5 installation comes with a few sample Toolbars for
you to choose from, but you can readily edit both the images and the
actions as you desire. By default, Opus 5 will load the file
Buttons/Toolbar. But, you may also define your own Toolbar if you desire.

 Sample Toolbars

 See Fig 11-2 Sample Toolbar

 The sample Toolbar which is supplied with Opus 5 is shown above with the
associated functions attached to left and right mouse click respectively.
You may easily edit these to your own requirements.

 PAGE 134

 EDITING THE TOOLBAR

 To edit the Toolbar, select Lister/Edit Lister Toolbar from the global
menu or hold down the ALT key and click on a specific icon in the Toolbar.
The latter action will allow you to edit a specific button immediately.

 See Fig 11-3 Lister Toolbar

 The Toolbar editor displays the first eleven buttons with the button to
be edited highlighted by a surrounding rectangle. Use the scroll bar or
the arrow buttons to move the highlight to the button of interest. If you
have more than eleven buttons, the display will be scrolled automatically
to show the extra buttons as you move the scroll bar.

 You may move immediately to edit the highlighted button by double-
clicking on it, or you may use the buttons beneath the scroll bar to
perform other functions. These are

     Add: Adds a new (blank) button at the END of the list.

     Ins: Inserts a new blank) button in place of the currently
     highlighted button and moves all remaining buttons to the right.

     Del: Deletes the highlighted button.

     <-: Swaps the highlighted button with the one on its immediate left.

     ->: Swaps the highlighted button with the button on its immediate
     right.

 PAGE 135

     Edit: Displays the Button Editor so you can change the image,
     colours, or function attached to the highlighted button.

     Save: Saves the currently displayed set of Toolbar buttons to disk
     and updates the Toolbar used by all Listers. Note that this saves the
     Toolbar using the 'current' filename, i.e. the name you used when you
     loaded the Toolbar. Any previous file of this name will be
     overwritten.

     Use: Updates the Toolbar used by all Listers but does not save it to
     disk.

     Cancel: Cancels all changes you have made to the current Toolbar.

 The Toolbar editor also has the following menus:-


 THE PROJECT MENU

     New: Creates a new blank Toolbar.

     Open: Displays a file requester allowing you to select and load a
     different Toolbar configuration.

     When first run, Opus uses a default file name for the Lister Toolbar.
     However, if you load a Toolbar under a different name, this new name
     will be kept and used internally as the reference to the current #
     Toolbar. If you subsequently save the Toolbar, it will be saved under
     this name unless you use the SaveAS option to change it. If you save
     the Environment, this 'new' filename will be stored and used next
     time you load Directory Opus.

     Save: Saves the current Toolbar to disk using the current filename.

     SaveAs: Saves the current Toolbar but allows you to select a new
     filename.

 PAGE 136

     Quit: Same as Cancel above.

 THE EDIT MENU

     Reset to Default

     Attempts to reset the Toolbar to the default settings as defined when
     you installed Directory Opus 5. Because there are many settings,
     these defaults are not actually built-in to Opus 5. Instead Opus will
     look for, and load, a file called Buttons/Toolbar_Default. It will
     also reload the image files defined therein. For correct operation of
     Opus, you should never save over this default file. Otherwise you
     will have to reinstall Opus to recover the default settings.


 LAST SAVED

     Reloads the last saved set of Toolbar buttons and resets the display.

 RESTORE

     Restores the buttons to the state when you first opened the Lister
     Toolbar Editor.

 PAGE 138

 THE BUTTON EDITOR

 The button editor is displayed whenever you wish to edit a Custom or
Toolbar button. From either the Lister Toolbar editor or the Button Bank
editor, highlight the desired button and select 'Edit' to display the
Button Editor.

 See Fig 11-4 Button Editor


 See Fig 11-5 Button Editor

 The Button Editor allows you to change the following features of a button

     Function: The cycle gadget gives you the choice of setting a function
     to be activated by the Left, Right or Middle mouse buttons. Select
     the desired mouse button then select the other attributes.

     Name: When editing a custom button, enter the name you wish to appear
     for the button. The name you choose for the Left Mouse button will be
     the initially displayed name on the button, but you may also set
     different names for each mouse action.

 PAGE 138

     Image: When editing a graphical button bank or the Lister Toolbar,
     you select the IFF file which contains the image for the button.
     Clicking on the folder button, immediately to the right of the word
     Image, will display a file requester. Select either the name of an
     IFF brush file or an icon file (.info file) and Opus 5 will load the
     image and Use it for the selected button. For sanity, the size of any
     button image is limited to 64 x 64 pixels. Images larger than this
     will be cropped

*************************************************************************
 Hint: YOU should attempt to keep the images used for each button or
Toolbar image at approximately the same size. Opus will calculate the size
of each button from the largest image if less than the maximum 64 x 64
pixels.
**************************************************************************

     Select Colours: Displays a colour requester where you can set the
     foreground and background colours for your buttons. The number of
     colours displayed in the colour requester will be determined by the
     depth of the screen you have chosen for Opus 5 and the number of User
     colours you have defined in the Environment.

     For text buttons, you may select a different foreground colour (the
     one used for - the text) and background colour (the base colour of
     the button) for each mouse button type.

     For image buttons, the background colour is fixed. The foreground
     colours come from the image and can only be changed by editing the
     image itself.

     Edit Function: Selecting this button will display the Function Editor
     so you may add, change or delete the command function associated with
     this button. See the Function Editor for more details.

     Use: Accepts any changes made to this button.

     Cancel: Cancels any changes made to this button.

 PAGE 139

 THE MENU EDITOR

 The Menu Editor is invoked when you wish to edit the Lister Toolbar menus
or the global User menus.

 See Fig 11-6 Menu Editor

 The items in the menu list are shown in order in the
 scrolling list on the right, while the row of buttons on the
 left allows you to change the entries as you wish.

     Add: Adds a blank menu item at the end of the list.

     Insert: Inserts a new blank menu item at the
     highlighted position and moves all other items down.

     Duplicate: Creates a new entry identical to the
     highlighted item and adds it to the end of the list.

     Delete: Removes the highlighted item from the list and
     moves the remaining items up one place.

     Move Up: Moves the highlighted item up.

     Move Down: Moves the highlighted item down.

     Edit: Displays the Function Editor so you can edit the command
     functions attached to this menu item.

 To edit any entry quickly, just double-click ON it.

 PAGE 140

 ADDING MENU SEPARATORS

 When creating menus, it is often a good idea to visually separate the
menus into groups of related items. This makes reading a menu list much
easier. Traditionally in the Amiga, we use a special flag called an
NM_BARLABEL to tell the Amiga OS to put in a special separator bar. If you
wish to add these separators to your custom menus, simply put in a row of
minus signs, minimum of three as '---', and Directory Opus will interpret
this as an instruction to place a separator at this position in the menu
list.


 THE MENU EDITOR MENUS

 Just as with the other editors in Opus 5, there are extra options
provided by menus. These are

 THE PROJECT MENU

     New: Creates a new blank menu list.

     Open: Displays a file requester allowing you to select and load a new
     set of menus.

     When first run, Opus uses a default file name for both the Lister
     Toolbar menus and the User menus. Once you load a new set of menus
     using a different name, this new name will be kept and used
     internally as the reference to that set of menus. If you subsequently
     save the particular set of menus, it will be saved under this name
     unless you use the SaveAS option. If you save the Environment, this
     'new' filename will be stored.

     Save: Saves the displayed set of menus to disk under the current
     name.

     SaveAs: Saves the current Toolbar but allows you to select a new
     filename.

     Quit: Same as Cancel above.

 PAGE 141

 THE EDIT MENU

     Reset to Default: Attempts to reset the particular set of menus to
     the default set as defined when you installed Directory Opus 5.
     Because there are many settings, these defaults are not actually
     built in to Opus 5. Instead Op us will look for, and load, special
     default files. For correct operation of Opus, you should never
     overwrite any files in the Buttons drawer with a name ending in
     '_Default' , otherwise you will have to reinstall Opus to recover the
     default settings.

     Last Saved: Reloads the last saved set of menus and resets the
     display.

     Restore: Restores the displayed menus to the state when you first
     opened the Menu Editor.

 PAGE 142

 THE BUTTON BANK EDITOR

 Directory Opus 5 allows you to create any number of custom button banks
containing your favourite commands. You create and edit Custom buttons
from the Button Bank Editor. This is accessed from the global menu
Buttons/Edit, or, by holding down the ALT key and clicking on a button.
From this editor you can edit any button in any button bank on the screen.
Although it is not generally a good idea, you can even edit multiple
buttons at once. This can be useful when you wish to compare the function
commands you have assigned to different buttons.

 A button bank is defined as either text or graphical buttons arranged in
a series of rows or columns. Once you have created a bank, you may resize
the window to display as many of the buttons as you wish. For text
buttons, the button bank window can be resized to any horizontal width and
Opus will stretch the button width to fit the available columns. The
vertical size is restricted to the number of rows and the height of the
chosen font.

 When using image buttons, the horizontal and vertical size of the bank is
limited by the sizes of the button images themselves. The vertical size is
limited by the button height.

 See Fig 11-7 Button Bank Editor

 When the Button Bank is displayed, select the button bank you wish to
edit and the editor will display the details of this bank. Selecting a
specific button will cause this button to flash to indicate the row,
column and button being edited.

 PAGE 143

 The options presented in the Button Bank Editor allow you control the
shape of the button bank as follows

     Add: Adds another blank row or column to the selected button bank.
     New columns are added to the right-hand side of the current bank,
     while new rows are added the bottom. When you add rows or columns,
     you may need to resize the window to reveal them.

     Insert: Inserts a new blank row or column at the highlighted
     position.

     Delete: Deletes the row or column underneath the highlighted button.
     Care! This will delete the complete row or column and all the details
     attached to the buttons therein.

     Xform: A very special button! This function allows you to convert
     rows into columns and vice versa, while attempting to preserve the
     total number of buttons in the bank. It uses a simple integer method
     to swap buttons between rows and columns.

     Font: Select the font and size to be used for the text in all buttons
     in the selected bank.

     The Button Clipboard: On the right of the window is a scrolling
     button clipboard area. This is a temporary scratch pad for use while
     editing buttons. You may copy (or drag and drop) buttons to and from
     this temporary area

     Clear: Applies only to the Clipboard area and clears the clipboard of
     all temporary button definitions.

 BUTTON CONTROLS

     Edit: Displays the Button Editor where you may set the command
     functions, colours and other parameters for the selected button.

 PAGE 144

     Copy: Copies the highlighted button to the Button Clipboard.

     Cut: Deletes the highlighted button from the bank and places it in
     the Button Clipboard for later reference.

     Erase: Deletes the highlighted button from the button bank. The
     button is discarded and not stored in the clipboard as with the Cut
     action.

     Paint Mode: A toggle switch which provides a quick method of setting
     the foreground (text buttons only) and background colours of buttons
     directly, rather than individually through the button editor itself.
     When activated, a palette selector is displayed. Select the desired
     foreground or background colours and then click on a given button to
     change the colour directly.


 MOVING A BUTTON BANK

 Normally, to move a button bank to a new position on the screen, you
would simply use the window drag bar gadget in the window title area.
However, this area also contains the close window, zoom and window depth
gadgets. It is possible to create a bank of buttons where the size of the
graphic imagery used in the buttons is too narrow to permit access to all
the title bar gadgets, especially the drag bar. For such cases, we have
also added a special window drag gadget on the very left-hand edge of each
button bank. If you click and hold the left border, you will be able to
drag the bank to the new position.

 PAGE 145

 This page EMPTY

 PAGE 146

                                 APPENDIX

 ARexx

 The ARexx port name and PubScreen name is DOPUS.x where x is the
invocation count of the program.

 If a command returns a value or information, the data will generally be
returned in the RESULT variable. The only exception to this is the dopus
request command (see below). Error codes are returned in the RC variable.


 COMMANDS

 For simplicity, the Directory Opus 5 command set is arranged in a
hierarchical structure, with only three main (or base) commands:- Dopus,
Lister and Command.

 DOPUS


 The first base command is dopus. This is a general purpose command, and
allows you to perform factions not falling into the other categories.

     * Dopus front

       This command moves the Directory Opus 5 window
       (and screen) to the front of the display.

 PAGE 147

     * Dopus back

       This command moves the Directory Opus 5 window
       (and screen) to the rear of the display.

     * dopus getstring <text> <length> <default> <buttons>

       This command allows you to prompt the user to input a
       text string. <text> is a string of text to be displayed in
       the requester, and should be surrounded by quotes if it
       contains spaces, <length> is the maximum length of the
       string to accept. <default> is the default value of the
       string; that is, the text you wish to initially appear in the
       field. <buttons> are the buttons you wish the requester
       to have; each button should be separated by a vertical
       bar character. For example,

       > dopus getstring '"Please enter some text" 40
       ""Okay|Cancel'


       This would display a requester with the string "Please
       enter some text", a maximum input length of 40
       characters, no default text, and buttons labelled Okay
       and Cancel.

       The string (if any) is returned in RESULT.

     * dopus request <text> <buttons>
       This command allows you to request a choice from the
       user. <text> is a string of text to be displayed in the
       requester. <buttons> are the buttons you wish the
       requester to have; each button should be separated by a
       vertical bar character. For example,

       > dopus request "'Please choose an option"
       Option 1|Option 2|Option 3'

 PAGE 148

       This would display a requester with the string "Please
       choose an option", and three buttons labelled Option 1,
       Option 2 and Option 3.

       The ordinal number of the selected button is returned in
       RC. The last button supplied (Option 3 in this case) is
       designated a Cancel button, and so returns the value 0.
       Therefore, the values returned by this example are 1, 2
       and 0 respectively.

     * dopus getfiletype <filename> [id]

       This command allows you to query a file to see if it is
       recognised by Directory Opus 5. <Filename> is the name
       of the File, including the full path. By default, if the file
       is recognised the filetype description string will be
       returned in RESULT. If you specify the id keyword, the
       filetype ID will be returned instead. For example,

       > dopus getfiletype ram:testfile.lha
       --> LHA Archive
       > dopus getfiletype ram:picture.jpg id
       --> JPEG


 LISTER

     The next base command, lister, allows you to control listers and
entries within listers.

     * lister new [<x/y/w/h>] [<path>]

     This command creates a new lister. You may optionally
     specify the position and size of the new lister; the
     default is to open under the mouse pointer. You may
     also specify a path to read when the lister opens.

 PAGE 149

     For example,

           --> lister new
           --> lister new 100/50/400/300
           --> lister new ram:
           --> lister new 80/30/200/200 dh0:work
           --> 121132636

       If the lister opens successfully, its HANDLE is returned
       in the RESULT variable. You must save the value of
       this handle if you wish to do anything further with this
       lister. In the above example, a handle of 121132636 was
       returned. This will be used for further examples below.


     * lister close <handle>

       This command closes the specified lister, Any function
       that is currently taking place will be aborted. <handle>
       is the lister handle that was returned when you created
       this lister with the lister new command.

       For example,

           > lister close 121132636


     * lister query <handle> <item>

       This command returns a particular item of information
       from the specified lister. <handle> is the handle of the
       lister in question. All information is returned in the
       RESULT variable, unless an error occurs. <item> can be
       one of the following keywords:

          path

          Returns a string indicating the current path
          visible in the lister. For example,

               > lister query 121132636 path
               --> ram:

 PAGE 150

          position

          Returns the current position and size of the lister .
          For example,

               > lister query 121132636 position
               --> 80 /30 /200 /200

          busy

          Returns a boolean value (0 or 1) indicating the
          lister busy status. That is, if the lister is currently
          busy, it will return 1, otherwise it will return 0.
          For example,

               > lister query 121132636 busy
               --> 1


          handler

          Returns the name of the current custom handler
          port (see below). For example,

               > lister query 121132636 handler
               --> lhadir_handler

          visible

          Returns a boolean value indicating if the lister is
          currently visible. For example,

               > lister query 121132636 visible
               --> 1

          files <separator>

          Returns the names of all files in the lister. The
          names are returned s one long string, separated
          by spaces. You may change the separation
          character by specifying it after the files keyword.

 PAGE 151

          For example,

               > lister query 121132636 Files
               --> "abc" "Disk.info" "readme" "zzz.zzz"

          dirs <separator>

          Returns the names of all directories in the lister.
          For example,

               > lister query 121132636 dirs,
               --> "Clipboards", "ENV", "T"

          entries <separator>

          Returns the names of all entries (that is, both Files
          and directories) in the lister. For example,

               > lister query 121132636 entries
               --> "Clipboards" "ENV" "T" "abc"
               "Disk.info" "readme" "zzz.zzz"

          firstsel

          Returns the name of the first selected entry in the
          lister. The entry is not deselected, so if you don't
          deselect it yourself this command will only ever
          return the one name. For example,

               > lister query 121132636 firstsel
               --> "ENV"

          selfiles <separator>

          Returns the names of all selected files in the lister .

          seldirs <separator>

          Returns the names of all selected directories in
          the lister.

 PAGE 152

          selentries <separator>

          Returns the names of all selected entries (ie both
          files and directories) in the lister.

          numfiles

          Returns the number of files in the lister. For
          example,

               > lister query 121132636 numfiles
               --> 4

          numdirs

          Returns the number of directories in the lister .
          For example,

               > lister query 121132636 numdirs
               --> 3

          numentries

          Returns the total number of entries in the lister
          (files + dirs). For example,

               > lister query 121132636 numentries
               --> 7

          numseifiles

          Returns the number of selected files in the lister.

          numseidirs

          Returns the number of selected directories in the lister.

 PAGE 153

          numseientries

          Returns the total number of selected entries in the lister.

          entry <name>

          Returns information about the specified entry.
          <name> is the actual name of the entry to return
          information about. You can supply #xxx for the
          name (where xxx is a number), to specify the
          ordinal number of the desired entry.

          The information returned is:

          <name> <Size> <type> <selection> <Seconds>
          <protect> <comment>


          where <name> is the Gull name of the entry; <size>
          is the size of the entry; <type> is the type of the
          entry (<0 means a file, >0 means a directory);
          <Selection> indicates the selection status of the
          entry (1 if the entry is selected, 0 if it is not
          selected); <seconds> is the datestamp of the entry
          in seconds from 1/1/78; <protect> is the
          protection bits of the File (in ASCII format);
          <comment> is the comment of the entry (if any)

          For example,

               > lister query 121132636 entry ENV
               --> ENV -1 2 0 543401724 ----rwed

 PAGE 154

          sort

          This returns a keyword indicating the current sort
          method in this lister. Valid sort methods are:

               name     - file name
               size     - file size
               protect  - protection bits
               date     - datestamp
               comment  - comment
               filetype - file type
               owner    - owner
               group    - group
               netprot  - network access bits

          For example,

               > lister query 121132636 sort
               --> name

          separate

          This returns a keyword indicating the current File
          separation method in this lister. Valid separation
          methods are:

               mix        - mix files and directories
               dirsfirst  - directories first
               filesfirst - files first

          For example,

          > lister query 121132636 separate
          --> dirsfirst

 PAGE 155

          display

          This returns a string indicating the current
          display items. The string will consist of the same
          keywords as for sort, in the order that they
          appear in the lister (if they appear at all).

          For example,

               > lister query 121132636 display
               --> name size date protect comment

          flags

          This returns a string indicating any sort or
          display flags that are active for the lister. These
          flags are:

               reverse - sort in reverse order
               noicons - filter icons
               hidden  - filter hidden bit

          For example,

               > lister query 121132636 flags
               --> noicons

          hide

          This returns the current hide filter for this lister .
          For example,

               > lister query 121132636 hide
               -->#?.o

          show

          This returns the current show filter for this lister.

 PAGE 156

          abort

          This returns a boolean value indicating the status
          of the lister's abort flag. This query command is
          only valid if the lister has a progress indicator
          open (as this is the only way the user can abort a
          function anyway). This will return 1 if the user
          has clicked the abort gadget, 0 if she has not.

**************************************************************************
 Note that in Opus 4, querying the abort flag would also reset it. This is
not the case in Opus 5; if you wish to reset the state of the abort flag
you must use the "lister clear" command.
**************************************************************************

          For example,

               > lister query 121132636 abort
               --> 0

          source

          This command returns the handles of all source
          listers currently open. Note that this does not
          require a lister handle to operate.

          For example,

               > lister query source
               --> 121132636

          dest

          This command returns the handles of all
          destination listers currently open. Note that this
          does not require a lister handle to operate.

          For example,

          > lister query dest
          --> 121963868

 PAGE 157

          all

          This command returns the handles of all non-
          busy listers (that is, any Listers that are not
          performing a function at the time). Note that this
          does not require a lister handle to operate,

         For example,

         > lister query all
         --> 121132636 121963868


     * lister set <handle> <item> <value>

       This command sets a particular item of information in
       the specified lister. <handle> is the handle of the lister in
       question. <item> can be one of the following keywords:

          path <path string>

          Sets the current path string in the lister. Note that
          this does NOT cause the directory to be read, it
          merely changes the displayed string. To read a
          new directory, use the lister read command.

          For example,

               > lister set 12l 132636 path 'dh0:work'

          position <x/y/w/h>

          This sets the current position and size of the lister.
          If the lister is visible the window will be moved
          immediately. For example,

               > lister set 121132636 position
               20/20/400/300

 PAGE 158

          handler <port name>

          Sets the custom handler port name for this lister
          (see below for more information on this). For
          example,

               > lister set 121132636 handler
               'lhadir_ handler'

          busy <state>

          Sets the busy status for this lister. You can
          specify 0 or, off' to turn the busy pointer off, or 1
          or 'on' to turn it on. For example,

               > lister set 121132636 busy on
               > lister set 121132636 busy 0

          visible <state>

          Sets the visible status for this lister. By default,
          listers are visible when they are created. If you
          set this state to 0 or off, the lister will disappear
          from the display, until you make it visible again,
          For example,

               > lister set 121132636 visible off
               > lister set 121132636 visible 1

          sort <method>

          Sets the sort method for this lister. The list is
          resorted immediately, but the display will not be
          updated until you execute a lister refresh
          command. See the lister query section for the
          sort method keywords available. For example,

               > lister set 121132636 sort date
               > lister set 121132636 sort filetype

 PAGE 159

          separate <method>

          Sets the separation method for this lister. The list
          is rearranged immediately, but the display will
          not be updated until you execute a lister refresh
          command. See the lister query section for the
          separation keywords recognised. For example,

               > lister set 121132636 separate mix

          display <items>

          Sets the display items for this lister. The display
          will not be updated until you execute a lister
          refresh command. See the lister query section
          for the item keywords to use. For example,

               > lister set 121132636 display name date
               size protect

          flags <flags>

          Sets sort / display flags for this lister. The display
          is not updated unless you execute a lister refresh
          command. See the lister query section for the
          keywords to use. For example,

               > lister set 121 132636 flags reverse
               noicons

          hide <pattern>

          Sets the hide pattern for this lister. The pattern is
          applied immediately but the display is not
          updated until you execute a lister refresh
          command. For example,

          > lister set 121132636 hide '#?.info'

 PAGE 160

          show <pattern>

          Sets the show pattern for this lister. The pattern
          is applied immediately but the display is not
          updated until you execute a lister refresh
          command. For example,

               > lister set 121132636 show '#?.c'

          title <string>

          Sets the title for this lister (the title displayed in
          the lister title bar). The title bar display will not
          be updated until you execute a lister refresh full
          command (see below). The old title is returned in
          RESULT: For example,

               > lister set 121 132636 title 'hello'
               --> RESULT
               > lister set 121132636 title
               --> hello

          source [lock]

          Makes this lister the source, If you specify the
         lock keyword; it will be locked as a source. For
         example,

               > lister set l21132636 source lock

          dest [lock]

          Makes this lister the destination. If you specify
          the lock keyword, it will be locked as a
          destination. For example,

               > lister set 121132636 dest

 PAGE 161

          off

          Turns this lister off (ie neither source nor
          destination). For example,

               > lister set 121132636 off

          progress <total> <text>

          This turns the progress indicator on in the
          specified lister.

          <total> specifies the total amount to be processed,
          and controls the bar graph display. Specify a
          total of -1 to have no bar graph. <text> is a text
          string to be displayed at the top of the progress
          indicator. For example,

               > lister set 121132636 progress 38
               'Archiving files..,'

          progress count <count>

          This updates the bar graph display in the
          progress indicator (which must have already
          been turned on). <count> is the current progress
          count to be indicated by the bar graph. This must
          be greater than the previous count. For example,

               > lister set 121132636 progress count 4

          progress name <name>

          This updates the filename display in the progress
          indicator. The filename is displayed below the
          bargraph. For example,

               > lister set 121 132636 progress name
               'myfile.txt'

 PAGE 162

     * lister clear <handle> <item> <value>

       This command clear a particular item of information in
       the specified lister, <handle> is the handle of the lister in
       question. <item> can be one of the following keywords:

          flags <flags>

          Clears sort / display flags for this lister. The
          display is not updated unless you execute a lister
          refresh command. See the lister query section
          for the keywords to use. For example,

               > lister clear 121132636 flags reverse

          progress

          This turns the progress indicator off in the
          specified lister.

          abort

          This clears the abort flag in the specified lister .


     * lister add <handle> <name> <size> <type> <seconds>
       <protect> <comment>

       This command adds an entry to the specified lister.
       <name> is the full name of the entry. , <size> is the size of
       the, entry. <type> is the type of the entry (-1 for a file, 1
       for a directory); <seconds> is the datestamp of the entry
       in seconds from 1/1/78; <protect> is the protection bits
       of the file (in ASCII format); <comment> is the comment of
       the entry (if any).

**************************************************************************
 Note that the display is Not updated until you execute a lister refresh
command.
**************************************************************************

 PAGE 163

       For example,

          > lister add 121 132636 "'My file!"' 12839 -1
          540093905 prwed my comment


     * lister remove <handle> <name>

       This command removes an entry from the specified
       lister. <name>  is either the name of the entry, or #xxx
       (where xxx is a number) to specify the ordinal number
       of the entry. The display is not updated until you
       execute a lister refresh command. For example,

          > lister remove 121132636 #5


     * lister select <handle> <name> <state>

       This command changes the election status of an entry
       in the specified lister. <name> is either the name of the
       entry, or #xxx (where xxx is a number) to specify the
       ordinal number of the entry. <state> is the desired
       selection status (0 or 'off' for off, 1 or 'on' for on). If
       <state> is not given then the state of the entry is toggled.
       The display is not refreshed until you execute a lister
       refresh command. The previous selection state of the
       entry is returned in RESULT. For example,

          > lister select 121132636 ENV on
          --> off


     * lister refresh <handle> [full]

       This command refreshes the display of the specified
       lister. Unlike Opus 4, none of the lister modifying
       commands above will actually refresh or update the
       lister display; hence, you must use this command after

 PAGE 164

       making any changes (changing sort method, adding
       files, etc) to have the changes display. The optional full
       keyword causes the lister title and status display to be
       refreshed as well. For example,

          > lister refresh 121 132636 full


     * lister clear <handle>

       This command clears the contents of the specified lister .
       The display will not be updated until you execute a
       lister refresh command.


     * lister empty <handle>

       This command will display an empty cache in the
       specified lister (unlike lister clear which clears the
       contents of the current cache). If no empty caches are
       available (and a new one can not be created), the
       existing cache will be cleared.


     * lister read <handle> <path> [force]

       This command will read the given path into the
       specified lister. By default a new cache is used to read
       the directory; if the force keyword is specified, the
       current cache will be cleared and the directory will be
       read into that. The old path is returned in RESULT.
       For example,

          > lister read 121132636 'dhO:test'
          --> RamDisk:

 PAGE 165

     * lister copy <handle> <destination>

       This command copies the contents of one lister to
       another lister. Unlike most commands, the display of
       the destination lister is refreshed immediately. For
       example,

          > lister copy 121 132636 121963868

     * lister wait <handle>

       This command causes the rexx script to wait for the
       specified lister to finish whatever it is doing. Because
       Opus 5 multitasks, all rexx commands (like lister read,
       or lister new) will return immediately , even if the lister
       has not completed its task. This command will force the
       script to wait until the lister goes non-busy. If the lister
       is not in a busy state when this command is called, the
       program will wait for up to two seconds for it to go
       busy, otherwise this call is aborted. It would be silly to
       do lister set busy 1 and then lister wait. For example,

          > lister read 121132636 'c:'
          > lister wait l21132636


 COMMAND

 The third base command is command. This allows you to call the internal
commands of Directory Opus 5 from an ARexx script. The commands execute
exactly as if they had been run from a custom button or menu; that is,
they operate on the current source and destination listers. You can also
specify command parameters as normal. Some examples of the command command
are:

     > command all
     > command copy
     > command read s:startup-sequence
     > command makedir name=MyDir noicon

 PAGE 166

 ERROR CODES

 Lister handles are the actual address in memory of the lister structure.
Opus 5 will reject any non-valid handles with an RC of 10. All commands
that return data return it in RESULT (with the exception of dopus
request); if an error occurs, the error code is returned in RC. An RC of 0
generally indicates that everything is OK. Currently defined error codes
are :

 1 RXERR_FILE_REJECTED

   The file you tried to add was rejected by the current lister filters.

**************************************************************************
 Note that this is Not an error, just a warning. The file is still added,
it will just Not be visible until the filters are changed.
**************************************************************************

 5 RXERR_INVALID_QUERY
   RXERR_INVALID_SET


   The query/set item you specified was invalid.

 6 RXERR_INVALID_NAME
   RXERR_INVALID_KEYWORD

   The file name, or keyword you specified was invalid.


 10 RXERR_INVALID_HANDLE

    The lister handle you gave was invalid.

 15 RXERR_NO MEMORY

    There wasn't enough memory to do what you wanted.

 20 RXERR_NO_LISTER

    A lister failed to open (usually because of low-memory).

 PAGE 167

 CUSTOM HANDLERS

 The custom handler system allows you to specify the name of an external
message port. This port will be sent messages whenever certain things
happen to entries in the lister(s) you are interested in.

 When you specify a custom handler for a lister, you give the name of a
public message port.

**************************************************************************
 Note that custom handlers are specific only to the cache that is visible
in the lister at the time the handler name is set. The same handler port
may be used set for multiple caches, and indeed for multiple listers. Note
also that message port names are Case-sensitive.
**************************************************************************

 Whenever something interesting happens to a lister that has an active
custom handler, the handler will be sent an ARexx message. The handler can
be implemented either as a rexx program or as a C program (in which case
it must interpret the rexx message itself). Unlike Opus 4, messages sent
to handlers do not cause Directory Opus 5 to "hang" until they are replied
(although you should try to reply to any messages as soon as possible).


 The rexx message identifies the type of event, the lister the event
happened to, and other pertinent data. Currently, the only events that you
will be notified of are:

     doubleclick

     This is a double-click event, and indicates that an item in the
     lister has been double-clicked on by the user. The message arguments
     are:

          Arg0 - "doubleclick" (event type)
          Arg1 - <handle>      (lister handle)
          Arg2 - <name>        (entry name)
          Arg3 - <userdata>    (not used yet)

 PAGE 168

     drop

     This is a drag'n'drop event, and indicates that one or more entries
     have been dropped into a lister. The message arguments are:

          Arg0 - "drop"          (event type)
          Arg1 - <handle>        (lister handle)
          Arg2 - <names>         (file names)
          Arg3 - <source handle> (source lister handle)

     The filenames are separated by spaces (if there is more than one). If
     the files originated from another Opus 5 lister, Arg3 gives the
     handle of that lister. In this case, only the filenames (and not
     their paths) are supplied in Arg2 (you can get the source path using
     lister query). If Arg3 is null then the drop most likely originated
     from Workbench, and the names in Arg2 include the full paths.

     active

     This event indicates that a cache with a custom handler attached has
     just become visible. The message arguments are:

          Arg0 - "active"   (event type)
          Arg1 - <handle>   (lister handle)
          Arg2 - <title>    (cache title)
          Arg3 - undefined
          Arg2 will contain the custom title of the cache that became
          active, if it has been set with lister set title. If no custom
          title has been defined, the path string of the cache is returned
          instead.

     inactive

     This event indicates that the cache this custom handler is attached
     to is no longer active (visible in the lister). The message arguments
     are the same as for "active"

 PAGE 169

     above, except for a different event type in Arg0. This message is
     caused by the cache in the lister being changed (either by the user
     or under rexx control), or even by the lister being closed. Note that
     you may receive an "active" message for another cache with a custom
     handler, or even for the same cache, immediately after receiving an
     "inactive" message.


 Because of the multi-tasking nature of Opus 5, information custom
handlers receive can not be l00% relied on. For example, you may receive
an "active" message, but the cache that caused it may have immediately
gone "inactive" again. You should therefore check your port is clear of
all messages before processing any that have come in, and you should also
use the lister query command to make sure that things are how you expect
them. Also note that listers (unless you have turned busy on) can be
closed by the user at any time. To check that a lister is still open, use
the lister query path command (Or any other query command). If the lister
no longer exists, RC will contain the error code XERR INVALID HANDLE (1O).
Be aware though that while these possibilities exist, generally they will
not cause a problem. For the most part it will only be if the user is
"playing around" that weird situations will occur.

 PAGE 170

                                  INDEX

 Aborting 23                             Cache List 59
 About 44                                Caching 67
 AppIcon                                 Colours 63
   Iconify 71                              User 65
   Images 26                             Commands
 AppMenu                                   AddIcon 89
   Iconify 71                              All 77
 Archive bit 68                            AnsiRead 91
 ARexx 147                                 ARexx 147
   "command" 166                           CacheList 96
   Custom Handlers 168                     CheckFit 81
   dopus back 148                          ClearSizes 82
   dopus front 147                         Comment 84
   dopus getfiletype 149                   CopyAs 78
   dopus getstring 148                     Datestamp 84
   dopus request 148                       Delete 80
   Error codes 167                         DeviceList 96
   lister add 163                          DiskCopy 97
   lister clear 165                        DoubleClick 96
   lister close 150                        DragNDrop 96
   lister copy 166                         Duplicate 80
   lister empty 165                        Encrypt 90
   lister new 149                          FindFile 82
   lister query 150                        FinishSection 95
   lister read 165                         Format 97
   lister refresh 1 64                     FreeCaches 93
   lister remove 164                       GetSizes 81
   lister select 1 64                      HexRead 91
   lister set 158                          IconInfo 87
   lister wait 166                         LeaveOut 96
                                           LoadButtons 95
                                           LoadEnvironment 95
 BackDrop 44                               LoadOptions 95
 Button Banks 4, 7, 75                     Makedir 80
   Menu 53                                 Move 79
 Buttons - Scope and Focus 76              MoveAs 79
 Buttons Menu 53                           None 77
                                           Parent 77
                                           Play 92
                                           Print 93
                                           PrintDir 93

 PAGE 171

   Protect 85                            File Management 11
   Read 90                               Files 12
   Rename 79                             Filetype 58
   Root 77                                 Class 106
   Run 84                                  Edit Commands 107
   ScanDir 94                              Movement Directives 111
   Search 83                               Testing Directives 107
   Select 94                             Filetype Manager 100
   Show 91                               Filetypes 9, 99
   SmartRead 97                            Edit Definition 104
   Toggle 77                               Editor 102
   User1-4 97                              ID 105
 Configuration 4, 8, 22, 42                Manager 100
 Copy                                      Predefined 99
   Commands 78                             Pri 105
   Default actions 68                    Filters 34
 CX_POPKEY 22                              Lister 34
 CX_POPUP 22                               Recursive 54
                                         Format 51, 58, 117
                                         Free space
 Delete Warnings 69                        Check 68
 Destination 76                            Destination 68
 Directories 12, 39                        Update 68
 Directory Cache 67
 Directory Opus 4- Conversion 42
 DiskCopy 59, 115                        Help 24
 Display AppIcons 63                       Custom Button 24
 Display Mode 62                         Hide 44
 Display Objects 3                       Hide Method 70
 Display Options 63
 Display Tools Menu 63
 Double click 40                         Iconify 45
   on directories 39                       Hotkey 70
 Drag and Drop 39                          see Hide Method 70
                                         Icons 26
                                           Create 54
 Environment 55                            Leave out 26, 50
   Editor 61                               Processing 71
   Files 56                                Put Away 50
 Events - Filetype 102                     Select automatically 71
 Execute Command 44                        Selecting 26

 PAGE 172

   Snapshot 49                             Source 46
   Un-SnapShot 50                          Special Formats 35
 Installation 1 5                          Status Bar 29
   Files 16, 17                            Status Gadget 31
   Options 18                              Tile 47
   Serialising 19                          Title Bar 29
 Internal Commands 7 6                     ToolBar 35
                                           ToolBar Editor 47
                                           Unlock 46
 Keyboard in Listers 41                    Using a Mouse 38
                                           View Icons 32
                                         Locale 72
 LeaveOut 26, 50                         Lock Position - Listers 32
 LHA 59
 Lister
   Default Display 64                    Main Window 3, 4, 25
   Default Format 64                     Menus
   Font 64                                 About 44
   Path Formats 73                         BackDrop 44
   Lister Display 64                       Buttons Menu 53
   Listers 3, 5, 28                        Cascade 48
   Cascade 48                              Clean Up 51
   Command Menu 30                         Clock 54
   Destination 46                          Close All 47
   Device Gadget 31                        Create Icons 54
   Directory Path 35                       Edit Lister Menu 47
   Display Format 33                       Edit Lister Toolbar 47
   Display Modes 6                         Environment 55
   Drag and Drop 39                        Execute Command 44
   Dynamic Resorting 34                    Global Main 43
   File Mode 28, 48                        Hide 44
   Format editor 33, 47                    Icons Menu 49
   Hidden Parent Button 36                 Information 49
   Icon Mode 36, 48                        Leave Out 50
   Keyboard Control 41                     Lister Edit 47
   Lister Menu 46                          Lister Menu 46
   Lock 46                                 Lister Snapshot 48
   Lock Position 32                        Lock as Destination 46
   Menu Editor 47                          Lock as source 46
   Message Area 30                         Make Dest 46
   Moving Around 38                        Make Source 46
   Sort Order 33

 PAGE 173

   Options 57                            Save Layout 55
   Opus Menu 44                          Screen Depth 63
   Program Groups 51                     Search in Viewer 125
   Put Away 50                           Serialising 19
   Quit 46                               Settings
   Recursive Filter 54                     Environment 55
   Reset 51                                Options 57
   Select All 50                         Snapshot 49, 52
   Settings Menu 54                      Sorting Lister Display 34
   Snapshot 49                           Source 76
   Tile 47
   Turn Off 46
   Un-SnapShot 50                        ToolTypes & CLI Arguments
   Unlock 46
   Unlock All 46
   User 8                                User Colours 65
   View As 48                            User Menu 58
 Mouse - Use of 38                       Utility Requesters 115
 Multitasking 2

                                         View Icons in Listers 32
 Object design 3                         Viewer 124
 Options Editor 67                         ANSI mode 125
 Output Window 64                          Hex mode 126


 Palette 65                              Warnings - Delete 69
 Parent 36                               Workbench - Screen Modes 62
 Path Formats 73
 Print Requester 1 20
 Program Groups 27 , 51
 Protection bits 85
 Protection Requester 87


 Running Directory Opus 5 20
   Automatic Startup 20
   From the CLI 21
   From Workbench 20

 PAGE 174

 Typed and Edited By DIT 14-05-95 11.30 pm
