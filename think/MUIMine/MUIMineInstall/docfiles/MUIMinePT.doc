
                MUIMine V1.1    22 de Dezembro de 1998
                ------------    ----------------------

Introdução.
-----------

  O MUIMine é um jogo em que deves limpar um campo minado. É similar
  ao X-Mines das máquinas com X-Windows ou ao Minesweeper do MS-Windows.

  O objectivo do jogo é localizar e assinalar, com uma bandeira, todas as
  minas num campo minado rectângular e pôr a descoberto todas as células
  sem minas do campo minado.

  As características do MUIMine incluem:

    - Grava os três melhores tempos de cada nível de dificuldade.
    - Os níveis de dificuldade podem ser estabelecidos pelo utilizador,
      podem ser adicionados novos níveis, e os existentes (incluindo os
      níveis pré-definidos) podem ser apagados ou modificados conforme
      o utilizador o desejar.
    - Os gráficos do jogos estão localizados em ficheiros externos de
      modo a que o utilizador os possa substituir ou modificar conforme
      desejar.
    - É freeware (quem é que pagaria por ele de qualquer modo?).

  Requisitos:

    - AmigaDOS V3.0 ou mais recente
    - MUI V3.6 ou mais recente (foi desenvolvido no MUI V3.8 usando a
                                documentação da V3.6, mas poderá funcionar
                                com versões anteriores)


Copyright e Distribuição
------------------------

  O MUIMine é copyright do autor, Geoffrey Whaite.

  O arquivo do MUIMine pode ser redistribuído sem autorização desde que
  as seguintes regras sejam respeitadas:

    - Não pode ser cobrada mais que uma quantia razoável para manuseamento e
      distribuição. A quantia razoável, neste caso, será determinada pelo autor.

    - O arquivo terá que se manter inalterado excepto nos casos seguintes:
      . O código fonte pode ser omitido para poupar espaço, desde que
        um ficheiro de texto seja incluído explicando que falta o
        código fonte e indicando onde pode ser obtido o arquivo
        completo (na Aminet, por exemplo).
      . Podem ser incluídos mais ficheiros de gráficos e o script
        de instalação pode ser modificado para tomar em conta esses
        ficheiros.
      . Podem ser incluídos mais catálogos de linguagem e o script
        de instalação pode ser modificado para ter em conta os
        catálogos adicionais.

  O MUIMine é freeware. Não é necessário qualquer pagamento pela
  utilização do MUIMine. No entanto serão sempre bem-vindas
  contribuições de drogas leves e favores sexuais de miúdas giras.


Código Fonte
------------

  A partir da V1.1, o código fonte do MUIMine está disponível num arquivo
  separado 'MUIMine-Src.lha'. Isto porque, como ocupava a maior parte do
  arquivo da V1.0, era aborrecido ter que estar puxá-lo só para jogar
  o jogo.

  Embora o código fonte seja domínio público e seja possível modificar
  o MUIMine ou usar partes do código fonte nos teus programas, peço-te
  que não distribuas versões modificadas do MUIMine. Se fizeres alguma
  modificação que consideres que vale a pena, envia-ma para que possa
  ser incluída numa próxima versão. Isto para evitar a confusão que
  possa resultar da existência de diversas variantes do programa.
  Qualquer contribu¡ção para o desenvolvimento do MUIMine será
  devidamente creditada.


Jogando o Jogo
--------------

  A Janela Principal

    A janela principal do MUIMine é dividida em duas áreas. A área
    superior é para o estado e controlo do jogo, enquanto a inferior é
    o campo minado onde o jogo é de facto jogado.

    A área de estado e de controlo do jogo consiste em dois mostradores
    numéricos com um botão entre eles. O mostrador numérico da
    esquerda mostra o número de minas ainda por localizar. O mostrador
    númerico da direita mostra o tempo decorrido (em segundos). O botão
    entre os mostradores numéricos é para começar um novo jogo.

    O campo minado é uma matriz rectângular de células, onde cada célula
    pode ou não estar minada. O objectivo do jogo é determinar quais
    dessas células estão minadas e colocar uma bandeira em cada célula
    minada, descobrindo ao mesmo tempo todas as células não minadas.

  Usando o Rato

    Uma célula no campo minado é descoberta através de um clique com
    o botão esquerdo do rato nessa célula. Se descobrires uma célula
    minada, a mina explode e perdes o jogo. Se descobrires uma
    célula não minada, a célula descoberta mostra o número de células
    vizinhas (tanto ortogonalmente como diagonalmente) que estão minadas.

    Premir a tecla Shift modifica a acção do botão esquerdo do rato.
    Enquanto o botão esquerdo do rato está pressionado, a célula sob o
    ponteiro do rato e todas as vizinhas dessa célula ainda cobertas são
    realçadas, permitindo uma rápida verificação visual das células
    vizinhas. Quando o botão esquerdo do rato é libertado, sobre uma
    célula descoberta é feita uma verificação para determinar se todas
    as vizinhas minadas dessa célula têm uma bandeira colocada (o que é
    útil, por exemplo, para verificar se o número de células vizinhas
    com bandeira é igual ao número de células vizinhas minadas). Se
    assim fôr, todas as células vizinhas ainda cobertas são descobertas.
    Isto proporciona um método rápido de descobrir as células restantes
    ainda cobertas.

    Nota: as teclas Shift só são verificadas se já estiverem pressionadas
          quando o botão esquerdo do rato é pressionado. Libertar ou
          pressionar as teclas Shift enquanto o botão esquerdo do rato
          está pressionado não faz efeito.

    Uma célula pode ser marcada como minada com um clique no botão direito
    do rato, o que coloca o símbolo de uma bandeira na célula, não podendo
    assim ser descoberta. Uma célula com bandeira pode ser desmarcada
    com outro clique no botão direito do rato.

    Começando com a V1.1 do MUIMine, o botão direito do rato comporta-se
    do mesmo modo que o botão esquerdo do rato mais a tecla Shift quando
    a célula sobre a qual se pressiona com o botão direito do rato está
    descoberta, ou seja todas as células vizinhas, cobertas e desmarcadas,
    da célula sob o ponteiro do rato são realçadas. Da mesma forma, todas
    as células vizinhas, cobertas e desmarcadas, da célula sob o ponteiro
    do rato quanto o botão direito é libertado serão descobertas, caso
    essa célula estiver descoberta e tiver o mesmo número de células
    vizinhas com bandeira como de células vizinhas sem bandeira.

    O jogo termina quando uma célula minada é descoberta (perde-se o jogo)
    ou quando todas as célula não minadas do campo minado são descobertas
    (ganha-se o jogo). Quando todas as células não minadas são descobertas,
    então quaisquer células restantes ainda cobertas são assinaladas com
    bandeiras, já que esta é a única possibilidade que lhes resta.

    Nota: a acção do botão esquerdo do rato ocorre quando o botão é
          libertado, sendo essa acção aplicada à célula que se encontra
          sob o ponteiro do rato na altura. A acção do botão direito do
          rato numa célula coberta (ex. colocar/retirar bandeira) ocorre 
          quando o botão é pressionado sobre essa célula coberta. Quando
          o botão direito do rato é pressionado sobre uma célula já
          descoberta, a acção é igual à do botão esquerdo do rato mais Shift.



  Usando os Menus.

    Existem três menus na faixa de menus. São eles:

      O Menu Jogo, que tem os seguintes items:

        . Iniciar um Novo Jogo       - inicia um novo jogo. É o mesmo que que
                                       premir o botão de iniciar.
        . Mostrar os Melhores Tempos - mostra a janela de melhores tempos onde
                                       são mostrados os três melhores tempos de
                                       cada nível de dificuldade.
        . Definir os Níveis          - chama a janela do Editor de Níveis que
                                       permite a modificação, adição e remoção
                                       de níveis de dificuldade.
        . Definir as Imagens         - abre a janela de selecção de imagens onde
                                       os ficheiros de gráficos usados para
                                       desenhar os elementos da janela podem ser
                                       seleccionados.
        . Início Seguro              - activa/desactiva a opção de início seguro.
                                       Quando esta opção é activada, a primeira
                                       célula descoberta e as suas vizinhas estão
                                       sempre sem minas.
        . Informações do Programa    - mostra o título, descrição, versão e
                                       informações de copyright do programa.
        . Sair                       - sai do programa.

      O Menu Nível, que é onde seleccionas o nível de dificuldade com que
      queres jogar.

      O Menu MUI, que tem items para visualizar informações sobre o MUI e para
      definir as preferências do MUI para o jogo.


    Nota: para permitir que o botão direito do rato seja usado, tanto para
          os menus, como para jogar, o programa força a janela a detectar
          todas as acções do botão direito do rato durante o jogo (ou seja,
          desde que o jogador pressiona pela primeira vez o botão esquerdo
          do rato dentro do campo minado até que o jogo termine). Por isso,
          os menus do MUIMine não estão disponíveis durante este período de
          tempo. Para usar os menus, tens que primeiro terminar o jogo em
          curso (quer ganhando ou perdendo), ou re-iniciar o jogo premindo
          o botão de iniciar. No entanto, o MUI tem o hábito de desactivar
          esta função de detecção das acções do botão direito do rato para
          uma aplicação. Não sei porque é que faz isto, mas suspeito que tem
          qualquer coisa a ver com os menus de contexto. Para ultrapassar
          este problema, o MUIMine volta a detectar as acções do botão
          direito do rato sempre que uma mensagem da Intuition é recebida
          enquanto o jogo está em curso. O mesmo se passa sempre que
          ocorre um 'tick' do relógio do jogo, o que resolve a situação onde
          as acções do botão direito do rato não são detectadas pelo
          MUIMine, impossibilitando o envio da mensagem da Intuition para
          detectar essas mesmas acções (não achaste esta explicação
          perfeitamente clara?  ;). O que tudo isto quer dizer é que por
          vezes, quando pressionas o botão direito do rato numa célula do
          campo minado, é activado o menu em vez da célula, mas o programa
          corrige a situação imediatamente.


Janela de Melhores Tempos
-------------------------

  A Janela de Melhores Tempos pode ser visualizada através da seleçção
  do item Mostrar os Melhores Tempos no Menu Jogo. Também é mostrada
  quando um jogador obtém um novo melhor tempo.

  Esta janela mostra os três melhores (mais rápidos) tempos e os nomes
  dos jogadores que obtiveram esses tempos para cada nível de dificuldade.
  O nível de dificuldade é seleccionado com o botão cíclico no topo da
  janela. A lista abaixo do botão cíclico mostra os melhores tempos
  para o nível seleccionado e os nomes do jogadores que os obtiveram.
  No fundo da janela existem botões para fechar a janela, apagar os
  melhores tempos para o nível seleccionado e apagar os melhores
  tempos para todos os níveis.


A Janela do Editor de Níveis
----------------------------

  A Janela do Editor de Níveis pode ser aberta seleccionando o item
  Definir os Níveis no Menu Jogo. É neste local que um jogador pode
  modificar os parâmetros dos níveis de dificuldade existentes, adicionar
  novos níveis e apagar níveis.

  Um nível de dificuldade é definido pelos seguintes parâmetros:
    . a largura (em células) do campo minado.
    . a altura  (em células) do campo minado.
    . o número de células minadas no campo minado.

  A largura e a altura do campo minado têm que ser ambas maiores que
  zero, embora na prática qualquer coisa menor que cinco é um pouco
  disparatado. O programa apenas força que estes parâmetros sejam
  maiores que zero. É necessário ter também algum cuidado em não
  fazer o campo minado demasiado grande para caber no écran, senão a
  janela principal não se abrirá.

  O número total de minas tem também que ser maior que zero, assim
  como tem que ser menor que o número total de células do campo
  minado (a largura vezes a altura). Na prática, é aconselhável manter o
  número de minas entre um oitavo e um quinto do campo minado.

  Cada nível tem que ter um nome único e não podem existir dois níveis
  com os mesmos parâmetros.

  No lado superior esquerdo da janela, está a lista de níveis que mostra
  todos os níveis correntemente definidos para o programa. Cada entrada
  na lista mostra o nome do nível, a sua largura e altura e o número de
  minas no campo minado. Podes seleccionar um nível desta lista para
  mudar o seu nome ou modificar os seus parâmetros.  Podes também ordenar
  a lista arrastando e largando as entradas.  A ordem dos níveis na lista
  determina a ordem dos níveis no Menu Níveis e a ordem das entradas
  no botão cíclico da Janela de Melhores Tempos.

  Por baixo da lista de níveis estão as caixas de texto usadas para
  editar o nome e os parâmetros do nível correntemente seleccionado
  na lista.

  Do lado direito da janela existem diversos botões. Esses botões
  realizam as seguintes funções :

    'Adicionar'      Adiciona um novo nível no fim da lista de níveis.
                     Tens que preencher o nome e os parâmetros.

    'Apagar'         Apaga o nível correntemente seleccionado na lista
                     de níveis (se houver algum).

    'Desfazer Isto'  Desfaz as modificações feitas no nível correntemente
                     seleccionado desde que foi seleccionado na lista.

    'Desfazer Tudo'  Desfaz todas as modificações feitas desde que a
                     Janela do Editor de Níveis foi aberta.

    'Ok'             Aceita as modificações feitas e fecha a janela.

    'Cancelar'       Esquece todas as modificações feitas e fecha janela.


  Nota: Os dados do Melhor Tempo estão associados aos parâmetros do
        nível (largura, altura e número de minas). Se modificares um
        ou mais desses parâmetros, perderás os dados dos melhores tempos
        ao aceitares as modificações. No entanto se criaste um novo
        nível (ou modificaste um existente) com os mesmos parâmetros 
        que o nível original, esse nível terá os mesmos melhores tempos
        que o original.


Mudando os Gráficos do Programa
-------------------------------

  Os gráficos para o MUIMine são mantidos em ficheiros de imagem
  separados do executável principal do programa. Isto permite que
  os gráficos sejam modificados com facilidade sem ser preciso modificar
  ou recompilar o programa principal. Podes querer fazê-lo porque estás
  a utilizar um écran com poucas cores e os Datatypes não usam as
  cores correctas das imagens, ou porque estás a usar um écran com
  diferentes proporções (como um écran não entrelaçado), ou simplesmente
  porque não gostas dos gráficos incluídos no MUIMine. Existem três tipo
  de ficheiros de gráficos usados pelo MUIMine (campo minado, botão com a
  cara e algarismos) e quatro objectos que os utilizam (o campo minado,
  o botão de iniciar e os mostradores digitais do número de minas
  restantes e do tempo decorrido). Cada classe tem um ficheiro de
  imagem pré-definido que é, normalmente, mantido numa sub-directoria da
  directoria do programa, mas que pode estar na mesma directoria do
  executável principal do MUIMine. Se existirem ficheiros de gráficos
  do tipo pré-definido na directoria do programa, estes serão utilizados 
  de preferência em relação aos contidos na sub-directoria de
  imagens. Assim, podes testar novos ficheiros de gráficos sem ser
  preciso gravá-los sobre os originais.

  Cada ficheiro de gráficos contém todas as imagens para uma classe
  do MUI e consiste em múltiplas imagens, todas do mesmo tamanho e
  colocadas numa faixa horizontal. A classe usa o tamanho dos gráficos
  para determinar o tamanho com que os deve desenhar, pelo que a
  largura dos gráficos deverá ser um múltiplo exacto do número
  esperado de imagens no ficheiro.

  Os três ficheiros com gráficos são:

    def_MineFieldImage - ficheiro com as imagens para desenhar as
                         células no campo minado. Existem dezasseis
                         imagens neste ficheiro. São elas (da esquerda):
                           1. imagem para uma célula coberta.
                           2. quando o botão esquerdo do rato é premido
                              numa célula coberta, a célula é visualizada
                              como 'realçada'. Esta é a sua imagem.
                           3. esta imagem é usada quando ocorre uma
                              situação de erro, como não existir memória
                              para os dados das células do campo minado.
                           4. célula assinalada com uma bandeira.
                           5. imagem para uma célula incorrectamente assinalada
                              com uma bandeira.
                           6. imagem para uma célula minada.
                           7. imagem para uma célula que explodiu.
                           8. célula descoberta sem células vizinhas minadas.
                           9. célula descoberta com 1 célula vizinha minada.
                          10. célula descoberta com 2 células vizinhas minadas.
                          11. célula descoberta com 3 células vizinhas minadas.
                          12. célula descoberta com 4 células vizinhas minadas.
                          13. célula descoberta com 5 células vizinhas minadas.
                          14. célula descoberta com 6 células vizinhas minadas.
                          15. célula descoberta com 7 células vizinhas minadas.
                          16. célula descoberta com 8 células vizinhas minadas.

    def_FaceButtomImage - ficheiro com as imagens para desenhar a 'cara
                          sorridente' do botão de iniciar.  Existem cinco
                          imagens neste ficheiro. São elas (da esquerda):
                            1. a imagem normal quando o botão não está
                               premido.
                            2. a imagem seleccionada quando o botão está
                               premido.
                            3. a imagem normal alternativa a mostrar quando
                               o botão esquerdo é premido, durante o jogo,
                               no campo minado.
                            4. a imagem normal alternativa a mostrar quando
                               o jogo foi ganho.
                            5. a imagem normal alternativa a mostrar quando
                               o jogo foi perdido.

    def_DigitsImage - ficheiro com as imagens para desenhar os algarismos
                      dos mostradores numéricos.  Existem doze imagens neste
                      ficheiro. São elas (da esquerda):
                        1. imagem usada para um algarismo em branco.
                        2. imagem para o algarismo '0'.
                        3. imagem para o algarismo '1'.
                        4. imagem para o algarismo '2'.
                        5. imagem para o algarismo '3'.
                        6. imagem para o algarismo '4'.
                        7. imagem para o algarismo '5'.
                        8. imagem para o algarismo '6'.
                        9. imagem para o algarismo '7'.
                       10. imagem para o algarismo '8'.
                       11. imagem para o algarismo '9'.
                       12. imagem para o sinal negativo.


    Podes especificar outros ficheiros de imagem, além dos classificados
    como pré-definidos para cada objecto, usando os ToolTypes no ícone do
    MUIMine. Os ToolTypes são:

        MINEFIELDIMAGE    = <ficheiro com a imagem para desenhar o campo
                            minado>
        STARTBUTTONIMAGE  = <ficheiro com a imagem para desenhar o botão
                            de iniciar>
        MINESDIGITSIMAGE  = <ficheiro com a imagem para desenhar os algarismos
                            das minas restantes>
        TIMEDIGITSIMAGE   = <ficheiro com a imagem para desenhar os algarismos
                            do tempo decorrido>

    Estes ficheiros podem ser seleccionados a partir do programa, usando
    a janela de Selecção de Imagens que pode ser aberta com o item
    "Seleccionar as Imagens" do Menu Jogo.

    Repara que deves usar o tipo correcto de imagem para cada objecto.
    Se algum objecto não puder usar a imagem especificada, usará então
    a imagem pré-definida para a sua classe.


Créditos
--------

    O MUIMine foi escrito por Geoffrey Whaite que pode ser contactado por:

          email:   gwhaite@accsoft.com.au

        correio:   84/19A Tusculum Street
                   Potts Point, NSW,
                   Australia


    O MUIMine foi fortemente influenciado pelo programa Minesweeper do
    Windows que uso no trabalho. Joguei essa versão com grande frequência e
    gosto do modo como funciona. Os ficheiros gráficos fornecidos
    com o MUIMine são quase um roubo directo dos da versão do Windows.


    Obrigado a Christian Hattemer por todos os seus relatórios de erros e
    sugestões.


                         Esta aplicação usa o


                        MUI - MagicUserInterface

                 (c) Copyright 1993/97 por Stefan Stuntz


 O MUI é um sistema concebido para criar e gerir interfaces gráficos de
 utilização. Com a ajuda de um programa de preferências, o utilizador
 desta aplicação tem a capacidade de personalizar todo o aspecto do
 programa de acordo com o seu gosto pessoal.

 O MUI é distribuído como Shareware. Para receber um pacote completo,
 incluindo diversos exemplos e mais informações acerca do processo de
 registo, por favor procure um ficheiro chamado "muiXXusr.lha"
 (XX indica o número da última versão) nas suas BBS's locais ou 
 bibliotecas de domínio público.

         Se se quiser registar directamente, por favor envie

                        DM 30.-  ou  US$ 20.-

                                 para

                            Stefan Stuntz
                       Eduard-Spranger-Straße 7
                            80935 München
                               GERMANY


               Suporte e registo online está disponível em

                          http://www.sasg.com/




História
--------

V1.0    (28/11/98)
    - Primeira versão pública

V1.1    (22/12/98)
    - Correção de erro. Corrigidos os problemas com a formatação
      da janela de informações do programa, que impedia que os créditos
      do tradutor fossem visualizados. Também foi reorganizada a
      disposição da janela de informações do programa e tornei a frase
      de descrição do programa traduzível. Obrigado a Christian Hattemer
      pelo relatório de erro e sugestões.

    - Melhoramento. Agora é possível usar o botão direito do rato para descobrir
      todas as células cobertas vizinhas da célula que têm o mesmo número de
      vizinhas, com bandeira e com minas. Anteriormente isto só podia ser
      feito com o uso da tecla de SHIFT conjuntamente com o botão esquerdo
      do rato (este método continua disponível). Obrigado a Denis Zwornarz
      por esta grande sugestão.

    - Melhoramento. Implementada uma opção de "Início Seguro", onde a
      primeira célula descoberta num jogo e as suas vizinhas nunca estão
      minadas. Esta opção é armazenada como um ToolType (SAFESTART)
      no ícone do programa, e é seleccionável através da escolha de um item
      no Menu Jogo. Obrigado a Christian Hattemer por esta sugestão.

    - Melhoramento. As imagens usadas para desenhar os vários elementos
      da janela principal (o campo minado, o botão de início, o mostrador
      do número de minas restantes e o mostrador do tempo dispendido) podem
      agora ser especificadas por ToolTypes e seleccionadas a partir
      do programa usando uma janela de selecção de imagens. Isto envolveu
      a reescrita do código usado pela classe externa que lida com as
      imagens, de modo a que estas possam ser mudadas com segurança enquanto
      o programa está a ser executado. Também foi alterado o código que
      localiza os ficheiros das imagens, de modo a que o programa as possa
      encontrar correctamente quando o directório do programa não é a
      directoria corrente.

    - Melhoramento. Agora usa o ícone do programa como appicon em vez do
      appicon habitual do MUI. Isto é um resultado directo de ter que
      carregar o ícone para ter acesso aos seus ToolTypes para
      obter as informações de configuração.
