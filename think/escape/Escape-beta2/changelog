2005-04-05  Tom 7  <tom7@...>

	* load.cpp: There is a new format for index files, and these
	  now store the date that a level was uploaded, as well as
	  the current best speedrun length. These are shown in the
	  level detail area. Additionally, there is a new sort method
	  for directories; press ctrl-n to sort with newest levels first
	  (this is also the default now!).

	* sdlutil.cpp: Did a more principled rewrite of the color
	  averaging code for resizing images. (Thanks jcreed!) This
	  results in significantly better quality on transparent
	  images, like the player and (especially) bots. Updated
	  the screenshots on the server.

2005-04-04  Tom 7  <tom7@...>

	* edit.cpp: Fixed the size of the selection rectangle
	  when zoomed out.

	* sdlutil.cpp: Fixed a bug with the way odd-sized images
	  were resized, which caused bots to lose their feet in
	  screenshots. The shrinking of bots and players is still
	  not entirely satisfactory, however.

2005-04-04  Tom 7  <Tom@METROID>

	* move.h: Fixed several bugs where players (and bots) could
	  activate things with bots on them. Now this is no longer
	  possible.

2005-03-29  Tom 7  <tom7@...>

	* smanage.cpp: Added the ability to store multiple
	  solutions, and manage solutions. Press ctrl-m from
	  the load screen to reach this. Also added a speedrun
	  system on the server; if, when rating a level, you
	  are found to have the shortest solution for it,
	  then it will automatically prompt you to upload that
	  solution. For now, be courteous and let the original
	  authors of the levels claim speedruns for their own
	  levels, if they want.

2005-03-29  Tom 7  <Tom@METROID>

	* load.cpp: Removed ctrl-9 for solution optimization.
	  This will move to the solution manager, which is
	  available (but not currently very useful) with ctrl-m.

2005-03-21  Tom 7  <Tom@METROID>

	* play.cpp: You can now zoom out while playing, using
	  the square brackets '[' and ']', just like you can
	  when editing. This disables animation, but helps on
	  some of the gigantic levels (but ruins other levels
	  that are based on not being able to see off the screen!).

2005-03-19  Tom 7  <Tom@METROID>

	* play.cpp, upload.cpp: There is now a preference
	  (set by default) to automatically optimize new
	  solutions. Solutions are also optimized (regardless
	  of the preference) before they are uploaded to the
	  server.

2005-03-18  Tom 7  <Tom@LOLO>

	* load.cpp: It is now possible to run a simple
	  optimization routine on your solutions by
	  pressing ctrl-9 from the load screen. This will
	  cut out any pointless loops in the way you
	  walk around (from indecision or panel testing,
	  etc.) to find a more direct path. Eventually
	  there will be a preference to do this automatically
	  when you solve a level, and perhaps a bit more
	  intelligence in the optimizer. (ie., It could find
	  shorter paths between points on the map, even if 
	  you don't have loops in your solution.)

2005-03-18  Tom 7  <Tom@METROID>

	* edit.cpp: Fixed "first bot" command to be useful.
	  Now it preserves the order of the remaining bots.
	  Also fixed the behavior of placing bots so that
	  it doesn't draw tiles underneath the bot, as it
	  sometimes did before.

        * play.cpp: Added (provisional) move counter while
	  playing.
	
2005-03-15  Tom 7  <tom7@...>

	* edit.cpp: Added selection rectangle. Drag from
	  top left to bottom right with right mouse button
	  held to select, then ctrl+arrows to move the
	  selection. Stuff like cut'n'paste are coming soon.

2005-03-12  Tom 7  <Tom@METROID>

	* load.cpp: Fixed the key shortcut system so that
	  'c' and 'r' and 'u' (etc.) jump to levels that
	  start with those letters. Also, 'backspace' now
	  ascends to the parent directory at any time.

2005-03-11  Tom 7  <tom7@...>

	* escape.txt: Updated documentation to reflect
	  new additions.

	* move.h: Fixing up bot animation, and finishing
	  the implementation of the initial three robots:
	  Daleks, Hugbots, and Broken bots.
	  
	* Added tutorials for each of the three new robot
	  types.

2005-03-07  Tom 7  <Tom@METROID>

	* move.h: I corrected several mistakes in the
	  moving code. Now, in every case, panel actions
	  are carried out at the end of a motion (a "turn",
	  without bots present). This only affected a few
	  very rare circumstances, but it did break two
	  levels (and possibly some that I've never beaten,
	  although the solutions that the authors uploaded
	  still work). I will try to fix them as a courtesy.

2005-03-05  Tom 7  <Tom@METROID>

	* edit.cpp: Fixed performance problem when drawing
	  on the alternate layer in the editor.

2005-03-04  Tom 7  <tom7@...>

	* edit.cpp: In the process of hammering out the
	  semantics for bots, I've decided that the current
	  behavior of panels (in "warning" scenarios) is
	  the best choice in general. Therefore, this
	  behavior is no longer impure. The warning has
	  been disabled in the editor.

	* edit.cpp: Middle-mouse now acts as an "eyedropper"
	  in the editor, allowing you to change the drawing
	  tile without moving the mouse up to the tile menu.

2005-03-03  Tom 7  <Tom@METROID>

	* player.cpp: Now using a text file format for
	  players. This makes slightly larger files,
	  but they 'diff' much more easily for inclusion
	  in CVS, etc. They can also be edited by hand
	  in emergencies.

2005-03-01  Tom 7  <Tom@METROID>

	* play.cpp: Implemented undo--press 'u' when
	  playing. It doesn't work if you die (for now),
	  so watch out!

2005-02-28  Tom 7  <tom7@...>

	* The server now handles color codes correctly
	  in level titles.

2005-02-26  Tom 7  <Tom@METROID>

	* move.h: Improved electric turn-off effect.

2005-02-24  Tom 7  <Tom@METROID>

	* util.cpp: Even more natural sorting on
	  the load screen (ignores 'the',
	  punctuation).

	* makefile: Fixed, we hope, the binary
	  portability on linux. This was mainly
	  Adam's doing.

2005-02-23  Tom 7  <tom7@...>

	* move.h: Finished the implementation of
	  steel tiles, including three colored
	  versions (like colored spheres). Added
	  tutorial for it. The graphics may change
	  in the future.

2005-02-21  Tom 7  <tom7@...>

	* move.h: Added 'steel' tile, which is to
	  red blocks what spheres are to yellow.

2005-02-20  Tom 7  <Tom@METROID>

	* server: Server now agrees with the client
	  about what constitutes a valid solution.
	  This means the player can now start in
	  the path of a laser but still survive.

2005-02-19  Tom 7  <Tom@METROID>

	* animation.cpp: Drawing "lasered" animation.
	  Drawing "winning" animation correctly.

	* main.cpp: Added "loading..." splash screen.

2005-02-19  Tom 7  <Tom@LOLO>

	* animation.cpp: Rudimentary death animation
	  code in place, but need to draw a real
	  animation for it.

2005-02-18  Tom 7  <Tom@LOLO>

	* animation.cpp: Resolved long standing issue
	  with the player drawing and multi-phase
	  animation. There are no known corner cases 
	  with this any longer. (Please report player
	  duplication bugs or alpha darkening!)

2005-02-14  Tom 7  <Tom@METROID>

	* animation.cpp: Fixed zoomed out pictures of
	  player.
	  
	* animation.cpp: Added animation for walking
	  upward.

	* main.cpp: Fixed (I think) mouse warping when 
	  the program is launched, causing something
	  other than the appropriate default to be
	  selected on the player selector.

2005-02-13  Tom 7  <Tom@METROID>

	* animation.cpp: Animations for walking left
	  and right. Now more consistent about how the
	  player is drawn, too. (Aside from some obvious
	  unimplemented stuff!)

	* play.cpp: Now the user can abort the playing
	  animation by pressing another key. This makes
	  levels like Max's "Chamber v2" playable again!

2005-01-31  Tom 7  <tom7@...>

	* animation.cpp: Animated the player walking
	  downward. More soon.

	* menu.cpp: Reverted to the original (mistaken)
	  color for the highlighted control.

2005-01-28  Tom 7  <Tom@METROID>

	* animation.cpp: The player is now drawn on
	  top of any other animation, which avoids some
	  ugly interference.

2005-01-25  Tom 7  <Tom@METROID>

	* player.png: Working on a new, larger player
	  graphic as part of animation. Not quite
	  finished yet -- there are graphical glitches
	  and I need to work on the left-right graphic.
	  Soon, animation frames for him!

2005-01-22  Tom 7  <Tom@LOLO>

	* sdlutil.cpp: Vastly improved graphics
	  performance (especially on Linux), thanks
	  to Adam Goode's patch.

2005-01-21  Tom 7  <Tom@METROID>

	* animation.cpp: Animated the swapping of
	  colored floor.

	* triage: Fixed SFO and Splitsville, which had
	  serious cooks.

2005-01-20  Tom 7  <Tom@METROID>

	* animation.cpp: Added the final two directions
	  for pushing the green block.

2005-01-20  Tom 7  <tom7@...>

	* animation.cpp: Player doesn't walk behind
	  the green block any more when pushing it.

	* dirt.cpp: Fixed bug with animation when
	  the screen is resized.

        * upgrade.cpp: Upgraded the upgrade system.
          Now it can remove files, as well as create
          symlinks on Linux and Mac OSX.

2005-01-18  Tom 7  <Tom@METROID>

        * animation.cpp: Improved animation of
          wires and lights. Lights now light up,
          and the animation is synchronized in
          such a way that I finally believe the
          'Wires 2' tutorial will be fairly
          transparent.

2005-01-17  Tom 7  <tom7@...>

        * animation.cpp: Added animations for wires
          and lights.

2005-01-15  Tom 7  <Tom@LOLO>

        * mainmenu.cpp: Perhaps improved performance
          of main menu by turning off alpha blit of
          the (opaque) background. (Doesn't seem
          to make a big difference on linux, where
          the main menu is quite laggy.)

        * menu.cpp: The mouse can now move sliders
          (by clicking, not dragging yet), toggle
          toggle buttons, and click buttons on
          menus.

2005-01-13  Tom 7  <tom7@...>

        * prefs.cpp: Added a preference for animation
          speed. So far, this is ignored except in the
          case that animation is disabled entirely.

        * upgrade.cpp: When upgrading, escape can now
          create subdirectories. This will be needed
          soon.

2005-01-11  Tom 7  <tom7@...>

        * pattern.h: Fixed bug in pattern matcher that
          caused it to fail to compile on newer versions
          of GCC.

2005-01-10  Tom 7  <Tom@METROID>

        * animation.cpp: Added animation for traps
          falling into holes.

2005-01-09  Tom 7  <Tom@METROID>

        * animation.cpp: Animated the pressing of ON
          buttons, as well as 1 and 0 buttons.

2005-01-08  Tom 7  <Tom@METROID>

        * animation.cpp: Animated electric floor turning
          off.

2005-01-06  Tom 7  <Tom@LOLO>

        * mainshow.cpp: Miniature game animations now
          draw the player facing in the direcion that
          he's moving.

2005-01-03  Tom 7  <Tom@LOLO>

        * animation.cpp: Improved animation for spheres
          squishing against walls.

        * mainmenu.cpp: Now using the selector (with mouse
          action) for the main menu as well.
          
        * mainmenu.cpp: Added icons to the main menu,
          like the player database has.

        * main.cpp: Avoided the initial (fake) mouse
          motion when the application starts, so the
          application can still be controlled like before
          with they keyboard. (There still appears to be
          a problem with this, urgh!)

2005-01-02  Tom 7  <Tom@LOLO>

        * selector.h: The mouse can now control selectors,
          which are used to choose the player and levels.

2005-01-01  Tom 7  <Tom@LOLO>

        * play.cpp: Improved the smoothness of animation.

2004-12-30  Tom 7  <Tom@METROID>

        * move.h: Added really crummy animations for mass
          tile changes (same as swapping). Better ones soon.

        * animation.cpp: Added animation for pushing a grey
          block into a hole.

2004-12-29  Tom 7  <Tom@METROID>

        * animation.cpp: Overhauled animation system. Added
          animation for the player walking (sliding! there
          will be frames for him soon) and pushing blocks.

2004-12-21  Tom 7  <Tom@LOLO>

        * animation.cpp: Added animation for swapped tiles
          (targets of panels), though this is a little rough.

2004-12-20  Tom 7  <Tom@LOLO>

        * animation.cpp: Added animations for zapped tiles,
          breaking block, and jiggling of spheres as a 'push'
          passes through them.

2004-12-19  Tom 7  <Tom@LOLO>

        * textbox.cpp: Fixed crash in text box when using
          long words. (Thanks bpotetz!) Also fixed word wrap
          a little, though it still acts strange for long words. 

        * animation.cpp: Kicking a gold block or sphere now
          animates its trip and hit. Most of the work was in
          developing a general animation system, so soon there
          will be many more animations. Upgraded versions of
          SDL and SDL_image.

2004-12-09  Tom 7  <tom7@...>

        * load.cpp: Dim ratings if there are only a few votes
          for that level.

        * rating.cpp: When rating a level as cooked, Escape now
          automatically prompts you to comment on that level,
          describing your cook.

2004-12-07  Tom 7  <tom7@...>

        * load.cpp: When paused looking at a level on the load
          screen, escape will now play back your solution in the
          preview, if you have one saved. (Need to make this
          a preference.)

2004-12-06  Tom 7  <tom7@...>

        * mainmenu.cpp: Improved CPU usage on main menu.

2004-10-27  Tom 7  <Tom@METROID>

        * escape.nsi: Added installer (using NSIS) for windows.

2004-10-25  Tom 7  <Tom@METROID>

        * http.cpp: Made HTTP code tolerant of certain broken web
          proxies (that translate the case of Connection type
          headers).

2004-10-20  Tom 7  <Tom@METROID>

        * http.cpp: Added advanced option for debugging the network
          stuff. This will probably be disabled again soon.

        * draw.cpp: Now show full rating information in details on
          load (etc.) screen. This needs to be a little bit less
          prominent to avoid information overload.
        
2004-09-20  Tom 7  <tom7@...>

        * edit.cpp: Added text warning to accompany graphical one with
          self-targeting panels.

2004-09-13  Tom 7  <Tom@METROID>

        * update.cpp: Reordered the items on the update menu, so that
          you need only press 'enter' to update.

2004-09-02  Tom 7  <Tom@METROID>

        * menu.h: Fixed the failure to compile on Mandrake 10.0. The
          problem was due to the gnome headers #defining gettext (a
          terrible idea), which caused confusing syntax errors.

2004-09-01  Tom 7  <tom7@...>

        * update.cpp: For level update, changed the selection of the
          subscribed collections to use the much nicer 'menu' system
          (like the preferences).

        * Changed the application name to 'Escape' under OS X.

2004-08-31  Tom 7  <tom7@...>

        * menu.cpp: Improved the look of buttons on menus, and added
          a cancel button in addition to the confirmation button.

        * rating.cpp: Fixed a crash if Escape fails to connect during
          the rating process.

2004-08-27  Tom 7  <Tom@METROID>

        * dircache.cpp: Made the load screen appear twice as fast,
          since we were caching everything twice (!).

        * playerdb.cpp: Fixed bug where the menu for the player
          list wouldn't show up the first time the game was launched.

        * handhold.cpp: Added a "first time" startup message that tells
          you what to do when you first play. It also reminds you to
          upgrade or update every month or so.

        * util.cpp: Got rid of all debugging printouts to the 
          console, in preparation for Beta.

2004-08-23  Tom 7  <tom7@...>

        * mainshow.cpp: Made the show a little bit more interesting,
          but also faded it so that it doesn't distract from the
          actual point of the main menu.

2004-08-23  Tom 7  <tom7@HELIUM>

        * mainmenu.cpp: Added a little show to the main menu. This
          will get better looking!

2004-08-22  Tom 7  <Tom@METROID>

        * level.cpp: Simplified the rules: Death is only checked for
          *after* each move. This means that you can successfully
          survive if you start a level standing in the path of a
          laser. This is a bit graphically awkward, but is simpler
          to explain and implement than the old rules.

        * load.cpp: Show the name of the directory being loaded in
          the progress indicator. Empty directories (or any directory
          with a file called .escignore) don't show up in the load
          list any more unless they have indexes. This should speed
          up load times again.

        * update.cpp: Use a smaller font for update. Now do sanity
          checking of the file and directory names.
        
2004-08-17  Tom 7  <Tom@METROID>

        * mainmenu.cpp: Made another attempt at making the main menu
          background appear under more circumstances.

2004-08-14  Tom 7  <Tom@METROID>

        * load.cpp: Fixed broken sorting on global ratings.

2004-08-12  Tom 7  <Tom@METROID>

        * playerdb.cpp: Menu items now show up on the player selector
          screen.

        * edit.cpp: Restored the menu, which was lost with the last
          changes!

2004-08-11  Tom 7  <Tom@METROID>

        * draw.cpp: Cleaned up the code for drawing the level preview from
          the load screen. Side effects are that it is now centered
          (when appropriate) and scrolled to the start position of the
          player; the player is also now actually drawn.

        * playerdb.cpp: Cleaned up selector code and player database code.
          Now the player selector shows the player graphic, which can
          currently only be the "office" graphic. More to come.

2004-08-10  Tom 7  <Tom@METROID>

        * mainmenu.cpp: Changed title graphic and added a new
          level, "Rotary Club."

2004-08-06  Tom 7  <tom7@...>

        * screenshot.cpp: Added the "screenshot" program on linux.
          The server now uses this to generate pictures of each
          level for browsing on the web!

2004-08-04  Tom 7  <tom7@...>

        * player.cpp: Player files are now automatically backed
          up every few days. There is a preference to turn this
          off from the main menu, though there is currently no
          way to recover backed-up player files!

2004-08-03  Tom 7  <tom7@...>

        * mainmenu.cpp: I fancied up the main menu. This won't be
          the final look for "Beta," but it's got more stuff than
          before.

2004-08-01  Tom 7  <Tom@METROID>

        * menu.cpp: Labels now appear on sliders, drawn in the new
          small font.

2004-07-30  Tom 7  <tom7@...>

        * load.cpp: Made the load progress indicator graphical.
        
        * escape.txt: Updated the documentation for the impending
          Beta release.

2004-07-30  Tom 7  <Tom@METROID>

        * load.cpp: Added a rudimentary progress indicator for the
          load screen, which is slow when there are a lot of levels
          that haven't been cached by the OS yet.

          Added the ability to delete files from the load screen;
          press 'del'.

          Made all sorting routines on the load screen stable --
          this gets rid of quirky results when (for instance) sorting
          several times in a row by 'solved' or deleting a file when
          the sort was anything but alphabetical.
        
        * upper.cpp: Index files are no longer stuck in the attic
          when updating.

2004-07-26  Tom 7  <tom7@...>

        * textscroll.cpp: Having so many levels exhibited a bug in
          level update, which I fixed.

2004-07-23  Tom 7  <tom7@...>

        * I found another batch (I think the last) of old submitted
          levels, and added many of them.

2004-07-20  Tom 7  <tom7@...>

        * level.h: Fixed devious bug where moving after cloning
          a solution (which happens in various places) could lead
          to memory corruption or a crash.

2004-07-20  Tom 7  <Tom@METROID>

        * load.cpp: Now we don't save the tutorial dir as the last
          dir visited every time you visit the main menu.

2004-07-19  Tom 7  <tom7@HELIUM>

        * level.cpp (resize): When resizing a level, destinations
          (of panels, transporters) are now preserved correctly.

        * mainmenu.cpp: The tutorial is now shown on the main menu;
          the first unsolved level appears at the top. You can turn
          this off from the preferences menu, but it is recommended
          that you leave it on so that you notice when new tutorial
          levels arrive (as they will when new tiles are added).

2004-07-03  Tom 7  <Tom@METROID>

        * load.cpp: The load screen should be a bit faster, since
          we only verify solutions once per launch of escape.
          
        * load.cpp: Made sorts "natural" so that "Tutorial 10"
          comes after "Tutorial 9" instead of "Tutorial 1".

2004-06-24  Tom 7  <tom7@HELIUM>

        * main.cpp (main): When solving a level for the first time
          (if certain conditions are met), you are now prompted to
          rate it. This can be turned off from the preferences menu.

2004-06-23  Tom 7  <Tom@METROID>

        * main.cpp (main): Fixed a bug that kept solutions from
          being saved when beating a level saved with any older or
          newer compressor.

        * level.cpp: Changed the way that levels and solutions are
          compressed to squeeze out a little more space. Although
          the new routines can load old files, old versions of
          escape won't be able to read files saved with versions
          from today on. Therefore, the level database has been
          set as requiring today's version or later.
          
          The next planned change to this encoding should be
          backwards compatible, unless I've made a mistake.

2004-06-22  Tom 7  <tom7@...>

        * commenting.cpp: You can now comment on levels, although
          there is no way for users to see those comments yet. (Soon!)

        * editai.cpp: added names and short descriptions of each
          random AI mode.

2004-06-10  Tom 7  <tom7@...>

        * editai.cpp: mode 7 now retracts gold block / sphere movement
          in a potentially useful way.

2004-06-09  Tom 7  <tom7@...>

        * pattern.h: fixed horrible bugs in retract1. AI mode '7' now
          places a little hole-greyblock pattern in such a way that the
          level remains solvable (if it was before). More to come soon...

2004-05-24  Tom 7  <Tom@METROID>

        * load.cpp: Sort by author with ctrl-t.

        * edit.cpp: Implemented zooming in and out using brackets [ ],
          doubled the maximum area of a level to 2048. 

        * update.cpp: Index names of subdirectories now leave out
          an unsightly leading space.
        
2004-05-22  Tom 7  <Tom@METROID>

        * Found a whole bunch of crappy old levels, and imported some
          of them (only the ones that I've solved already...!)

2004-05-21  Tom 7  <Tom@METROID>

        * load.cpp: Fixed crash (regression) when looking at a directory
          with levels in it but no index at all.

2004-05-19  Tom 7  <Tom@METROID>

        * load.cpp: Added different sorting styles. Press ? from the
          load menu to see them.

2004-05-18  Tom 7  <tom7@...>

        * Some old imported levels were corrupted (in a fairly harmless
          way), and I now do strict checking on loaded levels, which
          caused them to be rejected. I replaced them with new versions
          in the triage collection. To recover your solutions, press
          ctrl-0 on the load screen (for a directory where there are
          levels with missing solutions) and type the name of your
          player file, such as myname.esp.
        
        * Added view of ratings. These are updated from the
          server at level update time. The server is itself only
          intermittently updated. Personal ratings are not shown yet.

2004-05-13  Tom 7  <tom7@...>

        * Finally fixed sorting of directories in load.
        
        * Added 'impure' subdirectory to triage collection.
          Broken/joke/invalid levels go here.

        * The 'load screen' now remembers its previous position between
          loads, and behaves better with regard to modifier keys.

        * Started changelog. I only intend to record user-visible
          changes here.
