 -----------------------------------------------------------------------------
                                 <<Klondike>>
                                      by
                          Desi Villaescusa (AKA Dr.D.)
 -----------------------------------------------------------------------------
Preface:  This game was originally written to this state in 1992.  There
were plans, but life happened.  Can't remember if my hard drive crashed or
what, but this, and all my Amiga dev (there wasn't much) was stopped.  I
thought it was all lost forever.  I know at one point in time, Asha Develder
had sent me a copy of this game (program only), but I hadn't seen that in
ages either.  And the source and files were long gone.
Then, last year or so, someone I knew from back in the day said he had a
copy somewhere.  I asked him to see if he could find it.  In the mean
time, one of my projects was going thru all my old floppies.
These were IBM format.  But lo and behold, there was a copy of the game.
I think it was the copy Asha had sent me.  I must have save it.
And then, still going thru stuff (I was motivated now), I found a printout
(yes, on paper) of the source code.  So I decided to see if I could recreate
it...  I have a couple of Amigas again (and Amiga emulation), so I loaded
up the DICE C compiler (what I wrote it in in 1992) and started looking at
the C code I had OCRd.  It was pretty messy.  The OCR frequently confused
() with {} and [], and also | (pipe) with I, and it sometimes lost semicolons.
And there was the letter swaps.  I with l and 1.
Also, I needed several .h files.
One for the menu structure, one for the About requester, and one for the
graphics for the cards.  But it was a challenge.  ;-)
Luckily, I had the working executable.  I was able to run it on my Amiga,
use Personal Paint to grab the screen and then grab the cards as "brushes"
and save them as C data from Personal Paint.
The menus and About requester .h files, I had to manually rebuild, but I had
the working game to see what they should look/behave like.
My goal was to make virtually no changes to the original C code.
Another hiccup was that I used two external libraries.
EasySound for the sounds, and although there was a newer version (that would
have required code changes) out there, I found the older version in some
old Amiga dev disks I had picked up at some time.
I also used iff.library for my title pic, but the only version I could find
was a newer version.  That did require me to make some minor code changes
(basically I had to add IFFL_ to the beginning of several function calls).
But, after a bit of time and cleanup, I have been able to compile it on my
Amiga and it runs as it did.  It is nice to see that not only does it still
run on an Amiga 500 with 1.3, but it also runs on my A1200 with OS 3.2.2,
released just last year.
Not sure I will actually do any more work on this.  There are MUCH MUCH
better Amiga solitaire games out there.  But this was fun to revive.
Below is what I had originally typed when I thought I was going to release
it as Shareware.
-----------------

Yes, it's YAKG!!  (Yet Another Klondike Game!)
"Why," you ask??
Now, THAT is a good question!!  And the answer??
I was asked to write one! :-)
  A certain Asha Develder of Amiga FIDO fame was asking around because her
favorite Amiga Klondike games were turning up unstable under WB2.0.
So she stated that if anyone in FIDO land was looking for a programming
project that he/she might write a Klondike game.  I said YES!  And the rest
is (as they say) history...  This one has front/back screen gadgets, point
& click interface, Workbench or CLI use, and full menus...

"What IS Klondike?"
  Klondike is a type of Solitaire.  (Yes, a card game.. :)  Until I started
writing this program, I'd never really played it myself, but it is one of
those simple yet addicting games.  You would pay $52.00 for a deck of
cards.  You'd get $5.00 for each card you moved to the Aces-up piles..
The basic premise is to stack the cards in descending (and alternating
color) order while trying to move them to 4 piles, starting with the Aces
(same suit this time) ang going UP!  Sound confusing?  It's not.
Really.  Just my description!  :-)

  --------------------------------------------------------------------------

How to play:    (If you know, just skip to the quick ref... :-)

You have 4 seperate areas (piles and/or groups of piles).
The first 2 are what I will call the deck and the waste.
The deck is easy.  It's the deck! :-)
The waste is the pile where the cards from the deck go (1 or 3 at a time).
So you pick up a card that's face down on the deck, and place it face up on
the waste.

The third area is made up of 4 piles.  The point of the game is to move
the cards TO this area.  The 4 piles are for the 4 suits, and you move
cards to those piles starting with the Ace and working UP (i.e. then the 2,
then the 3, etc.. to the King).

The forth area is made up of seven piles.  These piles are dealt out with
only the last card face up, and in ascending amount order.  What that
means is that the first pile will get 1 card face up, the next pile will
get 2 cards- last card face up, etc till the 7th pile gets 6 cards down
and last card on that pile face up.

The idea is to shift cards around among the 7 piles and/or from the waste
to the 7 piles and/or from the deck to the waste until you uncover cards
that you can put on the third area (Aces piles).
Now, while the Aces piles gets the cards in numerical ascending order by
suit (i.e. Hearts-counting Ace, 2,.. King), the cards on the piles in the
forth area do the opposite.  You place cards in DESCENDING order and the
COLOR must alternate.  That is, you can move a RED 7 on top of a BLACK 8.
When you move a card in area 4 from 1 pile to another pile (or to the one
of the Aces piles) the card that was face down below it gets turned face
UP.  If one of your other piles has a RED 9, you can now move the RED 7
AND (The ONLY time you move JUST the last face UP card is if you move it
TO the Aces piles.) the BLACK 8 on top of the RED 9.  Now your pile has
RED 9, BLACK 8, and then a RED 7.  Alternating color and descending value.
If one of your Aces piles had a 6 of Diamonds showing (AND if that RED 7
was a 7 of Diamonds!) you could move the 7 to that pile.
You can play the last card showing on the waste pile to either the Aces
piles or one of the 7 piles, but ONLY the last showing card.  Once you
move it, THEN you can play the card that was under it.
If you have a pile in the forth area (with the 7 piles) that is EMPTY, the
only card that you can move to there is a KING!  (Or a group of cards from
another pile in area 4, assuming that the first card showing there is a
KING...)
It's not as complicated as I think I just made it sound.. really! :-)
Just give it a try and see...

Now, play and have fun!

  -------------------------------------------------------------------------

Quick Ref:  (Just my Klondike interface basics..)
Menus-
PROJECT
 (First time, New and Play do the same thing...)
 A-P 'Play' : starts the game and subtracts $52.00 from what you have.
 A-N 'New'  : starts the game but resets your cash to $-52.00.
 A-Q 'Quit' : Quits the game...  (No "Do you want to quit" warning!!")
     'About': Gives the basic info...
OPTIONS
 A-S 'Sound': Toggles sound on or off.  (Registered version only)
 ( ^ -- Hot Keys: A = Right Amiga (i.e. Right Amiga + "p" = PLAY)
 (Future me:  I have no idea what the "Registered version only" for
  sound thing was about...  LOL )
Point & Click-
Point on, above, or below a card to select it.  If you click ON the card
and it can go the the Aces piles, it will.  If you click above or below
a card that can go to the Aces Piles, it'll be selected so you can move it.
Click on the Deck to flip a card up from the deck.  Above the Deck card
will select the last card that was flipped up.  ON the Deckcard will flip
a card up.

  -------------------------------------------------------------------------

Future plans:
1: A title screen.
   This is DONE!  All you need is the IFF.library copied to your LIBS:
   directory if it's not there already.  Also, you have to have the
   file, "Title.pic" in the same place Klondike is.  If neither is there
   the program still plays, just w/out the Title screen.
   (NOTE: You must use iff.library version 18.5 (has it been upgraded?)
    with WB 2.0!)
2: BOB Carry cards.. "What's that?"  Well, now, when you click on a card
   (or cards) they become outlined.  What I'd like is that when you
   click on them, they disappear from the pile, and appear floating
   attached to your pointer.  So you actually MOVE them to the other pile.
   (Sprites and VSprites are lo-res, so they won't work, and I have yet
   to find ANY BOB C code...)
3: The easiest, add sound.    (This is done)
   Note: Sound is disabled in the non-registered version. I had to cut
   SOMETHING, and this was the least offensive.  Would you rather I had
   it let you play for 15 minutes or something?  :-)
   (Future me:  I never did this, as I never released it.. Funny.)
4: Pal Support.  With this, IF you are running in PAL mode, my program
   will open the screen to full PAL height, and then you won't see any
   crunched cards.  (Which ONLY happens if you have ALOT of cards on
   either of the last 2 piles.)  Not much of a need really, but it'll be a
   nice option I think every program should add if possible.  IMHO :-)
5: Game rules toggle.  (Done) As I see it, there's 2 ways to play Klondike.
   The first is as I have it set up.  The second is where instead of
   flipping the cards from the deck 1 at a time, you flip 3 cards over
   and when the deck is empty, you can take all the waste pile and flip
   them back over to the deck pile.  (Solitaire Royale plays this way)


Pitch:
(Future me: I am NOT asking for money.  This is just an old text file!)
Yes, I am asking for $5.00 for this.  This will get you, mailed out by me,
the version with sound and BOB stuff when finished!  Also, your version
will have your name CODED in (Where the beg for $5.00 is now).  AND there's
also a $10.00 registration! What will you get for $10?  You will get any
(God forbid!) bug fixes mailed out FOC.  Also, when I actually get each of
the above done, you will be mailed out that version.
Anything I do beyond those, I don't know, but $10.00 should be good for
BUNCHES of mail updates FOC (Free of charge).
Also for $10, you will get (If you ask for it!) my C code!!!  I don't claim
to be a great programmer, since I'm self taught, but it does show how
to read mouse co-ordinates, set up menus, and requesters (my ABOUT window)
as well as structures, functions, etc...  And it's fairly well documented.
Also, I am VERY open to and looking for suggestions for other programs..
This is my first release to the Shareware world, so it'll be interesting
to see how it goes...
(If you register, I'll let you know whenever you want how many other
people have registered if you want a gauge for this type of thing..)

If you can't afford to register it, I am NOT asking you to erase it!
Keep it! Play it!  I can't afford to register alot of the PD I have at
this time.  However I do register when I can swing it.  (Ask Tim Aston and
Matt Dillon for a start.. :-)  But if you ever get a spare $5 or $10, send
it in.
(Note:  I do not feel $5.00 is too much for this program when you consider
 that mailing you a disk will cost about $1.00 by itself!  And this game
 has proven to be VERY stable on MANY different systems.)
Either way, spread it around.
Oh well, enjoy!

(Future me... Ah!  My dreams of being a Shareware millionaire ended here)
  ------------------------------------------------------------------------

Basic info:
  This was written with DICE (Dillon's Integrated C Compiler), and was
kinda based on the play of Everett's Klondike; although I never saw his
code, and his was in BASIC anyway.  I did BLATENTLY steal a card set I
that came with Everett's version.  I felt bad at first, then I realized
that he stole a card set (backs) from David Addison's Klondike, and he
even included Addison's card fronts in his release.  I tried to design my
own card set, but I can't draw.  :-(  If you're looking for an economic
(read- CHEAP to me.. :-) way to program, DICE is the way to go.  If you're
looking for the BEST C around, give DICE a shot anyway, I think you'll
be SURPRISED....  Klondike should run on ANY Amiga with ANY setup...
(Tested on a 68000 500 w/1.3, 68000 500 w/2.0, 68030 500 w/2.0, a 68000
with 2.0, and a 68040 2000 w/2.0.  (If you have a spare 3000 I could have
to test...? :-)
(Future me:  Wow.  I had that many people I knew test it?  I was only aware
of my testing machine, and then two others..)

  -----------------------------------------------------------------------

Desi Villaescusa (AKA Dr.D.)   |   (Drd on PDN (Public Data Network))
                               |   To access PDN call your local Sprintnet
                               |   node (old telenet node) & type 'c PDN'.
                               |   (no quotes)

P.S.  If you register, send the $5.00 (or $10.00) to my name, since
      Lilliput Software isn't a real business, YET... :-)
Thanx and TTYL
Dr.D.
(Future me:  Dr.D.  HA!  ;-)  LOL...  )
