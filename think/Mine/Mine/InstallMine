; This little Installer script file installs Mine.

; Mine needs kickstart 2.04 or higher to run.
(if (< (/ (getversion "exec.library" (resident)) 65536) 37) (abort "Sorry, Mine needs kickstart 2.04 or higher!"))

; english or german version? 
(if (askbool (help "By the end of Sep 93, I am still not able to get the\nnative developer kit 3.0.\n\nNo developer kit, no locale support. Sorry.")(prompt "Do you want me to install the german\nor the english version of Mine?") (choices "german" "english")) (set lang "deutsch") (set lang "english"))

; ask for dest dir and copy Mine and (after question) the .info file
(set dirname (askdir (default "SYS:") (help "Please select a directory here.\nI will copy Mine into this directory.") (prompt "Where do you want me to install Mine?")))
(copyfiles (source (cat "Mine." lang)) (dest dirname ) (newname "Mine"))
(if (askbool (prompt "Copy the icon, too?") (help "You need the icon to run Mine from worbbench.\nYou do not need the icon to run Mine from the CLI.")) (copyfiles (source (cat "Mine." lang ".info")) (dest dirname) (newname "Mine.info")))

; Look if there is a dir "Highscores" from an older version. If yes, rename it to "Mine-Highscores_6".
(if (NOT (= ":" (substr dirname (- (strlen dirname) 1)))) (set dirname (cat dirname "/")))
(if (= 2 (exists (cat dirname "Highscores"))) (rename (cat dirname "Highscores") (cat dirname "Mine-Highscores_6") (confirm) (prompt "I have to rename the directory Highscores to\nMine-Highscores_6.")(help "I have to rename the dir Highscores to Mine-Highscores_6.\nOtherwise Mine will not find your highscore lists.")))

; Look if there is a dir "Mine-Highscores" from an older version. If yes, rename it to "Mine-Highscores_6".
(if (NOT (= ":" (substr dirname (- (strlen dirname) 1)))) (set dirname (cat dirname "/")))
(if (= 2 (exists (cat dirname "Mine-Highscores"))) (rename (cat dirname "Mine-Highscores") (cat dirname "Mine-Highscores_6") (confirm) (prompt "I have to rename the directory Highscores to\nMine-Highscores_6.")(help "I have to rename the dir Mine-Highscores to Mine_Highscores_6.\nOtherwise Mine will not find your highscore lists.")))

; Set default dir
(set @default-dest dirname)

; This is the shortest installer script I've ever seen. And perhaps that one with the longest lines.
