
; HIT TILES 2 SPECIAL EDITION Installer script
; $VER: HIT PUZZLE 2 SPECIAL EDITION Install 1.1
; written by HIT MAN


; Spazio richiesto su disco da HIT TILES 2 SE
(set size_of_hp 865000)


(set #hittiles2se-location
(cat "Where I should install HIT TILES 2 SPECIAL EDITION?\n(A directory will be created)\n"
))


(set #icone-install
(cat "\nDo you want the icons at 8 colours?"
))


; Chiede destinazione
(set @new-dest
(askdir
(prompt #hittiles2se-location)
(help @askdir-help)
(default "SYS:")))


; Controlla se copia su se stesso
(set @SeStesso
(cat @new-dest"HitTiles2SE/HitTiles2SE_Installer"
))

(if (= @icon @SeStesso)
  (abort
    "You can't copy these files over themselves\n"
  )
)


; Controlla spazio su disco
(set disk-space(getdiskspace @new-dest))

(if (< disk-space size_of_hp)
  (abort
    "Insufficient disk space in\n"
    @new-dest "\n\n"
    "HIT TILES 2 SPECIAL EDITION requires at least\n"
    size_of_hp " bytes of empty disk space\n"
  )
)


; Assegna destinazione
(makeassign "assigns" @new-dest)


; Controlla se è già presente una directory "HitTiles2SE"
(if (exists "assigns:HitTiles2SE")
  (

    (message "\nDirectory already exists!\n\n"
             "The old files will be updated")
  )
)


; Crea directory
(makedir "assigns:HitTiles2SE")
(makedir "assigns:HitTiles2SE/Docs")
(makedir "assigns:HitTiles2SE/GFX")
(makedir "assigns:HitTiles2SE/MUSIC")
(makedir "assigns:HitTiles2SE/SFX")
(makedir "assigns:HitTiles2SE/TILES")
(makedir "assigns:HitTiles2SE/TilesPics")


; Copia icone scelte
(
  (set hardy
    (askbool
      (prompt #icone-install)
      (help #help-askbool)
    )
  )
  (if (= hardy 1)
    (
      (copyfiles
      (source "8ColoursIcons")
      (dest "assigns:HitTiles2SE")
      (optional "force")
      (all))
    )
    (
      (copyfiles
      (source "HitTiles2SE.info")
      (dest "assigns:HitTiles2SE")
      (optional "force"))
      (copyfiles
      (source "IffToTiles.info")
      (dest "assigns:HitTiles2SE")
      (optional "force"))
    )
  )
)


; Copia files
(copyfiles
(source "GFX/Dest.icon")
(dest "assigns:")
(newname "HitTiles2SE.info")
(optional "force"))

(copyfiles
(source "HighScore.HT2SE")
(dest "assigns:HitTiles2SE")
(optional "force"))

(copyfiles
(source "Docs.info")
(dest "assigns:HitTiles2SE")
(optional "force"))

(copyfiles
(source "HitTiles2SE")
(dest "assigns:HitTiles2SE")
(optional "force"))

(copyfiles
(source "IffToTiles")
(dest "assigns:HitTiles2SE")
(optional "force"))

(copyfiles
(source "SetupAGA.HT2SE")
(dest "assigns:HitTiles2SE")
(optional "force"))

(copyfiles
(source "SetupECS.HT2SE")
(dest "assigns:HitTiles2SE")
(optional "force"))

(copyfiles
(source "TilesPics.info")
(dest "assigns:HitTiles2SE")
(optional "force"))

(copyfiles
(source "Docs")
(dest "assigns:HitTiles2SE/Docs")
(optional "force")
(all))

(copyfiles
(source "GFX")
(dest "assigns:HitTiles2SE/GFX")
(optional "force")
(all))

(copyfiles
(source "MUSIC")
(dest "assigns:HitTiles2SE/MUSIC")
(optional "force")
(all))

(copyfiles
(source "SFX")
(dest "assigns:HitTiles2SE/SFX")
(optional "force")
(all))

(copyfiles
(source "TILES")
(dest "assigns:HitTiles2SE/TILES")
(optional "force")
(all))

(copyfiles
(source "TilesPics")
(dest "assigns:HitTiles2SE/TilesPics")
(optional "force")
(all))

; Cancella Dest.icon
(delete "assigns:HitTiles2SE/GFX/Dest.icon" (safe) (optional "force"))


; Ciao ciao
(set @default-dest @new-dest)
