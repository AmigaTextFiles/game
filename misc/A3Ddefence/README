       A  3D simulation of missile defence against enemy jets.
                           (using amos 3d)

  Author: David Lawrence.        e-mail..   muddle@voyager.co.nz

                                               
 This archive is put here so that some people might get a bit of fun from
this  experimental scenario,  and so other amos  programmers can freely use,
modify, improve on,  (or just have a good laugh at )  one persons attempt
to overcome rotation limits in amos 3d.
                      ......................

Best with fast  A1200.  There is a crude time limit to prevent very fast
machines from producing  uncontrollable action.  The best approach would
have been to use  time dependent change of variables etc, however this
would mean a drastic rewrite of something never expected to be public.

                         ...............

Will run on PAL or NTSC.  The last is likely to have a more  'flickery'
screen because the screen adjustment has been added on as an  afterthought
in the easiest possible way.  If it doesn't detect NTSC let author know
so he can panic about it.  You will still get the screen but minus
map,  'hits recorded' and current speed adjustment.


The archive includes:-
- a compiled workbench version for non-amos users
- amos source code  -   needs  voodoo 3d extension to edit and run.
- the necessary sample bank, screens, 3d objects

-   ( note- the 3d library is a required  part of the compiled version, as
           per the 3d manual,.. it's not an amos extension.
         Also,  the 3d extension referred to herein is
          the 'voodoo' 3d extn,   not 'stars'  or  other)


The program expects all the above archive to be extracted ( contents
and sub-directories)   into one main  directory.. (any name)

Please advise author if things don't appear to be working,  as I can't
be quite sure if the prog. is  relying on something on my hard drive
 which may not be on others. I think it's just getting the normal math lib.

                      ......................



                  POTENTIAL USE OF THIS PROGRAM?
Even as it stands, it could have  better planes, alternative control, more
missiles perhaps, or canon fire effect  (though  this is tricky  in  TRUE 3d,
  - especially to get target hitting without speed loss)   and levels
could include advanced  plane behaviour.
The explosions  could be radically improved, and the planes slowly
disintegrate, or occasionally descend in flames .. or something.
  Note  that control style (of inertia etc), is a subjective preference.
As on my other 3d efforts, I tried to get a more natural, flowing response
than is  usually seen.   That's my bias anyway.

  But there should be potential as an episode in a game sequence if changed
 to other scenarios.    I fancy an alternate world, changing the missile
to a crossbow(?), and the enemy to flapping dragons/pterodactyls which move
through 3d spires of rock  and/or  castle, with atmospheric background. The
downwards  view could be increased for more sense of vertical space.
You could then look down on the dragons whose colour could be faded
as they descended into the murky depths.....
    The castles or rock pillars, since they would not change their distance
away, could be td background segments with fair detail.  And the background
could largely be a 'rainbow' darkening into the murky depth colour.
    It should  be possible to detect when  enemy (dragons?) were behind
or in front of the rocks or castles and use either td background or
a standard bob as required to produce the precedence for 3d effect.

Could be fun.... I'm even getting inspired myself.   I hear the hollow
'whooshing'  of great wings beating closer and closer and the wild shrieks of
the  'dragonthingys '  echoing around  the looming rocky spires.....
 Could  there be money in it by joves?!   ( But these ideas have a way of
coming radically unstuck when you try to implement them with amos 3d...).

Or make a catapult  launcher of the missile, or find a way to indulge
in sword play, or spear? Or there might be  place for laser like fire, or
some sort or flame throwing.(flat objects 'animated'?) Attack other castles?
It would be possible for the viewpoint to move about a little, as if on
a platform at the top of a pillar, without worrying about the background
scene appearing wrong.   Or if you don't worry about the background at all,
the viewpoint can freely move below aerial attack across a plain made
from a 'rainbow'.
                                                                 
     Alternately a future scene is possible, or perhaps the ability to
jump from defence  site to defence  site, to get an element of strategy
in the overall conflict.  Or mix  with 1st person movement using
the viewpoint control of the  still to be uploaded .. ' A3Dsimplesim'
 etc. etc. Those with very fast machines should have  real  possibilities..
For the rest of us ..... oh well.

                    .............................

Amos programmers, note that the full rotation in 3d requires a background
much larger than a standard screen can be (1872pxl) Hence two linked screens
are necessary.  Anyone who knows how to simplify this, or create a larger
screen  (can't AGA somehow?)  is hereby urged to tell me....
If Am3d  didn't use a masking method to draw, one could use the machine code
copy command,  which can  be faster and could handle the size... but...

                ====================================


If anyone wants to obtain amos 3d I have no suggestions that are legal.
You could try annoying Europress?.
 It sounds like maybe someone else has the rights to the 3d code and object
modeller.
        But in mid 1995 I wrote many pages of criticism of amos 3d
to them, and received back an offer to replace the object modeller with
the latest version if I sent the original discs back.
Since that was hardly the response  I wanted I did nothing,  but it means
that they could  supply original stuff at that point.  Their letter in reply
was actually quite reasonable... .

It was on a mag. disk some years ago, you may find a friend who has a copy.
There must be thousands around somewhere.   Maybe amos mail list people
could mount a campaign to get all unused copies into a 'pool'... err ..is it
legal to buy and sell (or give) such original mag discs???. with the mag?
 Or since they must know that such disks will have been freely copied and
spread, are they really worried one way or the other??
  The object modeller though, really needs the manual to sort out the use.
 And note the mag. version is for amos 1.35 and apparently will crash
amos pro if you try to run it as an extension.  The 3d for Amos Pro was
on an extras disk I hear, for that program.

         As an alternative :-
It should be possible to use AMCAF vector rotations for Amos pro to make a
3d  program.   I think that's what I might  try  now if starting again.
And you could make use of full colours etc. And make a better object modeller.
.....at least as long as you kept it all simple.
   You would need some   simple trig. for putting the amcaf rotations
 to use in a '3d world' ,     or someone can produce a master set of
amos code routines, totally optimised....yes?

But it would be a LOT OF WORK,and probably need some assembler routines
if you wanted to handle  large numbers of co-ords. Or to check for surfaces
and lines that are both in front of and  behind the viewpoint, as in a
full 3d system..

                 ........ ....................
                 .............................

Feel free to use anything here for your own programs. Or to upgrade the
whole thing,  I have spent too much time worrying to optimise properly.
 There may well be some other way to improve A3d ..  go to it.
      (and let me know how please..)
Those with the Amos pro version, and a fast machine, may  be able to
use the amcaf blitter commands to copy bit planes (with masking) and
extend the A3d colour range.


 I believe that really, a complete new, and faster 3d system- using fast ram
 (bit planes or chunky) and cpu drawing techniques is what is needed for amos.
 It may be possible to do quite a lot with the amcaf vector rotation
 commands.    But then, one needs a polygon command which doesn't crash
the machine when off screen right somewhere!


               ..... food for Thought....
   No one else seems to think so, but I believe (from a position of moderate
ignorance)    that  on the A1200,  the use of bit planes in FAST ram  could
 be turned to advantage by drawing (triangular) polygons completely with
pre selectable  horizontal lines....(from table of 'slope')
 Hence storing large areas with few   ' Moves'. (Then blasting to chip ram
quickly for dislay when finished.)

The advantage of 'chunky' is the ease of finding a pixel address, but this
may not count against the possibility above..after all, you would only need
to find the 3 points of the triangle this way. (and they could use a 'table
referencing' approach anyway).
  No need for - 'lines first' and then  'filling' afterwards.

     Has  anyone actually tried  such a system?  or is it impossible?
It strikes me, from my old 6502 code programming  attempts, as a relatively
simple thing to be done . Just one optimised routine which would transform
the output  of the amiga for polygon 3d..
  Pity I don't want to get familiar with 68000 code... (lazy sod)

I would like to know the outcome speed wise.   Years ago a mag disk had a
'VR world' prog which  could be switched between blitter, rom routines,
 or cpu code for a polygon style.  The last was fastest and I don't think it
was even drawing in fast ram... just direct to chip.

Some people are doing routines with cpu and blitter. This  sounds a good
idea, except that you are not using the cpu in a fast ram screen where it
really moves.
Or maybe everyone  else prefers  the doom/corridor style with chunky style
screen and  texture mapping.     OK, whatever..  Go to it.

I just  hope someone might  come up with something before the Amiga expiry
date  passes.
        Or my expiry date!!


Also... sorry to have not got this stuff out much earlier when amos and 3d
were  still officially around,  and this might have been of some  use.
 But I was  isolated in a bit of a personal black hole,  and the internet
was not on my event horizon at all.


          Good luck all.
                                David L.


             ...............................................
             ...............................................


      ABOUT AMOS 3D,   and rotations, as applied to this program.
         (a repeat very nearly, of previous upload for A3Dmodelsim))

This writer was depressed  to discover that amos3d is not ideal.
It is quite fast for a blitter system, and I find the commands fit my
 way of thinking .
      BUT... problems include...
There are very restricted colour choices, it can write over screen
edges and  crash from (seemingly)  memory problems, and since it uses
masking to draw objects ( probably to gain speed), it is incompatible
with other drawing operations.   Also the screen conversion doesn't handle
off screen positions.
 And the object modeller though it has some good ideas, drives me completely
up the wall !!!!..
Hence the minimal objects in  programs I have made).

    But above all, the rotation angles are limited, and do not match the
manual which implies the ability to rotate objects and viewpoint about
their own axes with simple commands..
 In fact the z rotation axis  of objects  and viewpoint remain
permanently aligned with the z axis of the co-ord world.

   It did not have to be that way as the amcaf vector rotations for example
seem to rotate relative to their current alignment.. using matrix maths.
  It may be possible to use  complex  sin* cos formula to make amos3d
work that way,  but all my attempts failed at the angle extremes..
(My '3dtests' dir is full of things like;- 3dcalc, novertcalc, nearlythere,
 frontworks, .... very depressing.  And I can't even understand them now)
                         -------------------

  The partial solution used here and in my other programs, is to change the
 normal point of view and hence the apparent way the objects rotate.
    It's as simple as setting the initial view angle at rt. angles to normal
on the A angle axis .
And then being sure you put your objects in the new world ground plane
of X, Y co-ords   (instead of x,z as normal) with their A angles also moved
 one rt angle...

      It may be clearest to visualize as follows;-
Imagine you have stuck your head into the co-ord world through your monitor
and are looking straight down.   Now twist  your head to look to your right.
The effect from your point of view, is that the world z axis now seems
vertical  ( i.e. off the  top of your head )  while the x goes away
into the distance ahead and the y goes from side to side.

    Your ground objects are put on the new ground plane,( which from the old
  point of view was the plane parallel to, or 'made by' the monitor screen )
     For convenience I chose start angles which gave positive z upwards,
positive x away into distance, y positive  to the right,   but the x,y
(set by initial  angle c ) could be any chosen direction.
                           
   The main thing is that while the z axis rotations still remain aligned
with the 'world' z axis, this is no longer the longitudinal Z  axis of the
objects and viewpoint... from your new  point of view.

                              -------------- 
   It is possible now to point an object  in any world direction on  the
z axis (angle c), elevate  with angle B, and roll any angle with A.

I'll  call this;-   mode3

 The limits of this are:-
         1.   The object can not use td forward, since the rolling angle A
is not the axis used by td forward.
 Instead you have to use a sin/cos formula to move.
                ( see source code A3Dmodelsim))
         2. since the viewpoint cannot align along the A angle/ axis
the VIEWPOINT  cannot be flown about as in a proper flight sim.
         3. A seperate 'yaw' response is too difficult to arrange.
 
    None the less it is possible to fly  an object around properly if
it is saved from the object modeller at right angles (pointed left) to the
normal angle.  (if you used td forward it would go sideways)

   This is the mode used by the previous 'A3Dmodelsim'. It was very tricky
to understand how to adjust the rotation angles as the object pointed
upwards in the world..  because the roll angle (A) gradually becomes a change
in the direction in the world. (angle C )
  It's in the source code for that prog.  but if anyone needs more I could
supply notes.. once I've  re- worked it out myself!  (Don't think this was
worked out by some  blinding quick brain.  It mostly happened by hours of
experiment over many months, and step by step advance.   NOW it seems simple)

                  ..............................

      It is possible though, to use td foward for objects and viewpoint
with the world in this orientation,  if you use angle  B for rolling and A
for elevation.     Angle C  still sets world direction.
   Call this mode 2


The limits of this mode are:-
         1. the B rolling axis  is always parallel to the 'ground' plane.
           (Though you can point it in any direction on that plane.)
Therefore when you elevate with angle A  and try to roll with B, the object
or view 'skews' or 'barrel rolls' it's nose around in an arc.
The greater the elevation the greater the skew.
  It is possible to use a simple sin (or cos?, I forget) to reverse the
skew in the inverted part of the roll.
             This is just enough to make it useable as a limited flight
sim with a proper travelling viewpoint but held within limits up and down.

 See example. ( to be uploaded to aminet.. soonish  ).. A3Dsimplesim.

 Or to use to fly independent targets or enemies  which bank and
fly with some realism.

           This example ..   A3Ddefence


There are other possibilities with both  modes, and there are probably
proper games that could be written along these lines- especially for fast
machines.   Maybe even money could be made...?   .
..  but the writer is done for now.  Too much trial and error.
                                     
I should mention that the td 'bearing' command does not work in the
new world order. It works only  for direction in the x,z ground plane and not
the new x,y plane.  I have a method which should enable it's use, but since I
never needed the command it is untried. ( You have to substitute the co-ord
positions as if they were in the old mode,  use td bearing command,  then
 put results back into the new world..  I think.   e-mail if desperate)

Td face command is also affected- it puts  the object horizontal on the OLD
ground plane i.e. stands it on end in the new world,  and then spins it on
that plane to face the viewpoint or other ob.
 You could use a similar approach to above but there would be some extra
time involved.


                     ------------------------
                     -----------------------


