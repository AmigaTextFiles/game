Short:    Sparrow - an editable game v1.00
Uploader: mattkane@lappi.plai.fi (Matti Niskanen)
Author:   mattkane@lappi.plai.fi (Matti Niskanen)
Type:     game/misc

A simple flickscreen game with editors.

Requires
- any Amiga with at least 512 kilobytes of CHIP RAM

-+** S P A R R O W - the editable game         QUICK GUIDE 1.9.1998 **+-

************************************************************************
****                                                                ****
****  This software is Freeware. I won't require any money          ****
****  from the users. You may not sell or use in collections        ****
****  (like PD disks, CD-ROMs etc, except Aminet CD) this software  ****
****  without my permission. If you want to, you can freely         ****
****  distribute the game executable with your own scenario files.  ****
****  Just remember me in the credits, please.                      ****
****                                                                ****
****                       Matti Niskanen <mattkane@lappi.plai.fi>  ****
****                       http://lappi.plai.fi/~mattkane/          ****
************************************************************************

I am Matti Niskanen from Suomussalmi, Finland and study datatechnology
at Pohjois-Lapin ammatti-instituutti in Sodankylä. We had to create
a larger program as the final work of the school. While the others
in the class created Windows applications, I decided to do something
useful and here it is - an editable flickscreen game for all Amigas!

As I yet haven't created a full description of the source code,
this first release will contain just some short instructions.
There is going to be a comprehensive documentation in the future.
I wanted to release this already fully-working software as soon as
possible, and not in the end of the year 1998.

1. What's this?

I suggest that you create an own directory for the game.
For example "work:games/sparrow" would be good. After you
have unpacked all the files from the archive, use some
file utility (eg. Filemaster) and take a look at the files
before you continue reading further (install-before-read :).

Sparrow takes about 1,5 megabytes of hard disk space.
The game should work on any Amiga with 512 kilobytes
of CHIP memory, but the more CHIP and FAST memory you
have the better. Recommended configuration is
50MHz MC68030 processor or better, 2 megabytes of CHIP RAM
and 16 megabytes of FAST RAM. That's my machine and
the game plays very well on it.

You should have at least these 30 files in the directory:

begin.iff          The picture that appears in the start of the game.
blocks.iff         The image that contains graphics for the game.
blocks.iff.info    The icon file for "blocks.iff".
characters.abk     The AMOS-file, which is created by chared-program.
characters.dat     Contains information of the characters (eg. animation).
chared             The executable program to create characters.
chared.amos        The AMOS-source code.
chared.info        The icon file for the executable prorgram.
frames.iff         The image that contains graphics for the characters.
frames.iff.info    The icon file for "frames.iff".
game               The executable game.
game.amos          The AMOS-source code.
game.info          The icon file for the executable game.
mod.end            The Soundtracker tune that plays in the end.
mod.game           The Soundtracker tune that plays during the game.
mod.intro          The Soundtracker tune that plays in the beginning.
objected           The excutable program to create objects.
objected.amos      The AMOS-source code.
objected.info      The icon file for the executable program.
objects.dat        Contains information of the objects.
objmap.dat         The object map - locations of characters and objects.
quickguide.txt     This guide file.
roomed             The executable program to create rooms.
roomed.amos        The AMOS-source code.
roomed.info        The icon file for the executable program.
rooms.dat          The room map - which blocks and where.
setter             The executable program to place characters and objects.
setter.amos        The AMOS-source code.
setter.info        The icon file for the executable program.
theend.iff         The image that appears in the end of the game.

You can see the executable files from the drawer on the Workbench screen.
You should also see two large icons, "blocks.iff" and "frames.iff" which
attempts to launch Personal Paint when double-clicked with the mouse.

As you propably guessed, Sparrow is created with AMOS 1.35, which
I got with CU Amiga magazine. My AMOS is very old, so there may
be some compatibility problems. The most common problem is that
the executable file doesn't start on some machines. I have found
a solution for this, but I can't be sure it fixes all the problems.
I have to turn off my Blizzard 1230-IV board and disable all
caches of the MC68020 processor. It's quite slow to compile after that.

It is also possible to put the game on a single DD-floppy disk.
Just copy all the necessary files to the disk and leave out
the AMOS source files and the editors. A minimun installation
of Sparrow looks something like this:

begin.iff
blocks.iff
characters.abk
characters.dat
frames.iff
game
game.info          (not necessary)
mod.end            (not necessary)
mod.game           (not necessary) 
mod.intro          (not necessary)
objects.dat
objmap.dat
rooms.dat
theend.iff

If you have AMOS, you can leave the executable files off.
Then the editors will fit to a single floppy disk. Just run
AMOS and load the editors and the game. On a slower machine
it's not very playable I'm afraid.

The music files (mod.*) are not necessary. The game checks
if they exist and loads them if they do.

2. How do I start the game?

Just double-click the game icon which has a joystick on it
and the game should start. You can use CLI/Shell typing
"game" in the Sparrow directory.

3. How do I play the game?

When you have the intro screen, press either joystick fire
button or any key on the keyboard. When you are dead, press
fire or any key to restart the game.

Joystick controls:

up - climb up
down - climb down / pick object / break floor
right - walk right
left - walk left

fire + up - punch / break upper wall
fire + down - kick / break lower wall
fire + right - jump right
fire + left - jump left

you can alternatively jump by pushing the joystick to
up + right - jump right
up + left - jump left

Keyboard controls:

The easiest way is to use the keypad (sorry A600 owners!).

'5' up - climb up
'2' down - climb down / pick object / break floor
'3' right - walk right
'1' left - walk left

'6' jump right
'4' jump left

'-' punch / break upper wall
'+' kick / break lower wall

4. What can I do in the game?

You can walk, jump and climb around. You can collect
objects found in various places. You can fight with
enemies.

You can get experience during the game. Fight with the
enemies and collect right objects. The more experienced
you are the more you can harm the enemies. Your skill
raises in every 10000th point. You start with the skill
level 1 and 3 is the maximum level you can reach.

There may be fake walls which you can crush. It's also
possible to break the floor below. You get 5 points of
every broken block.

There are also floors that hurt you. Stay away from them.
Some enemies get hurt of those floors too, but some don't.

In theory, it's not necessary to collect any objects
or to kill any enemies. You just have to find the
ending point. But if there is an enemy in the room
where the ending point is, you have to kill it
before you can complete the game. And if the enemy is
really though, you can just blame yourself for not
developing your skills by fighting the other enemies.

5. How do I exit the game?

You can exit the game by pressing 'esc' key when you have
the beginning picture on the screen. In the game you can
use the menu by pressing the right mouse button.

6. Plans for the future

- better playability (no more 16 pixel movements) * most important *
- sound effects
- bigger gamearea
- more graphic blocks to use in rooms
- free size characters
- more enemies
- more options
- more intelligence for the enemies
- flying enemies
- crawling enemies
- weapons
- ability to swim in the liquids
- more options for objects
- animated objects
- animated blocks
- movable blocks
- copper list to colour the sky
- scrolling texts to the beginning and the end
- 64-colour EHB-mode in the game graphics too
- two-player mode

Who knows if I ever get all those working. I am such a bad coder.
The future versions will not work in low-end Amigas.

The next, really improved version of this application might be called
"Great tit", the next one as "Ovenbird" and so on. When the game is
near to perfect, it will be named as "The Budgy : games creating system".

Thanks to Stamen for the great music!
Thanks to Jens Vang Petersen - I got inspiration for this work from your Alien Breed 3D 2 leveleditor!

*********************************************************************

General information about the system
------------------------------------

If you managed to play the game, I assume everything is well
with the editors too. Let's start from the very beginning.

Game graphics

The game area map is 200 bytes x 120 bytes. One room is
20 bytes x 12 bytes, so there are 10 x 10 rooms in the
whole game area.

Take a look at the "blocks.iff" file. These are the blocks
the rooms are built up. One block is 16x16 pixels and at the
current version there can be up to 160 blocks.

The very first block in the upper left corner is block number 0.
The first block in the beginning of the second line is number 20.
And the very last one in the lower right corner is number 139.
There are also one more line of blocks below. They are the
object graphics that you can't use as room blocks.

The characters react to the blocks. This makes possible to
create ladders, fake walls, deadly areas and so on. Here are
the description of the effect of the blocks.

blocks 0-39 are passable - background graphics
blocks 30-39 are climbable - ladders
blocks 40-99 are inpassable - walls that can not be broken
blocks 90-99 are destroyable - fake walls
blocks 100-119 hurt - you can't stay long on them
blocks 120-139 hurt deadly - your energy will drain very fast

Below all the blocks is the game status screen. It is always
the same size and the points and the energies are placed to
the same positions, so don't change them! Everything around
them is possible to change. Remember that the game takes
the palette from this image.

Amiga 1200 and A4000 owners: don't use 8-bit colour palette
when drawing the image. Turn off AGA from the Amiga Early
Startup Control and use OCS, because AMOS can only handle
the old type of palette. Otherwise the colours will be
corrupted.

Front end

The game has a start and an end image. They are 64-colour EHB
IFF pictures named as "begin.iff" and "theend.iff".
They must both be 320 pixels wide and 256 pixels tall.

Music

The game uses three different music tunes: the intro, the game
and the end. These are standard Soundtracker module files named
"mod.intro", "mod.game" and "mod.end". The tunes can be created
with Protracker, but the old AMOS replayer doesn't recognize
all the commands. You can leave off the music files. These are
the only files whose existence is checked and handled properly.
If there are some necessary files missing the game will crash.

Backing up

Before you launch any of the editors, you have to back up
at least these files which will be overwritten by the editors:

begin.iff
blocks.iff
characters.abk
characters.dat
frames.iff
mod.end
mod.game
mod.intro
objects.dat
objmap.dat
rooms.dat
theend.iff

In fact the IFF-pictures and music modules are not written by
the editors, but you have to use the same names for your own
files.


Roomed
------

For the first time it is wise to load previously
created rooms. Do this by accessing the "File"-menu with the
right mouse button and select "Load". There appears some graphic
on the screen. The thing you see is a room. There are
10 rooms in horizontal and 10 rooms in vertical direction.
You can move in the room space with these keys:

arrow up - move one block up
arrow down - move one block down
arrow right - move one block right
arrow left - move one block left

When pressed with the 'shift' key, you will move one room instead
of one block. And with the 'alt' key you will move the corner of
the room space in the direction the arrow key indicates.

The basic idea is very simple. Just drag the mouse pointer
to the bottom of the screen when the block screen jumps up
and you can select the block with the left mouse button.
Then move the mouse pointer to the top of the screen and place
the block where you want it. The flashing rectangle will
indicate the block location. There is another flashing
rectangle in the block screen indicating the selected block.

In the room area you can pick the block under the mouse pointer
by pressing the ',' key.

If you make a mistake, you can undo and redo the last modification
by pressing the 'u' key.

In the "Room"-menu are some basic operations. "Cut" will cut the
current room to the clipboard and replaces the room with the
block 0. "Copy" copies the current room but doesn't clear it.
"Paste" places the contents of the clipboard to the current room.
"Fill" fills the current room with the selected block.
"Erase" fills the current room with the block 0.
"Flip" turns the room upside down. "Mirror" turns the room to its
mirror image. "Undo" has the same effect as the 'u' key.

The "Map"-menu has only two options at the moment. "Fill" fills
all the rooms with the selected block. "Erase" fills all the rooms
with the block 0. Because these operations can be dangerous,
you are asked whether to really perform them. Press the 'y' key
to proceed the action.

When creating rooms, you can test the consistency of the rooms by
moving one block at a time. Then move backwards one block and move
forward whole room with the 'shift' key. Another good method is
to copy the finished room, move to the next room, paste the
previous room from the clipboard and continue drawing.

To save the room map, just select "Save" from the "File"-menu.
A safety question is asked again.


Chared
------

For the first time, I strongly suggest that you load
a previously defined data to the editor and take a look
how everything is done.

The "File"-menu works the same way as in room editor.
Again, "Are you sure?"-questions are asked.

"Character"-menu allows you to copy, paste and erase
character data. You can select the edited character
from the player and 9 enemies.

"Action"-menu chooses the animation to define.
Only the player can pick objects. The enemies use
the first frame of the pick animation when they
stand still and haven't seen the player.

To define an animation, select the desired action and
move the mouse pointer to the bottow of the screen
and the frames screen pops up. Now select the frames
you want to use in the animation by moving the mouse
over the frame and clicking the left mouse button.

The action frame is set by holding the 'shift' key
while clicking a frame. At the moment only punching,
kicking and picking animations use the action frame.
Set the action frame to the point where the character's
fist or foot reaches the utmost position. The possible hit
is checked in this frame. As well set the frame that
indicates player picking an object as the action frame.

"Details"-menu is just what the name says. When you select
an option, a window pops on the screen. You can increase
and decrease the edited value by clicking the "Increase"
and "Decrease" buttons with the left mouse button. Click
"Ok" to set the values and continue.

The first option, "Speed" is not used in current version.
"Framedelay" is the delay time between the animation frames.
Usually the delay value 1 equals a 1/50th second.
"Energy" sets the starting energy of the character.
Don't set this too high for the enemies.
"Skill" sets the starting skill of the character.
"Hitpow" defines how much energy the hit drains from the target.
A kick always takes a bit more than a punch.
"Points" defines how much points the player gets after
killing the enemy. The player character doesn't use this value.
"Height" is a bit more compilcated variable. If it is 0,
the character can be hit to the upper and the lower side.
Value 1 means that the character takes only punches, so this
can be used for flying enemies or those who have armour
on their legs. Value 2 means that the character takes
only kicks, so this can be used for crawling and short enemies.


Objected
--------

Creating the objects, or at least drawing them
may be the most complicated thing in the editors.
The menus work much like in roomed and chared, so
I won't explain them any more. At current version
you only can define how much points and energy
the player gets or loses when he or she picks the
object. There are no keys or switches.

When you move the mouse to the bottom of the screen
to get the blocks screen appear you should notice
that you only can select the blocks in the very bottom
lines. Only these graphics can be used as objects.

In the default game graphics you see a first-aid-kit
in the leftmost corner. You can select this block
as the object graphic. Then there is kind of negative
shadow image next to it. This is called the mask graphic
of the object. Those who know the idea of graphic masking
can skip the next two paragraphs. I couldn't invent a better
and faster technique for the object graphic blitting.

Lets say you have drawn a ball image. You must put a
mask of the ball image next to the original image. The mask
is a two colour negative shadow of the original image.
The area which contains object graphics must have the
colour value 0 and the other are must have the highest
possible colour value, which is 31 at the moment.

I'll explain how to create the mask using Personal Paint.
First draw your object to the area of 16 x 16 pixels.
You may use any colours you want to. Then pick the area
of 16 x 16 pixels as a brush. Press the 'f3' key to set
'replace' mode. Place the new brush next to the original image.
Press the 'f1' key to  use the matte mode.
Select the highest or last colour (31) in the palette
with left mouse button and press the 'f2' key. Now the
brush should be just one colour shadow image of the object.
Then place the brush to the mask area again.
Then pick the two colour image as brush once more.
Select the "Brush"-menu, the submenu "Color" and
option "Complement". Now you should have a two-colour
inverted image of the object. Press the 'f3' key and
place the complete mask to the mask area.


Setter
------

This editor is the easiest one to use. Just load the
data before you place anything on the map. You can
put only one character in one room at the time.

To set the starting point of the player,
select "Player" from the "Character"-menu and
place it in the room. Notice that if you want to
change the starting room of the player you have
to erase the previous starting point of the player.
The editor doesn't check if there are several
starting points.

To set the ending point of the player,
press the 'e' key on the keyboard. A box reading
"exit" will appear.

To erase things, select "Erase" from the "Erase"-menu
and click the left mouse button over the room object
or character to erase.

You can move along the map almost the same way
as in the room editor, but you only need to use
the arrow keys.
