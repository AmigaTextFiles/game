
      Examiner Documentation



Development of Project

     At Christmas, 1992 (when I was still at secondary school), I upgraded
my old and trusty Commodore 64 to a new, shiny Amiga 1200.  I probably had
around 300 games for the C64, and 4 for the Amiga.  Luckily, a magazine
had recently given away a program called "Amos", a version of Basic, and
after closer inspection I found that although it had a strange interface,
it was just what I had wanted.  After experimenting with it a lot, I
decided to upgrade to "Amos Professional".

     It was around the summer of 1993 when I started to really miss all of
the games I had for the C64.  I decided that I would try to program a
version of a C64 game using Amos.  I chose a game called "Sensitive", as
it was one of my favourites, and also looked as though it could be quite
easy to implement.  I jumped straight in and started programming a
version, but I soon found out there were quite a few complexities, and
that every time I wanted to change something I ended up ripping the entire
program apart.  I soon lost interest and started programming something
else.

     When I started attending college, and computing projects were first
mentioned (around winter 1993, I think), I explained to my teacher the
game style, and asked whether it could be used as a project.  To my
surprise, he agreed, and I set about designing the program before actually
typing it in.  This made a big difference, and I found that the task was
made considerably easier by doing so.

     In the development of the system, I would design a section of it, and
if it could be run independently, I would then implement the the section
and test it.  The first section up and running was the actual game
sequence, which I viewed as the most important.  50Hz update was achieved
by carefully designing the system to waste as little time as possible,
using specially optimized commands, and hoping that Amos would be fast
enough to cope.  It was, and would even run fast enough when the
interpreter was used as well as when it was compiled.  The optimized
commands are ones such as Inc X (which is the same as X=X+1), which
correlate directly with machine code instructions on a 1:1 basis.

     The graphics for the game were all hand drawn by myself.  This was
done simply by using a paint program (DPaint 4), and using the Amos object
editor program to convert the images into a usable format.  All the music
for the program was also written by myself.  As I haven't a musical bone
in my body, the end results aren't really that good.  The music was
composed using a library of samples that I have collected over time, and a
music editor program (OctaMed 5).

     One of the first main bugs I came across was a flashing black bar at
the bottom of the status bar.  Not the most major of problems, but an
annoying one nonetheless.  After investigation, I found out that there was
a fault with the Amos double buffering system.  The status bar was on a
double buffered screen, to avoid any flicker when the score was updated. 
After much trial and error, I found out that to cure this all I had to do
was copy the physical screen to the logical screen when the screen was
first double buffered.  I think the problem was that the screen was so
small, there were problems when it was double buffered.

     The game was originally going to be called "Sensitive", after the C64
original game.  However, this had to change when, looking through the
November 1994 edition of Amiga User International, I reached the PD
(Public Domain) pages.  Whilst working on this project, I had had an idea
that I would eventually send it off to a few PD companies to distribute as
either PD or Shareware (more on this later).  But one of the PD disks was
called "Sensitive".  Looking at the screenshot accompanying the review it
was clear that somebody else had had the same idea as me, and had copied
the C64 game.  Without wishing to brag, it does look worse than mine.  A
copy of the review is included at the end of this section.  It also
mentions another game, which it describes as "a lot like" the version of
Sensitive it is reviewing.

     A consequence of this discovery is that if I ever want to distribute
the game, it would be best to do so with another name.  I chose the name
"Cantaloupe", purely because I like it.  (Incidently, continuing the fruit
theme, I plan to call my next game "Kumquat")  This change in name was
quite annoying, as I had all ready hand-drawn a "Sensitive" title for the
title screen and instruction pages, and I had to go through the two
programs changing all the references to the previous title.

     Possibly one of the most annoying bugs I have ever come across whilst
programming happened towards the end of the project.  I have been
programming for a good number of years, and one of the things that I have
found out is that the computer is always right, and always has a reason
for producing a bug, no matter how much I try to convince myself that it
doesn't.  The bug in question was so maddening exactly because of this; it
was the computer's fault.

     The problem was this: the program ran without problem when the
interpreter was used.  However, when I used the Amos Pro Compiler, and ran
the compiled program, I would start the game and the player would not be
able to move.  The rest of the program, the title and options screens,
worked, but once the game was began, it all stopped.  I shouted at the
computer for several minutes before starting on a rather complicated and
time consuming debugging routine.  Few of my usual debugging techniques
were useful, as the problem only occurred when the program was compiled.

     I started by putting certain points in the program where a key had to
be pressed to continue.  This would let me know that certain parts of the
program were being reached, and help me narrow down where the mistake
could be.  To help me know which temporary stop point I am at (some were
in loops), I began playing a bell sound just before them, of different
frequencies.  This didn't mess up the screen display, and is easy in Amos:
I simply used the command Bell X, where X was the frequency.  After
modifying the program a number of times, I had so many stop points,
different frequencies weren't enough to differentiate them.  I started
using speech (Amos command: Say A$, where A$ is the string to speak) to
tell me where the program was up to, and very soon I had a program that
was literally telling me where it was up to as it went along.

     There was also a lot of time lost between each modification of the
program.  Each time, the editor had to be loaded, the program would have
to be loaded into it, the modifications made to it, the program saved back
out again, and the editor quitted.  The compiler would then be loaded, the
modified program loaded, compiled, and saved out again.  The compiler was
then ended, and the compiled program loaded and tested.  This whole
procedure took about ten minutes to work through each time I wanted to
change the program.

     In the end, after an irritating 2-3 hours, I found the cause of the
problems through an educated guess and a lot of trial and error.  The
routine that surveyed the exits for each tile wasn't working.  The line:

     SURVEY(1)=True

     Would not store the value -1 in SURVEY(1), as it should do, but a
value of minus two billion.  Instead of using the values of True or False
(-1 or 0), I used the explicit values 1 and 0.  The program worked
correctly after this, although I have no idea why it should.


Timetable of Events

Summer 93: First version of Sensitive written and abandoned.

Winter 93/94: Second version design began.  Special thought given to how
game could be improved.

Spring 94: In game graphics designed.  Main game loop design finalised. 
Game sequence can be played (one level only)

Summer 94: The analysis and design notes formalised and written up.  Work
began on programming and drawing the title screen sequence, and also the
music.

Autumn 94: Title screen finished and working (with music).  File handling
also implemented.  File handling, the title screen, and the game sequence
were combined and working.  Interface system: look and feel decided on,
and implementation began.  Found out about existence of two similar games.

Winter 94:  Interface system complete.  Main structure of level editor
programmed, incorporating the interface.  Most options working.  Designs
of screens finalised and implemented.

Spring 95:  Level editor completely finished, all options working.  Levels
are designed, and the whole system is tested with as many different types
of levels as possible.  User guide, implementation, and maintenance
documentation all started.  In March, whole project is complete, and
handed in.


Does the Implementation match the design?

     In my opinion, I feel that the end system closely resembles that
which was set out in the design section of the project.  There were a few
aspects of the design that had to be re-thought during the implementation
(notes for these changes are in the Implementation and Testing section),
but otherwise the two systems are very close.  Looking back at the
specification (section 1.4), I feel that every point of it has been
successfully reached.



Evaluation

     I am very happy with the way the program has turned out, and it is a
program that I actually plan to use.  It is the second major program I
have written with Amos (the first was "Splel Chicker", and will be
mentioned later), and I am impressed at how easily programs can be made to
look almost professional with it.  However, there is still quite a lot
that could be done with it, and some of these ways are considered below.


System Extension

     There are many ways in which the system could be expanded:

- More tile types.  Although I had difficulty thinking of any more, there
are bound to be some that improve the game.

- Better level compression methods.  The ones in place at the moment are
fine, but there will probably be many better ways of compressing data that
I haven't thought of.  As long as it doesn't take an excessive amount of
time, this would be useful.

- Improved music.  The inclusion of music written by somebody more
qualified to do so would improve the title sequence no end.  At the
moment, I am also probably violating some copyright agreement, because I
have probably used other people's samples when writing it.

- Improved graphics.  The graphics are, at the moment, functional. 
However, I feel they could certainly be prettier.  Again, a graphics
artist would do a better job on the in-game and presentational graphics,
and make the game more pleasing to look at.  It will be very easy to
import new graphics and music, as the routines to handle them have all
ready been written.

- More graphics.  Quite late on in the project, I thought it might be a
good to have several in-game graphics sets.  The level designer would be
able to decide which graphics set to be used for each level.  A different
graphics set would simply give a different look and colour scheme to each
of the tiles in the level, and maybe even the player graphics.

- A sub-game.  Between each stage, there could a small sub-game where the
object is to collect as many bonus points as possible.  I have no idea
what the sub-game should be like, but it should make the game more
interesting.

- On-line help.  The level editor could contain an option to display
instructions about a particular program function when needed.  This would
help to make the system a little easier to use.

- Hypertext documentation.  The on-disk documentation that would be
supplied with the programs could be in a hypertext format instead of just
a normal text file.  This would let the user navigate his way through the
instructions by clicking on certain parts of the text to receive more
information about the subject clicked on.






The Future

     I do plan to distribute the game as some form of PD software.  I have
done this once before with another of my programs, quite successfully.  It
was basically a stand-alone spell checker, with options to solve anagrams,
subgrams, crosswords, etc. as well.  It was accepted by a magazine, Amiga
Format, and distributed on a coverdisk with a limited dictionary size.  I
left a note on the disk that if anybody wanted a version with a much
larger dictionary, they should send some money to me.  So far I have had
about sixty responses from this, and made a tidy profit.

     To do something similar with this system, I could distribute a disk
with only the game and 3 or 4 stages on it.  The upgraded version, which I
would send in return for a set amount of money, would have the game, the
level editor, and about 20 new stages (100 levels).  I will think
seriously about this, and if I decide to go ahead, I would first send it
to magazines, because of their large circulations (100,000+ in some
cases), and eventually PD libraries.

     Also, an interesting idea could be to port the program over to
another computer format.  As it is written in Basic, if a similar version
of Basic was to come out on the PC platform, I could try converting the
system to work on them.  The main differences, I would suspect, would be
the graphics routines: I would simply have to write an extra set of
procedures at the end that will replace the native Amos commands.  The
main advantage of converting it to PC format would be an increased user
base (and, hopefully, increased profits if I were to use the shareware
scheme).
