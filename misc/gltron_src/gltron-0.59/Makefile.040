# Generated automatically from Makefile.in by configure.
# Makefile for gltron

SHELL = /bin/sh
CC = gcc
OPT = -O3 -ffast-math -funroll-loops -fomit-frame-pointer -m68040
CFLAGS = -c -Wall -DSOUND
GL_LIBS = -lm -lgl -lpng -lz
XLIBS = 
SNDLIBS = 

GLTRON_INSTALLDIR = /usr/bin
GLTRON_HOME = /usr/share/games/gltron

CFILES = \
	sgi_texture.c \
	png_texture.c \
	switchCallbacks.c \
	gui.c \
	pause.c \
	computer.c \
	engine.c \
	gltron.c \
	graphics.c \
	gamegraphics.c \
	input.c \
	settings.c \
	texture.c \
	load_texture.c \
	fonttex.c \
	fonts.c \
	menu.c \
	file.c \
	model.c \
	modelgraphics.c \
	screenshot.c \
	mtllib.c \
	geom.c \
	system.c \

SOUND_CFILES = \
	sound.c

OBJ = $(CFILES:.c=.o040)
OBJ_SOUND = $(OBJ) $(SOUND_CFILES:.c=.o040)

all: gltron.040

%.o040: %.c
	$(CC) $(CFLAGS) $(OPT) $< -o $@

gltron.040: $(OBJ_SOUND)
	$(CC) $(OPT) -o gltron.040 $(OBJ_SOUND) $(GL_LIBS) $(XLIBS) $(SNDLIBS)

INSTALL_FILES = gltron
DATA_FILES = data/* sounds/*wav

install: $(INSTALL_FILES)
	if [ ! -d $(GLTRON_INSTALLDIR) ] ; then \
	    mkdir -p $(GLTRON_INSTALLDIR) ; \
	fi
	if [ ! -d $(GLTRON_HOME) ] ; then \
	    mkdir -p $(GLTRON_HOME) ; \
	fi
	cp -f gltron $(GLTRON_INSTALLDIR)/gltron
	cp -R $(DATA_FILES) $(GLTRON_HOME)

clean: 
	rm -f *\.o040 gltron.040 core
