
(*#################################*)
 DEFINITION MODULE CapturePlayerIO;        (* $VER: CapturePlayerIO.def 0.0 (16.12.2010) *)
(*#################################*)

FROM CaptureSpecs  IMPORT GamePlayers, Point;
FROM DynStr0       IMPORT DynStr;

 PROCEDURE InitPlayerIO(RedPlayerExe, BluePlayerExe:DynStr);

 PROCEDURE OutGameState(whichPlayer:GamePlayers);

 PROCEDURE InGameMoves(whichPlayer:GamePlayers; VAR Bump1Accel, Bump2Accel:Point; VAR SledTurn:REAL):BOOLEAN;

(*
Game state send each turn:

<turn number>
<number of pucks>
<x of puckA center> <y of puckA center> <puckA speed X component> <puckA speed Y component> <puckA color number>
<x of puckB center> <y of puckB center> <puckB speed X component> <puckB speed Y component> <puckB color number>
<x of puckC center> <y of puckC center> <puckC speed X component> <puckC speed Y component> <puckC color number>
...
<x of puckN center> <y of puckN center> <puckN speed X component> <puckN speed Y component> <puckN color number>
<number of bumpers>
<x of (Red) bumperA center> <y of (Red) bumperA center> <(Red) bumperA speed X component> <(Red) bumperA speed Y component>
<x of (Red) bumperB center> <y of (Red) bumperB center> <(Red) bumperB speed X component> <(Red) bumperB speed Y component>
<x of (Blue) bumperA center> <y of (Blue) bumperA center> <(Blue) bumperA speed X component> <(Blue) bumperA speed Y component>
<x of (Blue) bumperB center> <y of (Blue) bumperB center> <(Blue) bumperB speed X component> <(Blue) bumperB speed Y component>
<number of sleds>
<x of sledA center> <y of sledA center> <sledA direction in radians>
<number of points specifying sledA tail> <x of p0> <y of p0> <x of p1> <y of p1> ... <x of pn> <y of pn>
<x of sledB center> <y of sledB center> <sledB direction in radians>
<number of points specifying sledB tail> <x of p0> <y of p0> <x of p1> <y of p1> ... <x of pn> <y of pn>

<turn number> of -1 signals game over

Note: the Blue player is sent his data transformed as if he were playing Red (and vice versa) so that the
      player code can be written as if it were the Red player only.
*)

END CapturePlayerIO.

