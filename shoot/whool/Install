; $VER: Whools-Installer Version 1.4 by Philip Steffan (8.6.97)
; -------------------------------------------------------------

(if (= @language "deutsch")

(
(set #introduction
(cat "\n\nDieses Skript installiert\nW·H·O·O·L·S\n auf Ihrer Festplatte. "
     "\n\n\nWhools © 1996/97 by Pointed Ear Software Design."
     ))

(set #askdir-help
(cat "Wählen Sie das Verzeichnis, in dem Whools installiert werden soll. "
     "\nEin Unterverzeichnis namens \"Whools\" wird automatisch erstellt. "
     ))

(set #icon-help
(cat "Wenn Sie MagicWorkbench (© Martin Huttenloher) benutzen, installieren "
     "Sie bitte die mitgelieferten achtfarbigen Piktogramme für die Anleitung "
     "und das Whools-Hauptprogramm. "
     "\nAußerdem sind Piktogramme im NewIcons-Stil mitgeliefert. Um diese zu "
     "nutzen, müssen sie aber den NewIcons-Patch installiert haben."
     ))

(set #wohin
(cat "Wo soll das \"Whools\"-Verzeichnis erstellt werden ?"
     ))

(set #iconstyle
(cat "Wählen Sie Ihren bevorzugten Piktogramm-Stil."
     ))

(set #wannasource
(cat "Wollen Sie die Quelltextdateien kopieren? (Aus Platzmangel nicht in diesem Archiv)"
     ))

(set #asklibs
(cat "Die benötigte \"ptreplay.library\" wird nach LIBS: kopiert."
     ))

(set #libs-help
(cat "\"Whools\" benutzt die \"ptreplay.library\" für das Abspielen der Musik. "
     "Installieren Sie die mitgelieferte Version nur, wenn Sie keine neuere "
     "Version besitzen. "
     "Bitte lesen Sie die Textdatei \"ptreplay.readme\" für weitere Informationen."
     ))

(set #source-help
(cat "Die mitgelieferten Quelltextdateien sind für Assembler-Programmierer "
     "gedacht, die an programminternen Funktionen interessiert sind. Für "
     "das eigentliche Spiel werden diese Dateien nicht benötigt."
     ))

(set #endmsg1
(cat "\"Whools\" wurde erfolgreich installiert und befindet sich im Verzeichnis\n\n "
     ))

(set #endmsg2
(cat "\n\nWollen Sie jetzt die Anleitung lesen ?"
     ))

(set #nomultiview
(cat "\nMultiview konnte nicht gefunden werden."
     ))
)
; if not deutsch then use english (locale texts welcome!)
(

(set #introduction
(cat "\n\nThis script will install\nW·H·O·O·L·S\n on your harddisk. "
     "\n\n\nWhools © 1996/97 by Pointed Ear Software Design."
     ))

(set #askdir-help
(cat "Choose the directory you want Whools to be installed in. "
     "\nA subdirectory called \"Whools\" will be created automatically. "
     ))

(set #icon-help
(cat "If you use MagicWorkbench (© Martin Huttenloher), please install the "
     "supplied 8-color icons for the Whools guide and executable files. "
     "\nThis package also contains NewIcons-style icons. Please note "
     "that you have to have the NewIcons patch installed to use them. "
     ))

(set #wohin
(cat "Where do you want the \"Whools\" drawer to be created  ?"
     ))

(set #iconstyle
(cat "Select your preferred icon style."
     ))

(set #wannasource
(cat "Do you want to copy the source code files? (Not included due to lack of space)"
     ))

(set #asklibs
(cat "Copying the needed \"ptreplay.library\" to LIBS:."
     ))

(set #libs-help
(cat "\"Whools\" uses the \"ptreplay.library\" to play its game music. "
     "Please install the included version only if you do not have a newer "
     "version installed. "
     "Have a look at the text file \"ptreplay.readme\" for further information."
     ))

(set #source-help
(cat "The included source code files are intended to help assembler "
     "programmers who are interested in internal program functions. "
     "They are not needed for playing the game itself. "
     ))

(set #endmsg1
(cat "\"Whools\" has been successfully installed to \n\n "
     ))

(set #endmsg2
(cat "\n\nDo you want to read the guide file now?"
     ))

(set #nomultiview
(cat "\nMultiview was not found."
     ))

)
)

;---------------------------
; the fun has just begun...

(message #introduction)
(welcome)

(complete 0)


; now let´s set the dir...

(set #zieldir
   (askdir
      (prompt #wohin)
      (help #askdir-help)
      (default "Ram:")
   )
)

(set #root #zieldir)
(set #zieldir (tackon #zieldir "Whools"))
(set #quelle "")
(set #guide (tackon #zieldir "Whools.guide"))

; which icons would you like with the hors d´oevre, madame ?

(set @auswahl
  (askchoice
    (prompt #iconstyle)
    (help #icon-help)
    (choices "Workbench-Standard" "MagicWorkbench" "NewIcons")
    (default 1)
  )
)


; getting tough now: The source files or not the source files!!!

(set #scfiles
  (askbool
    (prompt #wannasource)
    (help #source-help)
  )
)

; first of all copy the library

;(if
;   (exists "LIBS:")
;   (copylib (prompt #asklibs)
;            (help #libs-help)
;            (source (tackon #quelle "libs/ptreplay.library"))
;            (dest "LIBS:") 
;            (confirm)
;   )
;)

; go on make the dir if it had not existed before (f... the tempus rules)

(if
   (= (exists #zieldir) 0)
   (makedir #zieldir)
)

(complete 15)


; now copy all the junk

(
   (set #pattern "Whools#?")
   (copyfiles (source #quelle) (dest #zieldir) (pattern #pattern))
)

(complete 25)

(
   (set #pattern "data")
   (copyfiles (source #quelle) (dest #zieldir) (pattern #pattern))
)

(complete 85)

(if (= #scfiles 1) ; The user said yip!
  
 ((set #pattern "Sour#?")
  (copyfiles (source #quelle) (dest #zieldir) (pattern #pattern))
))

(complete 95)


; Now copy the icons ... and here she goes!

(if (= @auswahl 0) ;i.e. Standard :-<

 ((set #icon "Standard.info")
  (set #quelle (tackon #quelle "icons"))
  (copyfiles (source #quelle) (dest #root) (choices #icon))
  (rename (tackon #root "Standard.info") (tackon #root "Whools.info"))

  (set #pattern "Whoo#?")
  (copyfiles (source #quelle) (dest #zieldir) (pattern #pattern))
 )
)


(if (= @auswahl 1) ;i.e. MagicWB :->

 ((set #icon "Icons.info")
  (copyfiles (source #quelle) (dest #root) (choices #icon))
  (rename (tackon #root "Icons.info") (tackon #root "Whools.info"))
 )
)


(if (= @auswahl 2) ;i.e. NewIcons :-|

 ((set #icon "NewIcons.info")
  (set #quelle (tackon #quelle "icons"))
  (copyfiles (source #quelle) (dest #root) (choices #icon))
  (rename (tackon #root "NewIcons.info") (tackon #root "Whools.info"))

  (set #pattern "Whoo#?")
  (copyfiles (source #quelle) (dest #zieldir) (pattern #pattern))

 )
)


(complete 100)


(set #readguide
 (askbool
  (prompt (cat #endmsg1 #zieldir #endmsg2))
  (help #endmsg2)
 )
)

(if (= #readguide 1)
    (if (exists "SYS:UTILITIES/MULTIVIEW")
    (run "run SYS:UTILITIES/MULTIVIEW" #guide)
    (message #nomultiview)
    )
)


(exit (quiet))
