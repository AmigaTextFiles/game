***************
*** 1,8
  /*       D-Day: Normandy by Vipersoft
   ************************************
   *   $Source: /usr/local/cvsroot/dday/src/g_dll.win32.c,v $
!  *   $Revision: 1.2 $
!  *   $Date: 2002/06/04 19:49:45 $
   *
   ***********************************
  
--- 1,8 -----
  /*       D-Day: Normandy by Vipersoft
   ************************************
   *   $Source: /usr/local/cvsroot/dday/src/g_dll.win32.c,v $
!  *   $Revision: 1.4 $
!  *   $Date: 2002/07/23 22:48:27 $
   *
   ***********************************
  
***************
*** 26,31 ****
  */
  
  #include "g_local.h"
  #include "g_dll.h"
  #include "u_findfunc.h"
  #include "u_entmgr.h"
--- 26,32 ----
  */
  
  #include "g_local.h"
+ #include "g_cmds.h"
  #include "g_dll.h"
  #include "u_findfunc.h"
  #include "u_entmgr.h"
***************
*** 42,48 ****
    filename  {entrypoint_name|entrypoint_index} version [message_digest]
  */
  
! struct userdll_list_node *LoadUserDLLs(edict_t *ent, int team)
  {
      //char buffer[512];
      //char libname[128];
--- 43,49 ----
    filename  {entrypoint_name|entrypoint_index} version [message_digest]
  */
  
! userdll_list_node_t *LoadUserDLLs(edict_t *ent, int team)
  {
      //char buffer[512];
      //char libname[128];
***************
*** 51,57 ****
      //char version[32];
      //char *ptr, *tmp;
      int  i;
!     struct userdll_list_node *unode;
  	qboolean IsDLLName=false;
  
  	// the "team" var is unused since its really a linux-only element
--- 52,58 ----
      //char version[32];
      //char *ptr, *tmp;
      int  i;
!     userdll_list_node_t *unode;
  	qboolean IsDLLName=false;
  
  	// the "team" var is unused since its really a linux-only element
***************
*** 63,70 ****
  		IsDLLName=true;
  	}
  
! 	if(!(unode = (struct userdll_list_node*)
! 		gi.TagMalloc(sizeof(struct userdll_list_node), TAG_GAME)))
  	{
  		gi.dprintf("memory allocation failed for library <%s>\n",ent->pathtarget);
  		return NULL;
--- 64,71 ----
  		IsDLLName=true;
  	}
  
! 	if(!(unode = (userdll_list_node_t*)
! 		gi.TagMalloc(sizeof(userdll_list_node_t), TAG_GAME)))
  	{
  		gi.dprintf("memory allocation failed for library <%s>\n",ent->pathtarget);
  		return NULL;
***************
*** 138,144 ****
  
  void (*FindGameFunction(char *t));
  
! int InitializeUserDLLs(struct userdll_list_node *unode,int teamindex)
  {
          
          int numLibsInit, version;
--- 139,145 ----
  
  void (*FindGameFunction(char *t));
  
! int InitializeUserDLLs(userdll_list_node_t *unode,int teamindex)
  {
          
          int numLibsInit, version;
***************
*** 206,214 ****
  
  void ClearUserDLLs()
  {
!         struct userdll_list_node *unode, *tmp;
  
!         gi.dprintf("Clearing user DLL's\n");
          unode = GlobalUserDLLList;
          while(unode)
          {
--- 207,215 ----
  
  void ClearUserDLLs()
  {
!         userdll_list_node_t *unode, *tmp;
  
!         gi.dprintf("Clearing user DLLs\n");
          unode = GlobalUserDLLList;
          while(unode)
          {
***************
*** 231,237 ****
  
  void LevelStartUserDLLs(edict_t *ent)
  {
!         struct userdll_list_node *unode;
  
          unode = GlobalUserDLLList;
          while(unode)
--- 232,238 ----
  
  void LevelStartUserDLLs(edict_t *ent)
  {
!         userdll_list_node_t *unode;
  
          unode = GlobalUserDLLList;
          while(unode)
***************
*** 243,249 ****
  
  void LevelExitUserDLLs()
  {
!      struct userdll_list_node *unode;
  
       unode = GlobalUserDLLList;
       while(unode)
--- 244,250 ----
  
  void LevelExitUserDLLs()
  {
!      userdll_list_node_t *unode;
  
       unode = GlobalUserDLLList;
       while(unode)
***************
*** 258,264 ****
  
  void PlayerSpawnUserDLLs(edict_t *ent)
  {
!         struct userdll_list_node *unode;
  
          unode = GlobalUserDLLList;
          while(unode)
--- 259,265 ----
  
  void PlayerSpawnUserDLLs(edict_t *ent)
  {
!         userdll_list_node_t *unode;
  
          unode = GlobalUserDLLList;
          while(unode)
***************
*** 270,276 ****
  
  void PlayerDiesUserDLLs(edict_t *self, edict_t *inflictor, edict_t *attacker, int damage, vec3_t point)
  {
!         struct userdll_list_node *unode;
  
          unode = GlobalUserDLLList;
          while(unode)
--- 271,277 ----
  
  void PlayerDiesUserDLLs(edict_t *self, edict_t *inflictor, edict_t *attacker, int damage, vec3_t point)
  {
!         userdll_list_node_t *unode;
  
          unode = GlobalUserDLLList;
          while(unode)
