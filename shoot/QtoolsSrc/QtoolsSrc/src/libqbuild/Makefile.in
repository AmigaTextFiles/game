# Generated automatically from Makefile.in by configure.
# MakeFile for QuakeTools

QBLIB = @top_srcdir@/lib/libqbuild.a
QBLIBP = @top_srcdir@/lib/libqbuild_p.a
QBLIBV = @top_srcdir@/lib/libqbuild_v.a
QBLIBB = @top_srcdir@/lib/libqbuild_b.a

#
# buildings
#
default: $(QBLIB)						# build the default useable library
profile: $(QBLIBP)						# build the library with later profiling capabilities
coverage: $(QBLIBV)						# build the library to analyse code-/execution-streams
branch: $(QBLIBB)						# rebuild the library after branches have been analysed
	-mv -f $(QBLIBB) $(QBLIB)
all: lib profile coverage					# build the complete package

#
# cleanups
# 
clean:								# clean the default library
	-rm -f $(QBLIB) $(QBOBJ)
cleanprofile:							# clean the profile library
	-rm -f $(QBLIBP) $(QBOBJP)
cleancoverage:							# clean the analyse library
	-rm -f $(QBLIBV) $(QBOBJV) $(QBOBJBB)
cleanbranch:							# clean the post-analysed branch-optimized library
	-rm -f $(QBLIB) $(QBOBJ)
cleanall: clean cleancoverage cleanprofile cleanbranch		# clean everything

#
# dists
#
distclean: cleanall						# clean even the configured files
	-rm -f Makefile

backup: Makefile
	cp Makefile Makefile.bak
restore: Makefile.bak
	cp Makefile.bak Makefile
	rm Makefile.bak

#
# installations
#  it doesnt make sence to install the analyse-library
#
install: default						# install the default library
	@INSTALL@ $(QBLIB) @libdir@
installprofile: profile						# install the profile library
	@INSTALL@ $(QBLIBP) @libdir@
installall: install installprofile				# install the everything library

#
# debugging/analysing
#
analyse:
	for i in $(QBSRC); do \
	  gcov -f -l -b $$i >$$i.branch; \
	done
analyseclean:
	-rm -f $(QBOBJDA) $(QBOBJBR) *.gcov

#
# rules
#
include	@top_srcdir@/src/Makefile-rules

#
# sources/objects/libraries
#
QBSRC =	brush.c csg4.c merge.c light.c mdl.c nodraw.c outside.c \
	portals.c qbsp.c qcc.c qccparse.c rad.c region.c solidbsp.c spr.c \
	surfaces.c tjunc.c vis.c winding.c writebsp.c writemdl.c writespr.c

QBOBJ = $(QBSRC:.c=.o)
QBOBJP = $(QBSRC:.c=_p.o)
QBOBJV = $(QBSRC:.c=_v.o)
QBOBJB = $(QBSRC:.c=_b.o)
QBOBJDA = $(QBSRC:.c=.da)
QBOBJBR = $(QBSRC:.c=.branch)
QBOBJBB = $(QBSRC:.c=.b*)

@top_srcdir@/lib/libqbuild.a: $(QBOBJ)
	$(AR) rcv $@ $?
	$(RAN) $@
@top_srcdir@/lib/libqbuild_p.a: $(QBOBJP)
	$(AR) rcv $@ $?
	$(RAN) $@
@top_srcdir@/lib/libqbuild_v.a: $(QBOBJV)
	$(AR) rcv $@ $?
	$(RAN) $@
@top_srcdir@/lib/libqbuild_b.a: $(QBOBJB)
	$(AR) rcv $@ $?
	$(RAN) $@

#
# dependencies
#
depend:
	@MKD@ -m -o*.o $(INCL) $(QBSRC)

# DO NOT DELETE
