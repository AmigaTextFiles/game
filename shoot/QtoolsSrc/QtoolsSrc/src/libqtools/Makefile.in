# Generated automatically from Makefile.in by configure.
# MakeFile for QuakeTools

QTLIB = @top_srcdir@/lib/libqtools.a
QTLIBP = @top_srcdir@/lib/libqtools_p.a
QTLIBV = @top_srcdir@/lib/libqtools_v.a
QTLIBB = @top_srcdir@/lib/libqtools_b.a

#
# buildings
#
default: $(QTLIB)						# build the default useable library
profile: $(QTLIBP)						# build the library with later profiling capabilities
coverage: $(QTLIBV)						# build the library to analyse code-/execution-streams
branch: $(QTLIBB)						# rebuild the library after branches have been analysed
	-mv -f $(QTLIBB) $(QTLIB)
all: lib profile coverage					# build the complete package

#
# cleanups
# 
clean:								# clean the default library
	-rm -f $(QTLIB) $(QTOBJ)
cleanprofile:							# clean the profile library
	-rm -f $(QTLIBP) $(QTOBJP)
cleancoverage:							# clean the analyse library
	-rm -f $(QTLIBV) $(QTOBJV) $(QTOBJBB)
cleanbranch:							# clean the post-analysed branch-optimized library
	-rm -f $(QTLIBB) $(QTOBJB)
cleanall: clean cleancoverage cleanprofile cleanbranch		# clean everything

#
# dists
#
distclean: cleanall						# clean even the configured files
	-rm -f Makefile

backup: Makefile
	cp Makefile Makefile.bak
restore: Makefile.bak
	cp Makefile.bak Makefile
	rm Makefile.bak

#
# installations
#  it doesnt make sence to install the analyse-library
#
install: default						# install the default library
	@INSTALL@ $(QTLIB) @libdir@
installprofile: profile						# install the profile library
	@INSTALL@ $(QTLIBP) @libdir@
installall: install installprofile				# install the everything library

#
# debugging/analysing
#
analyse:
	for i in $(QTSRC); do \
	  gcov -f -l -b $$i >$$i.branch; \
	done
analyseclean:
	-rm -f $(QTOBJDA) *.branch *.gcov bsp/*.gcov

#
# rules
#
include	@top_srcdir@/src/Makefile-rules

#
# sources/objects/libraries
#
QTSRC =	3DS.c bsp.c crc.c graphics.c map.c misc.c memory.c mip.c pak.c \
	parse.c raw.c script.c TDDD.c wad.c

QTOBJ = $(QTSRC:.c=.o)
QTOBJP = $(QTSRC:.c=_p.o) math_p.o
QTOBJV = $(QTSRC:.c=_v.o)
QTOBJB = $(QTSRC:.c=_b.o)
QTOBJDA = $(QTSRC:.c=.da)
QTOBJBB = $(QTSRC:.c=.b*)

@top_srcdir@/lib/libqtools.a: $(QTOBJ)
	$(AR) rcv $@ $?
	$(RAN) $@
@top_srcdir@/lib/libqtools_p.a: $(QTOBJP)
	$(AR) rcv $@ $?
	$(RAN) $@
@top_srcdir@/lib/libqtools_v.a: $(QTOBJV)
	$(AR) rcv $@ $?
	$(RAN) $@
	-mv -f $(QTCOV) bsp
@top_srcdir@/lib/libqtools_b.a: $(QTOBJB)
	$(AR) rcv $@ $?
	$(RAN) $@
	-mv -f $(QTCOV) bsp

#
# dependencies
#
depend:
	@MKD@ -m -o*.o $(INCL) $(QTSRC)

# DO NOT DELETE
