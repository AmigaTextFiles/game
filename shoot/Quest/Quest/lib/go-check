; Some checks to make sure Quake is alright.
; returns: 0 = ok, 5 = something is wrong
; The ENV variable QUAKE will contain the name of the Quake executable.

if not exists quakedir:
  echo "Please set QUAKEDIR: assign to your Quake directory."
  quit 5
endif

set oldcheckdir `cd`
cd Quakedir:

if not exists id1
  echo "This is not the Quake directory."
  cd $oldcheckdir
  quit 10
endif


if exists quest:lib/go-exe-check.rexx

  rx quest:lib/go-exe-check.rexx Quake.exe
  if warn
    rx quest:lib/go-exe-check.rexx Quake
    if warn
      echo "can't find quake executable"
      cd $oldcheckdir
      quit 5
    else
      setenv QUAKE Quake
    endif
  else
    setenv QUAKE Quake.exe
  endif

else

  echo "go-exe-check.rexx is not installed"
  setenv QUAKE Quake

endif


if not exists id1/maps
  makedir id1/maps
endif

if exists quest.tmp
  delete quest.tmp all force quiet
endif

cd $oldcheckdir
