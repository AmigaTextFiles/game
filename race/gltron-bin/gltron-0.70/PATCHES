--- gltron-0.70/nebu/video/video_system.c.bak	Mon Jul 21 09:18:57 2003
+++ gltron-0.70/nebu/video/video_system.c	Fri Aug 18 14:50:46 2006
@@ -90,13 +90,15 @@
   SDL_Surface *temp;
   int i;
 
-  temp = SDL_CreateRGBSurface(SDL_SWSURFACE, x, y, 24,
 #if SDL_BYTEORDER == SDL_LIL_ENDIAN
+  temp = SDL_CreateRGBSurface(SDL_SWSURFACE, x, y, 24,
 			      0x000000FF, 0x0000FF00, 0x00FF0000, 0
+			      );
 #else
+  temp = SDL_CreateRGBSurface(SDL_SWSURFACE, x, y, 24,
 			      0x00FF0000, 0x0000FF00, 0x000000FF, 0
-#endif
 			      );
+#endif
 
   if (temp == NULL)
     return -1;
--- gltron-0.70/nebu/filesystem/directory.c.bak	Sat Jun 21 09:12:04 2003
+++ gltron-0.70/nebu/filesystem/directory.c	Fri Aug 18 14:40:57 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "base/nebu_types.h"
 
 #include <stdio.h>
--- gltron-0.70/nebu/base/system.c.bak	Sun Jul  6 21:27:13 2003
+++ gltron-0.70/nebu/base/system.c	Sat Sep 16 13:22:02 2006
@@ -2,6 +2,7 @@
 
 #include "SDL.h"
 #include <stdio.h>
+#include "../../src/include/audio/audio.h"
 
 Callbacks *current = 0;
 static int return_code = -1;
@@ -11,6 +12,9 @@
   fprintf(stderr, "[system] shutting down SDL now\n");
   SDL_Quit();
   fprintf(stderr, "[system] exiting application\n");
+#ifdef __MORPHOS__
+  Sound_shutdown();
+#endif
 }
 
 unsigned int SystemGetElapsedTime() {
--- gltron-0.70/lua/src/lobject.c.bak	Thu Feb 14 10:46:59 2002
+++ gltron-0.70/lua/src/lobject.c	Fri Aug 18 23:36:16 2006
@@ -9,6 +9,7 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
+#include <locale.h>
 
 #include "lua.h"
 
@@ -67,7 +68,9 @@
 
 int luaO_str2d (const char *s, Number *result) {  /* LUA_NUMBER */
   char *endptr;
-  Number res = lua_str2number(s, &endptr);
+  Number res;
+  setlocale(LC_NUMERIC, "C");
+  res = lua_str2number(s, &endptr);
   if (endptr == s) return 0;  /* no conversion */
   while (isspace((unsigned char)*endptr)) endptr++;
   if (*endptr != '\0') return 0;  /* invalid trailing characters? */
--- gltron-0.70/src/game/menu.c.bak	Fri Dec 12 09:01:15 2003
+++ gltron-0.70/src/game/menu.c	Fri Aug 18 16:02:37 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include "Nebu_scripting.h"
 
--- gltron-0.70/src/game/init.c.bak	Fri Dec 12 09:01:15 2003
+++ gltron-0.70/src/game/init.c	Fri Aug 18 16:01:33 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "filesystem/path.h"
 #include "game/init.h"
 #include "game/gltron.h"
--- gltron-0.70/src/game/gui.c.bak	Sat Dec 13 17:01:24 2003
+++ gltron-0.70/src/game/gui.c	Fri Aug 18 16:00:23 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include <stdio.h>
 #include <stdlib.h>
 #include <math.h>
--- gltron-0.70/src/game/globals.c.bak	Fri Dec  5 12:45:38 2003
+++ gltron-0.70/src/game/globals.c	Fri Aug 18 15:58:43 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "game/game.h"
 #include "video/video.h"
 #include "input/input.h"
--- gltron-0.70/src/game/game.c.bak	Sat Jul 19 17:46:42 2003
+++ gltron-0.70/src/game/game.c	Fri Aug 18 15:57:49 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "game/gltron.h"
 #include "game/timesystem.h"
 
--- gltron-0.70/src/game/event.c.bak	Fri Dec  5 12:45:38 2003
+++ gltron-0.70/src/game/event.c	Fri Aug 18 15:56:37 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include <math.h>
 #include <float.h>
 
--- gltron-0.70/src/game/engine.c.bak	Sat Dec 13 17:00:14 2003
+++ gltron-0.70/src/game/engine.c	Fri Aug 18 15:55:28 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "game/game.h"
 #include "video/video.h"
 #include "audio/audio.h"
--- gltron-0.70/src/game/credits.c.bak	Sat Jul 12 18:15:17 2003
+++ gltron-0.70/src/game/credits.c	Fri Aug 18 15:55:01 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "game/gltron.h"
 
 static int coffset;
--- gltron-0.70/src/game/computer.c.bak	Sun Dec 14 09:03:15 2003
+++ gltron-0.70/src/game/computer.c	Fri Aug 18 15:53:17 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "game/game.h"
 #include "game/ai.h"
 #include "video/video.h"
--- gltron-0.70/src/game/scripting_interface.c.bak	Fri Dec  5 12:45:38 2003
+++ gltron-0.70/src/game/scripting_interface.c	Fri Aug 18 16:06:41 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "game/gltron.h"
 #include "base/switchCallbacks.h"
 #include "scripting/nebu_scripting.h"
--- gltron-0.70/src/game/timedemo.c.bak	Fri Dec  5 12:45:38 2003
+++ gltron-0.70/src/game/timedemo.c	Fri Aug 18 16:06:15 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "game/gltron.h"
 
 static int startTime = 0;
--- gltron-0.70/src/game/pause.c.bak	Sat Dec 13 17:07:16 2003
+++ gltron-0.70/src/game/pause.c	Fri Aug 18 16:03:33 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "game/gltron.h"
 
 /* very brief - just the pause mode */
--- gltron-0.70/src/game/camera.c.bak	Fri Dec  5 12:45:38 2003
+++ gltron-0.70/src/game/camera.c	Fri Aug 18 15:51:38 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include "input/input.h"
 
--- gltron-0.70/src/input/input.c.bak	Fri Dec  5 12:45:39 2003
+++ gltron-0.70/src/input/input.c	Fri Aug 18 15:47:03 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include "game/game.h"
 
--- gltron-0.70/src/video/trail_geometry.c.bak	Fri Dec  5 12:45:39 2003
+++ gltron-0.70/src/video/trail_geometry.c	Fri Aug 18 15:40:52 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/trail_geometry.h"
 
 #include <math.h>
--- gltron-0.70/src/video/trail.c.bak	Fri Dec  5 12:45:39 2003
+++ gltron-0.70/src/video/trail.c	Fri Aug 18 15:39:37 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include "game/game.h"
 
--- gltron-0.70/src/video/texture.c.bak	Thu Aug  7 11:13:35 2003
+++ gltron-0.70/src/video/texture.c	Fri Aug 18 15:38:21 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 
 void initTexture(Visual *d) {
--- gltron-0.70/src/video/skybox.c.bak	Sat Jul 12 18:15:18 2003
+++ gltron-0.70/src/video/skybox.c	Fri Aug 18 15:36:55 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 
 void enableSkyboxTexture(void) {
--- gltron-0.70/src/video/screenshot.c.bak	Fri Jun 20 15:42:34 2003
+++ gltron-0.70/src/video/screenshot.c	Fri Aug 18 15:35:25 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include "filesystem/path.h"
 #include "Nebu_filesystem.h"
--- gltron-0.70/src/video/recognizer.c.bak	Fri Dec  5 12:45:39 2003
+++ gltron-0.70/src/video/recognizer.c	Fri Aug 18 15:34:12 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include <math.h>
 
--- gltron-0.70/src/video/model.c.bak	Sat Jul 12 18:15:18 2003
+++ gltron-0.70/src/video/model.c	Fri Aug 18 23:17:42 2006
@@ -1,5 +1,9 @@
 // include a few datastructures & constants
 
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/model.h"
 #include "video/video.h"
 
@@ -7,11 +11,13 @@
 #include "stdio.h"
 #include "stdlib.h"
 #include "zlib.h"
+#include "locale.h"
 
 extern void readMaterialLibrary(char *buf, Mesh *pMesh);
 extern void setMaterial(char *buf, Mesh *pMesh, int *iGroup);
 
 void readVector(char *buf, vec3 *pVertex ) {
+  setlocale(LC_NUMERIC, "C");
   if( sscanf(buf, " %f %f %f ", 
 	     pVertex->v, pVertex->v + 1, pVertex->v + 2) != 3) {
     fprintf(stderr, "*** failed reading Vector from %s\n", buf);
--- gltron-0.70/src/video/material.c.bak	Sat Jul 12 18:15:18 2003
+++ gltron-0.70/src/video/material.c	Fri Aug 18 15:30:09 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/model.h"
 #include "filesystem/path.h"
 
--- gltron-0.70/src/video/graphics_lights.c.bak	Sat Jul 12 18:15:18 2003
+++ gltron-0.70/src/video/graphics_lights.c	Fri Aug 18 15:22:54 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 
 void setupLights(int type) {
--- gltron-0.70/src/video/graphics_hud.c.bak	Fri Dec  5 12:45:39 2003
+++ gltron-0.70/src/video/graphics_hud.c	Fri Aug 18 15:20:59 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include "game/game.h"
 
--- gltron-0.70/src/video/graphics_fx.c.bak	Sun Sep 28 18:42:24 2003
+++ gltron-0.70/src/video/graphics_fx.c	Fri Aug 18 15:18:41 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include "game/game.h"
 
--- gltron-0.70/src/video/gamegraphics.c.bak	Sun Dec 14 08:31:04 2003
+++ gltron-0.70/src/video/gamegraphics.c	Fri Aug 18 15:16:28 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include "game/game.h"
 
--- gltron-0.70/src/video/fonttex.c.bak	Wed Jul 16 20:32:11 2003
+++ gltron-0.70/src/video/fonttex.c	Fri Aug 18 15:14:35 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include "filesystem/path.h"
 #include "Nebu_filesystem.h"
--- gltron-0.70/src/video/fonts.c.bak	Sat Jul 12 18:15:18 2003
+++ gltron-0.70/src/video/fonts.c	Fri Aug 18 15:11:24 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include "filesystem/path.h"
 #include "Nebu_filesystem.h"
--- gltron-0.70/src/video/explosion.c.bak	Sat Jul 12 18:15:18 2003
+++ gltron-0.70/src/video/explosion.c	Fri Aug 18 15:08:36 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include "video/explosion.h" 
 
--- gltron-0.70/src/video/artpack.c.bak	Fri Dec 12 09:01:17 2003
+++ gltron-0.70/src/video/artpack.c	Fri Aug 18 15:06:40 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include "filesystem/path.h"
 #include "base/util.h"
--- gltron-0.70/src/video/visuals_2d.c.bak	Sun Sep 28 18:46:34 2003
+++ gltron-0.70/src/video/visuals_2d.c	Fri Aug 18 15:44:51 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include "game/game.h"
 
--- gltron-0.70/src/video/video.c.bak	Fri Dec 12 09:01:17 2003
+++ gltron-0.70/src/video/video.c	Fri Aug 18 15:43:24 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include "game/game.h"
 #include "filesystem/path.h"
--- gltron-0.70/src/video/trail_render.c.bak	Fri Dec  5 12:45:39 2003
+++ gltron-0.70/src/video/trail_render.c	Fri Aug 18 15:42:03 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/trail_geometry.h"
 								 
 void trailStatesNormal(Player *pPlayer, int texture) {
--- gltron-0.70/src/video/load_texture.c.bak	Fri Dec 12 09:01:17 2003
+++ gltron-0.70/src/video/load_texture.c	Fri Aug 18 15:28:42 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include "filesystem/path.h"
 
--- gltron-0.70/src/video/graphics_world.c.bak	Fri Dec  5 12:45:39 2003
+++ gltron-0.70/src/video/graphics_world.c	Fri Aug 18 15:27:00 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include "game/game.h"
 
--- gltron-0.70/src/video/graphics_utility.c.bak	Sat Jul 12 18:15:18 2003
+++ gltron-0.70/src/video/graphics_utility.c	Fri Aug 18 15:24:35 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "video/video.h"
 #include "game/game.h"
 
--- gltron-0.70/src/audio/sound_glue.cpp.bak	Fri Dec  5 12:45:38 2003
+++ gltron-0.70/src/audio/sound_glue.cpp	Fri Aug 18 16:31:56 2006
@@ -1,3 +1,6 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
 #include "Nebu_audio.h"
 
 extern "C" {
--- gltron-0.70/src/audio/sound.c.bak	Fri Dec 12 09:01:14 2003
+++ gltron-0.70/src/audio/sound.c	Fri Aug 18 15:02:27 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include "game/gltron.h"
 #include "filesystem/path.h"
 
--- gltron-0.70/src/configuration/settings.c.bak	Fri Dec 12 09:04:18 2003
+++ gltron-0.70/src/configuration/settings.c	Fri Aug 18 14:59:44 2006
@@ -1,3 +1,7 @@
+#define EXEC_LISTS_H
+#define EXEC_TASKS_H
+#define EXEC_SEMAPHORES_H
+#define CLIB_EXEC_PROTOS_H
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
