#
# [ OVERVIEW ]
# This is a port to AmigaOS4 of Stockfish 5.
# Stockfish 5 is the world' s strongest chess engine and it is developed by
# Tord Romstad, Marco Costalba and Joona Kiiski
# http://stockfishchess.org/
# http://en.wikipedia.org/wiki/Stockfish_(chess)
#
# Hopefully this project will motivate the development of a proper GUI application
# for the engine.
#
# [ REQUIREMENTS ]
# - AmigaOS 4.1 Update 1 running on PowerPC based computers
# - Stack size >= 512000 bytes (big or small it worked for our tests)
#
# [ USAGE ]
# No particular installation is needed, you should be able to run the application
# anywhere in your system.
#
# Because of the lack of a GUI app, at the moment the engine can only be used
# through the Shell interface.
# Run from Shell:
# 1) > stack 512000
# 2) > Stockfish5_OS4
# 3) enter your commands
#
# [ VERSION HISTORY ]
# - Version 5.0 released 21-Jan-2015, first public release
#
# [ PAYPAL DONATE ]
# PayPal donate to mscarano@libero.it
#
# [ AUTHORS ]
# AmigaOS4 port by
# Massimiliano Scarano   mscarano@libero.it
# Domenico Lattanzi   domenico.lattanzi@gmail.com
#
# ======
#
# Makefile_OS4 V1.0 20150121
# to build Stockfish 5 for AmigaOS 4.1 Update 1 (tested OK with SDK 53.20, g++ 4.2.4)
#
# Output is created in the current directory
#
# $@ = Stockfish5_OS4
#



CC = g++
CP = copy clone
RM = delete force
CFLAGS = -mcrt=newlib -O3 -Wall -fsigned-char -N
# Stockfish specific
CFLAGS += -Wcast-qual -fno-exceptions -fno-rtti
CFLAGS += -ansi -pedantic -Wno-long-long -Wextra -Wshadow
LIBS = -lauto -lpthread -lstdc++

TARGET = Stockfish5_OS4
OBJS = benchmark.o bitbase.o bitboard.o book.o endgame.o evaluate.o main.o \
	material.o misc.o movegen.o movepick.o notation.o pawns.o position.o \
	search.o thread.o timeman.o tt.o uci.o ucioption.o

$(TARGET): $(OBJS)
	$(CC) -o $@ $(OBJS) $(LIBS)
	strip -R.comment $@
	protect $@ re

#====== benchmark.o bitbase.o bitboard.o book.o endgame.o evaluate.o main.o

benchmark.o: benchmark.cpp
	$(CC) -c benchmark.cpp -o benchmark.o $(CFLAGS)

bitbase.o: bitbase.cpp
	$(CC) -c bitbase.cpp -o bitbase.o $(CFLAGS)

bitboard.o: bitboard.h bitboard.cpp
	$(CC) -c bitboard.cpp -o bitboard.o $(CFLAGS)

book.o: book.h book.cpp
	$(CC) -c book.cpp -o book.o $(CFLAGS)

endgame.o: endgame.h endgame.cpp
	$(CC) -c endgame.cpp -o endgame.o $(CFLAGS)

evaluate.o: evaluate.h evaluate.cpp
	$(CC) -c evaluate.cpp -o evaluate.o $(CFLAGS)

main.o: main.cpp
	$(CC) -c main.cpp -o main.o $(CFLAGS)

#====== material.o misc.o movegen.o movepick.o notation.o pawns.o position.o

material.o: material.h material.cpp
	$(CC) -c material.cpp -o material.o $(CFLAGS)

misc.o: misc.h misc.cpp
	$(CC) -c misc.cpp -o misc.o $(CFLAGS)

movegen.o: movegen.h movegen.cpp
	$(CC) -c movegen.cpp -o movegen.o $(CFLAGS)

movepick.o: movepick.h movepick.cpp
	$(CC) -c movepick.cpp -o movepick.o $(CFLAGS)

notation.o: notation.h notation.cpp
	$(CC) -c notation.cpp -o notation.o $(CFLAGS)

pawns.o: pawns.h pawns.cpp
	$(CC) -c pawns.cpp -o pawns.o $(CFLAGS)

position.o: position.h position.cpp
	$(CC) -c position.cpp -o position.o $(CFLAGS)

#====== search.o thread.o timeman.o tt.o uci.o ucioption.o

search.o: search.h search.cpp
	$(CC) -c search.cpp -o search.o $(CFLAGS)

thread.o: thread.h thread.cpp
	$(CC) -c thread.cpp -o thread.o $(CFLAGS)

timeman.o: timeman.h timeman.cpp
	$(CC) -c timeman.cpp -o timeman.o $(CFLAGS)

tt.o: tt.h tt.cpp
	$(CC) -c tt.cpp -o tt.o $(CFLAGS)

uci.o: uci.cpp
	$(CC) -c uci.cpp -o uci.o $(CFLAGS)

ucioption.o: ucioption.h ucioption.cpp
	$(CC) -c ucioption.cpp -o ucioption.o $(CFLAGS)



install: $(TARGET)
	$(CP) $(TARGET) /AmigaOS4/

clean:
	$(RM) $(OBJS) $(TARGET)
