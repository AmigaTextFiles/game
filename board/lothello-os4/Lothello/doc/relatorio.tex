\documentclass[ letterpaper,12pt]{article}

\usepackage[brazil]{babel}
\usepackage[T1]{fontenc}
\usepackage{a4wide}
\usepackage{graphicx}
\usepackage{epsfig}

\begin{document}

\title{\textbf{Relatório Tp1 IA Jogos - lothello}}

\author{
Bruno Rodrigues de Oliveira \\ {\it brunoro@dcc.ufmg.br}\\
Eduardo Costa Franco de Carvalho\\ {\it ecarvalh@dcc.ufmg.br}\\
Guilherme Farrer\\ {\it farrer@dcc.ufmg.br}
}

\maketitle

\newpage

\tableofcontents

\newpage

\section{Introdução}

Era requerido para o presente trabalho a implementação do algoritmo minimax com poda alfa-beta para ser a inteligência artificial em um jogo de othello.

Othello (também conhecido como reversi) é um jogo no qual o seu objetivo é, ao término do mesmo, permanecer com um número maior de peças do que o seu adversário. Inicialmente cada jogador consta com 2 peças, dispostas diagonalmente no centro do tabuleiro. Alterna-se então as vezes de cada jogador, podendo o mesmo adquirir novas posições desde que entre a posição e uma peça sua existam uma ou mais peças do adversário (uma posição por vez). Quando nenhum dos dois jogadores possui mais jogadas a fazer o jogo é dado como encerrado. Caso apenas um dos dois não possua, passa-se a vez para o outro jogador, prosseguindo-se o jogo.\cite{OWIKI}

O resultato obtido com o desenvolvimento deste trabalho foi satisfatório, tanto que disponibilizamos o jogo através do sourceforge, sob o nome de {\it lothello}\cite{LOTHELLO}.

\section{Execução}

O Jogo foi desenvolvido em C++, fazendo uso das bibliotecas SDL e SDL\_Image, ambas disponíveis através do sítio www.libsdl.org \cite{SDL} .

Para se executar o mesmo, existem duas maneiras possíveis, uma é fazer uso do binário de Windows disponível com as dlls requeridas. A outra, para usuários *nix, é baixar o código fonte e as duas bibliotecas necessárias, instalando-as, e em seguida compilando o código do jogo através de um comando {\it make} no diretório principal. No primeiro caso o executável é {\it lothello.exe}, no segundo, somente {\it lothello}.

\subsection{Modos de Jogo}

Ao iniciar o jogo uma tela principal é mostrada, tendo três modos de jogo à escolha (a saber: humano contra humano, humano com peças vermelhas contra IA com peças verdes ou humano com peças verdes contra IA com peças vermelhas). Optou-se por fazer as peças serem vermelhas e verdes ao invés de, respectivamente, pretas e brancas por razões puramente estéticas.

\begin{center}
  \framebox
  {
     \includegraphics{inicial.png}
  }
  \\{\bf Figura 1} - Tela Inicial do lothello
\end{center}

\subsection{Opções}

Para o caso de jogos contra a IA, três níveis de dificuldade foram desenvolvidos: fácil, normal e difícil, sendo também maleável o nível de profundidade da busca através no minimax, em 3, 5 ou 7 nós de profundidade. Tais opções serão melhor descritas nas próximas seções.


\section{Implementação}

Implementou-se o algoritmo minimax com poda alfa-beta para jogar o jogo othello, fazendo uso de três níveis de dificuldade distintos (com diferentes abordagens para a função de avaliação de cada estado), que serão discutidos no decorrer deste documento, três níveis de profundade da busca diferentes (a saber: 3, 5 e 7 níveis de profundidade) em uma interface gráfica amigável, que consta de animação ao tomar peças adversárias para sí.

\subsection{A Interface Gráfica}

A interface gráfica foi escrita em C++ fazendo uso das bibliotecas SDL e SDL\_image, tendo seus gráficos sidos desenvolvidos por nós através do programa de edição de imagens GIMP\cite{GIMP}. O intuito da mesma é simplificar o processo de interação do usuário com o jogo, além de tornar a visão do mesmo sobre o tabuleiro mais eficaz.

\begin{center}
  \framebox
  {
     \includegraphics{jogo.png}
  }
  \\{\bf Figura 2} - Tela básica do Jogo
\end{center}

Tal interface possibilita mostrar ao jogador humano quais as posições que o mesmo pode tomar, através de uma peça branca que aparece na posição em que o mouse se encontra quando a mesma é passível de ser tomada.

\subsection{Animação ao Tomar Peças}

Ao as peças do adversário serem tornadas peças próprias, optou-se por fazer uma animação das peças girando, tornando mais agradável a jogabilidade.

As animações (bem como as peças) foram feitas através do programa de edição 3D Blender\cite{BLENDER}, exportando-se 10 imagens da animação lá criada para ser a animação interna ao jogo. O efeito obtido foi deveras satisfatório.

\subsection{Lógica do Jogo}

A lógica do jogo foi implementada da seguinte maneira: A cada jogada verifica-se o número de movimentos possíveis para o jogador atual (mais de uma maneira de se chegar a uma posição é contada como apenas um movimento), caso este possua movimentos, chama-se a função de pegar este movimento (seja esta a de pegar o movimento através do dispositivos de entrada e saída, no caso o mouse, seja a de pegar através da análise feita pelo algoritmo MiniMax com poda alfa beta), caso não possua nenhum movimento, passa a vez para o próximo jogador, que, caso também nãos possua, é dado o jogo como encerrado, verificando-se quem obteve mais peças e, com isso, a vitória.

\subsection{Funções de Avaliação}

Implementou-se três funções de avaliação com algumas diferenças, sendo cada uma delas, através de jogos realizados, definidas como fácil, normal ou difícil. As abortagens para a realização da função de avaliação foram baseadas nas descritas por Pons \cite{ALGEPRO} e por Robillard, Soudée e Yog \cite{BAST}. O nível de profundidade a ser buscado é fixo, no máximo no valor selecionado através da tela inicial, lembrando-se que a poda alfa beta ocorre sempre que possível.

\subsubsection{Dificuldade Fácil}

Neste nível de dificuldade, a função de avaliação é única e simplesmente definir para cada posição do tabuleiro um valor, como segue na tabela abaixo. Portanto a mesma é calculada somando-se os valores das posições possuídas pela IA e subtraindo-se as posições possuídas pelo adversário.

\begin{center}
\begin{tabular}{|c|c|c|c|c|c|c|c|}
\hline
512 & 4 & 128 & 256 & 256 & 128 & 4 & 512\\
\hline
4 & 2 &  8 & 16 & 16 & 8 & 2 & 4\\
\hline
128 & 8 & 64 & 32 & 32 & 64 & 8 & 128\\
\hline
256 & 16 & 32 & 2 & 2 & 32 & 16 & 256\\
\hline
256 & 16 & 32 & 2 & 2 & 32 & 16 & 256\\
\hline
128 & 8 & 64 & 32 & 32 & 64 & 8 & 128\\
\hline
4 & 2 & 8 & 16 & 16 & 8 & 2 & 4\\
\hline
512 & 4 & 128 & 256 & 256 & 128 & 4 & 512\\
\hline
\end{tabular}
\end{center}

Esta foi uma abordagem muito simples, passível de tomar decisões não muito espertas no desenrolar do jogo.

\subsubsection{Dificuldade Normal}

No nível de dificuldade normal, modificou-se empiricamente (através da verificação em jogo de como a tabela original se tornaria boa, o famoso muda e testa) a tabela, até que tivemos os valores abaixo. 

\begin{center}
\begin{tabular}{|c|c|c|c|c|c|c|c|}
\hline
500 & 30 & 40 & 50 & 50 & 40 & 30 & 500\\
\hline
30 & -250 & 0 & 0 & 0 & 0 & -250 & 30\\
\hline
40 & 0 & 20 & 10 & 10 & 20 & 0 & 40\\
\hline
50 & 0 & 10 & 16 & 16 & 10 & 0 & 50\\
\hline
50 & 0 & 10 & 16 & 16 & 10 & 0 & 50\\
\hline
40 & 0 & 20 & 10 & 10 & 20 & 0 & 40\\
\hline
30 & -250 & 0 & 0 & 0 & 0 & -250 & 30\\
\hline
500 & 30 & 40 & 50 & 50 & 40 & 30 & 500\\
\hline
\end{tabular}
\end{center}

Além disto, colocou-se que sempre que um extremo estivesse dispónível a ser tomado pela IA ela o tomaria (extremos são as posições 0.0 , 0.7 , 7.0 e 7.7). Tal abordagem, ainda muito simples, foi bem mais inteligente em jogo do que a fácil, conseguindo ganhar de diversos aplicativos web de jogar othello.

\subsubsection{Dificuldade Difícil}

No nível de dificuldade difícil, outras abordagens foram implementadas, além das já utilizadas para o nível normal.

A tabela utilizada foi a mesma da do nível normal, entretanto, ao se tomar algum valor extremo, as casas adjacentes ao tomado recebiam um bonus na função de avaliação para serem tomados, permitindo com isso uma boa expansão pelas laterais.

Além disto, implementou-se uma outra bonificação, através da contagem do número de peças colocadas nas laterais do tabuleiro aplicando-se um multiplicador ao valor delas, também com o intuito de uma melhor expansão pelas laterais.

Tal nível de dificuldade mostrou-se satisfatório, às vezes um pouco mais lento do que o limite de 5 segundos imposto pelo enunciado do trabalho, em decorrência da segunda bonificação exposta, mas alcançando melhores resultados do que os demais níveis.

\subsection{Profundidade da Busca}

O jogo pode ter três profundidade de busca fixas diferentes. A profundidade 3 é bastante rápida, mas pouco abrangente, já que mal caminha na árvore de pesquisa e já é abortada. A profundidade 5 foi a que se mostrou com melhor custo benefício, uma vez que é rápida o bastante e profunda o suficiente para tomar uma decisão plausível de acerto. Já a profundidade 7 demonstrou-se demasiadamente lenta e foi deixada apenas como opcional.

\section{Conclusão}

Infere-se, através da realização deste trabalho, que a abordagem através do algoritmo MiniMax com poda alfa beta para ser a IA de um jogo clássico, como o Othello do caso, é demasiadamente dependente da função de avaliação implementada, podendo uma má função levar a resultados catastróficos (ou seja, uma IA burra) e uma boa função a resultados bons ou aceitáveis.

No caso implementado a função de avaliação para o nível difícil foi a melhor que se conseguiu, aliada a uma busca em profundidade 5, chegando a ganhar de grande parte dos outros programas de othello com os quais testamos.

Como já foi dito, gostamos tanto do resultado alcançado que tornamos o jogo público sobre o nome de {\it lothello}\cite{LOTHELLO}.

\nocite*
\bibliographystyle{siam} 
\bibliography{relatorio}

\end{document}
