DEFINITION MODULE SkakFil;

(*$ LongAlign:=TRUE StackParms:=TRUE CStrings:=TRUE LargeVars:=FALSE *)

(* Re-Compile-kæde: Skak *)

FROM IntuitionD IMPORT
  WindowPtr;
FROM FileSystem IMPORT
  Response,File;
FROM SkakBrain IMPORT
  STIL;
FROM SkakBase IMPORT
  STR97;
FROM QISupport IMPORT
  VINDUE;
FROM SkakBase IMPORT
  HvisTur, STILLINGTYPE; 

TYPE
  ERRSTR=ARRAY[0..32] OF CHAR;

CONST
  SkakFilDefCompilation="101";
  FilBufferSzRead    = 512;
  FilBufferSzWrite   = 512;
  FilBufferSzBig     = 8;
  PTRrestore=-1;
  PTRnormal=0;
  PTRgribe=3;
  PTRgrebet=4;
  PTRsove=5;
  PTRtale=6;
  TmpFil='t:vr';

VAR
  AdjDiskOn,DiskOn : BOOLEAN;
  path,ptho   : STR97;
  name,dir    : STR97; (* filnavn,dir+name,sti *)
  HelpNr       : CARDINAL;
  rettetREM,rettetPGN,rettetSPIL,rettetTEO:BOOLEAN;
  remWIN,pgnWIN,hlpWIN,teoWIN:VINDUE;

  (* contains the well-known start-position *)
  StartStilling:STILLINGTYPE;
  
  wptr     : WindowPtr; (* Skak's, men SetPtr kræver den her *)
  
PROCEDURE FilErr(res:Response; VAR st:ERRSTR);

PROCEDURE LP(ch:CHAR):CHAR; (* Localize Piece name (DK to Locale) *)

(* makes the position out of TraekNr *)
PROCEDURE GetStilling(fra:INTEGER);

PROCEDURE simpleFileRequester2(title:ARRAY OF CHAR; VAR name,path,
                              dir:ARRAY OF CHAR):BOOLEAN;

(* SK10 + txt + PGNtxt loader *)
PROCEDURE HentF(VAR f:File; VAR FraLine:LONGINT; VAR COMPARE:BOOLEAN; 
                VAR ERROR:BOOLEAN; VAR IFSFR2:BOOLEAN; VAR sta:STIL; Auto:BOOLEAN);

PROCEDURE GemF(LongFormOn:CHAR; DominansOn:BOOLEAN; Auto:BOOLEAN):BOOLEAN;

(* Set PGN 7 tags to: ? ? ????.??.?? ? ? ? *         to be reset *)      
PROCEDURE SetPGNinfos;

PROCEDURE NoPGNinfos():BOOLEAN; (* if W+B+R+S+E alle er 0 eller 1 lange *)

(* Give ups or clear pgn,rem,spil (rest-of game if Complete) *) 
PROCEDURE RydSpil(Complete:BOOLEAN; Auto:BOOLEAN):BOOLEAN;

(*
FEN is "Forsyth-Edwards Notation"; it is a standard for describing chess
positions using the ASCII character set. Example:

[SetUp "1"]
[FEN "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/1NBQKBNR w Kkq h6 0 1"]
 *)
PROCEDURE FENtoSTILLING(VAR stilling:STILLINGTYPE; fen:ARRAY OF CHAR);
(* fen MIN 30 long *)

PROCEDURE STILLINGtoFEN(VAR fen:ARRAY OF CHAR; stilling:STILLINGTYPE);
(* fen MIN 100 long*)
END SkakFil.
