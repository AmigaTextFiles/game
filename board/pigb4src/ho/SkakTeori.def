DEFINITION MODULE SkakTeori;

(*$ LongAlign:=TRUE StackParms:=FALSE CStrings:=TRUE LargeVars:=FALSE *)

FROM SYSTEM IMPORT
  ADDRESS;

(* Sorter prioriteret trækliste efter sort/hvids 3 mulige mål (i alt 99-100%) :
      Vind:  Sejre*101 + Remiser *   1
      Bedst: Sejre*101 + Remiser *  50
      Remis: Sejre*101 + Remiser * 100
   1,50 eller 100 er altså værdien af remis i %
*)

CONST
  SkakTeoriDefCompilation="19";

VAR
  Variant, Teori, Statistic:BOOLEAN; (* Statistic er lokalt i Skak.mod *)

(* What's a draw worth for W/B ? *)
PROCEDURE SetDrawWhite(Value:CARDINAL); (* 1..99 *)
PROCEDURE SetDrawBlack(Value:CARDINAL); (* 1..99 *)
PROCEDURE GetDrawWhite(VAR Value:CARDINAL); (* 1..99 *)
PROCEDURE GetDrawBlack(VAR Value:CARDINAL); (* 1..99 *)

PROCEDURE ClrTeori;

(* Load theory from file  *)
(* RETURN: 0=NonAlloc, 1=NotOpened, 2=NotSK30, 3=NotRead, 4=NotComplete, 5=OK *)
PROCEDURE LoadTeori(navn:ARRAY OF CHAR):CARDINAL;

(* Save theory to file *)
(* 0=NonAlloc, 1=NotOpened, 2=NotSK30, 3=NotOpened, 4=NotComplete, 5=OK *)
PROCEDURE SaveTeori(navn:ARRAY OF CHAR):CARDINAL;

(* Add the Game to theory *)
(* 0=NonAlloc, 5=OK *)
PROCEDURE AddGame(Value:SHORTINT; Simple:BOOLEAN):CARDINAL;
(*            Value String
  afgsort    = 21     -- 
  storsort   = 19     -+ 
  midsort    = 17     --=
  lillesort  = 15     -= 
  lillesortu = 8      -~ 
  uklart     = 13     ~  
  uafsluttet = 7      *  
  ligeu      = 10     =~ 
  lige       = 12     =  
  ligestille = 11     == 
  lillehvidu = 9      +~ 
  lillehvid  = 14     += 
  midhvid    = 16     ++=
  storhvid   = 18     +- 
  afghvid    = 20     ++  
  sortvind   = 4      0-1
  remis      = 5      1/2
  hvidvind   = 6      1-0
  empty      = all other
*)

(* Returns a pointer to a string with aboves *)
PROCEDURE VluToStr(Value:INTEGER):ADDRESS;

PROCEDURE StrToVlu(S:ARRAY OF CHAR):INTEGER;

(* Recalculates, use after AddGame *)
PROCEDURE ReCalc(StatisticOn:BOOLEAN);

(* Resets, use after AddGames if no recalcs *)
PROCEDURE setudgangsstilling;

(* Find the current position in theory, point to data about it, else NIL *)
PROCEDURE FindPosition():ADDRESS;

(* Delete a Move from current positions theory *)
PROCEDURE DeletePosMove(Fra,Til:SHORTINT);

END SkakTeori.
