DEFINITION MODULE ILBMread; (* for M2Amiga V4.0 *)

FROM IntuitionD IMPORT
  ImagePtr;

CONST
  IFFOkay    =   0;  (* Keep going .... *)
  IFFDone    =  -2;  (* ClientProc returns this when it has read enough *)
  dosError   =  -3;  (* ask DOS for the specific error code *)
  notIFF     =  -4;  (* not an IFF file ! *)
  noFile     =  -5;  (* tried to Open file, DOS didn't find it ! *)
  badFORM    =  -7;  (* valid IFF, but missing required chunk *)
  shortChunk =  -8;  (* tried to read more bytes than in chunk *)
  badIFF     =  -9;  (* mal-formed IFF file *)
  allocErr   = -20;  (* Custom *)

TYPE
  (* A CMAP chunk is a packed array of ColorRegisters *)
  ColorRegister=RECORD
    red, green, blue: SHORTCARD;
  END;
  Color4 = CARDINAL;  (* rgb WORD only uses low 12 bits *)

VAR
  cmap:ARRAY[0..31] OF ColorRegister;

PROCEDURE ReadImageILBM(pth:ARRAY OF CHAR; VAR imageptr:ImagePtr):INTEGER;

(* Reads an IFF-ILBM picture from diskfile pth. Returns a pointer to an
   IntuitionD.Image structure in chip-ram. Draw with IntuitionL.DrawImage or
   add to gadgets with Quickintuition.SetGadgetImage *)


END ILBMread.
