PROGRAM		= penguin-command_OS4


CC		= gcc
OPTS		= -DUSE_SOUND -DDATADIR=\"PROGDIR:data\" -DAMIGA
CFLAGS		= -O2 -Wall -newlib -Isdk:local/newlib/include/SDL -D__USE_INLINE__ -lpthread
LIBS            = -lSDL_mixer -lvorbisfile -lvorbis -logg -lSDL_image  -lSDL -lpng -ljpeg -lz -newlib -lauto -lpthread

SOURCES		= main.c game.c gfx.c missile.c shot.c explosion.c \
		  SFont.c wave.c sound.c bomb.c options.c mouse.c \
		  joystick.c shot2.c SDL_gfxPrimitives.c hypot.c
OBJECTS		= $(SOURCES:.c=.o)


all: $(PROGRAM)

$(PROGRAM): $(OBJECTS)
	$(CC) -o $(PROGRAM) $(OBJECTS) $(LIBS) -lpthread -newlib

%.o: %.c
	$(CC) $(CFLAGS) $(OPTS) -c $<

SFont.o: SFont.c
	$(CC) $(CFLAGS) $(OPTS) -c $<

SDL_gfxPrimitives.c: SDL_gfxPrimitives.o
	$(CC) $(CFLAGS) $(OPTS) -c $<

clean:
	delete force quiet #?.o
