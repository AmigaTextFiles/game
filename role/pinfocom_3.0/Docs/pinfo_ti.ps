%!PS-Adobe-3.0
%%Creator: groff version 1.05.90
%%DocumentNeededResources: font Times-Roman
%%+ font Times-Bold
%%+ font Times-Italic
%%DocumentSuppliedResources: procset grops 1.05.90 0
%%Pages: 9
%%PageOrder: Ascend
%%Orientation: Portrait
%%EndComments
%%BeginProlog
%%BeginResource: procset grops 1.05.90 0
%!PS-Adobe-3.0 Resource-ProcSet

/setpacking where {
	pop
	currentpacking
	true setpacking
} if

/grops 120 dict dup begin 

% The ASCII code of the space character.
/SC 32 def

/A /show load def
/B { 0 SC 3 -1 roll widthshow } bind def
/C { 0 exch ashow } bind def
/D { 0 exch 0 SC 5 2 roll awidthshow } bind def
/E { 0 rmoveto show } bind def
/F { 0 rmoveto 0 SC 3 -1 roll widthshow } bind def
/G { 0 rmoveto 0 exch ashow } bind def
/H { 0 rmoveto 0 exch 0 SC 5 2 roll awidthshow } bind def
/I { 0 exch rmoveto show } bind def
/J { 0 exch rmoveto 0 SC 3 -1 roll widthshow } bind def
/K { 0 exch rmoveto 0 exch ashow } bind def
/L { 0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow } bind def
/M { rmoveto show } bind def
/N { rmoveto 0 SC 3 -1 roll widthshow } bind def
/O { rmoveto 0 exch ashow } bind def
/P { rmoveto 0 exch 0 SC 5 2 roll awidthshow } bind def
/Q { moveto show } bind def 
/R { moveto 0 SC 3 -1 roll widthshow } bind def
/S { moveto 0 exch ashow } bind def
/T { moveto 0 exch 0 SC 5 2 roll awidthshow } bind def

% name size font SF -

/SF {
	findfont exch
	[ exch dup 0 exch 0 exch neg 0 0 ] makefont
	dup setfont
	[ exch /setfont cvx ] cvx bind def
} bind def

% name a c d font MF -

/MF {
	findfont
	[ 5 2 roll
	0 3 1 roll % b
	neg 0 0 ] makefont
	dup setfont
	[ exch /setfont cvx ] cvx bind def
} bind def

/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def

% Guess the page length.
% This assumes that the imageable area is vertically centered on the page.
% PLG - length

/PLG {
	gsave newpath clippath pathbbox grestore
	exch pop add exch pop
} bind def

% BP -

/BP {
	/level0 save def
	1 setlinecap
	1 setlinejoin
	72 RES div dup scale
	LS {
		90 rotate
	} {
		0 PL translate
	} ifelse
	1 -1 scale
} bind def

/EP {
	level0 restore
	showpage
} bind def


% centerx centery radius startangle endangle DA -

/DA {
	newpath arcn stroke
} bind def

% x y SN - x' y'
% round a position to nearest (pixel + (.25,.25))

/SN {
	transform 
	.25 sub exch .25 sub exch
	round .25 add exch round .25 add exch
	itransform
} bind def
	
% endx endy startx starty DL -
% we round the endpoints of the line, so that parallel horizontal
% and vertical lines will appear even

/DL {
	SN
	moveto
	SN
	lineto stroke
} bind def

% centerx centery radius DC -

/DC {
	newpath 0 360 arc closepath
} bind def


/TM matrix def

%  width height centerx centery DE -

/DE {
	TM currentmatrix pop
	translate scale newpath 0 0 .5 0 360 arc closepath
	TM setmatrix
} bind def

% these are for splines

/RC /rcurveto load def
/RL /rlineto load def
/ST /stroke load def
/MT /moveto load def
/CL /closepath load def

% fill the last path

% amount FL -

/FL {
	currentgray exch setgray fill setgray
} bind def

% fill with the ``current color''

/BL /fill load def

/LW /setlinewidth load def
% new_font_name encoding_vector old_font_name RE -

/RE {
	findfont
	dup maxlength dict begin
	{
		1 index /FID ne { def } { pop pop } ifelse
	} forall
	/Encoding exch def
	dup /FontName exch def
	currentdict end definefont pop
} bind def

/DEFS 0 def

% hpos vpos EBEGIN -

/EBEGIN {
	moveto
	DEFS begin
} bind def

/EEND /end load def

/CNT 0 def
/level1 0 def

% llx lly newwid wid newht ht newllx newlly PBEGIN -

/PBEGIN {
	/level1 save def
	translate
	div 3 1 roll div exch scale
	neg exch neg exch translate
	% set the graphics state to default values
	0 setgray
	0 setlinecap
	1 setlinewidth
	0 setlinejoin
	10 setmiterlimit
	[] 0 setdash
	/setstrokeadjust where {
		pop
		false setstrokeadjust
	} if
	/setoverprint where {
		pop
		false setoverprint
	} if
	newpath
	/CNT countdictstack def
	userdict begin
	/showpage {} def
} bind def

/PEND {
	clear
	countdictstack CNT sub { end } repeat
	level1 restore
} bind def

end def

/setpacking where {
	pop
	setpacking
} if
%%EndResource
%%EndProlog
%%BeginSetup
%%IncludeResource: font Times-Roman
%%IncludeResource: font Times-Bold
%%IncludeResource: font Times-Italic
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72 def/PL
792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron/scaron/zcaron
/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/space
/exclam/quotedbl/numbersign/dollar/percent/ampersand/quoteright/parenleft
/parenright/asterisk/plus/comma/hyphen/period/slash/zero/one/two/three/four
/five/six/seven/eight/nine/colon/semicolon/less/equal/greater/question/at/A/B/C
/D/E/F/G/H/I/J/K/L/M/N/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash
/bracketright/circumflex/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q
/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase
/guillemotleft/guillemotright/bullet/florin/fraction/perthousand/dagger
/daggerdbl/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen/brokenbar
/section/dieresis/copyright/ordfeminine/guilsinglleft/logicalnot/minus
/registered/macron/degree/plusminus/twosuperior/threesuperior/acute/mu
/paragraph/periodcentered/cedilla/onesuperior/ordmasculine/guilsinglright
/onequarter/onehalf/threequarters/questiondown/Agrave/Aacute/Acircumflex/Atilde
/Adieresis/Aring/AE/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute
/Icircumflex/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn/germandbls
/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla/egrave/eacute
/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis/eth/ntilde/ograve
/oacute/ocircumflex/otilde/odieresis/divide/oslash/ugrave/uacute/ucircumflex
/udieresis/yacute/thorn/ydieresis]def/Times-Italic@0 ENC0/Times-Italic RE
/Times-Bold@0 ENC0/Times-Bold RE/Times-Roman@0 ENC0/Times-Roman RE
%%EndSetup
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 133.47(PINFO_TI\(3\) Contrib)72 48 R(uted Softw)-.2 E
133.47(are PINFO_TI\(3\))-.1 F/F1 9/Times-Bold@0 SF -.18(NA)72 84 S(ME).18 E/F2
10/Times-Bold@0 SF(pinf)108 96 Q(o_ti)-.25 E F0 2.5<ad44>2.5 G
(escription of the terminal interf)158.95 96 Q
(ace to the portable Infocom data\214le interpreter)-.1 E(.)-.55 E F1(SYNOPSIS)
72 112.8 Q F2(#include <stdio.h>)108 124.8 Q(#include "inf)108 136.8 Q(ocom.h")
-.25 E(exter)108 160.8 Q 2.5(ng)-.15 G(\215ags_t g\215ags;)142.56 160.8 Q
(exter)108 172.8 Q 2.5(nc)-.15 G 10(har *ti_location;)142 172.8 R(exter)108
184.8 Q 2.5(nc)-.15 G 10(har *ti_status;)142 184.8 R(const char *scr_usage;)108
220.8 Q(const char *scr_long_usage;)108 232.8 Q(const char *scr_opt_list;)108
244.8 Q(int scr_cmdar)108 268.8 Q(g\( int ar)-.1 E(gc, char ***ar)-.1 E
(gv_p \);)-.1 E(int scr_getopt\( int c, const char *ar)108 292.8 Q 2.5(g\))-.1
G(;)267.87 292.8 Q -.1(vo)108 316.8 S(id scr_setup\( int mar).1 E(gin,)-.1 E
(int indent,)148 328.8 Q(int lines,)148 340.8 Q(int context \);)148 352.8 Q -.1
(vo)108 376.8 S(id scr_begin\(\);).1 E -.1(vo)108 400.8 S
(id scr_putline\( const char *b).1 E(uffer \);)-.2 E -.1(vo)108 424.8 S
(id scr_putscor).1 E(e\(\);)-.18 E -.1(vo)108 448.8 S
(id scr_putsound\( int number).1 E(,)-.92 E(int action,)155.5 460.8 Q(int v)
155.5 472.8 Q(olume,)-.1 E(int ar)155.5 484.8 Q(gc \);)-.1 E -.1(vo)108 508.8 S
(id scr_putmesg\( const char *b).1 E(uffer)-.2 E 2.5(,B)-.92 G(ool is_err)
277.32 508.8 Q(or \);)-.18 E(int scr_getline\( const char *pr)108 532.8 Q
(ompt,)-.18 E(int length,)150.5 544.8 Q(char *b)150.5 556.8 Q(uffer \);)-.2 E
-.1(vo)108 580.8 S(id scr_windo).1 E(w\( int size \);)-.1 E -.1(vo)108 604.8 S
(id scr_set_win\( int win \);).1 E(FILE *scr_open_sf\( int length, char *b)108
628.8 Q(uffer)-.2 E 2.5(,i)-.92 G(nt type \);)301.32 628.8 Q -.1(vo)108 652.8 S
(id scr_close_sf\( const char *b).1 E(uffer)-.2 E 2.5(,F)-.92 G
(ILE *fp, int is_sa)273.42 652.8 Q .2 -.1(ve \))-.25 H(;).1 E -.1(vo)108 676.8
S(id scr_end\(\);).1 E -.1(vo)108 700.8 S(id scr_shutdo).1 E(wn\(\);)-.1 E F0
(Re)72 768 Q(vision 3.0)-.25 E(21 October 1992)272.395 768 Q(1)535 768 Q EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 133.47(PINFO_TI\(3\) Contrib)72 48 R(uted Softw)-.2 E
133.47(are PINFO_TI\(3\))-.1 F/F1 9/Times-Bold@0 SF(DESCRIPTION)72 84 Q F0 .08
(These routines form the interf)108 96 R .079(ace between the portable Infocom\
 data\214le interpreter \(pinfocom\) and a partic-)-.1 F
(ular type of terminal.)108 108 Q(The pinfocom package comes with interf)5 E
(aces to the follo)-.1 E(wing terminal types:)-.25 E/F2 10/Times-Bold@0 SF
(termcap)108 124.8 Q F0 .184
(This terminal type supports all\(?\) UNIX systems via an interf)144 136.8 R
.185(ace to either termcap or terminfo ter)-.1 F(-)-.2 E .869(minal capability\
 and either termio, termios, or sgtty line discipline control.)144 148.8 R .869
(Optional support for)5.869 F
(the GNU readline line editing and history library is also a)144 160.8 Q -.25
(va)-.2 G(ilable.).25 E F2(amiga)108 177.6 Q F0 .732
(This terminal type supports an Amig)9.89 F 3.232(ai)-.05 G(nterf)305.002 177.6
Q .732(ace, including sound and command line editing.)-.1 F(See)5.733 E(amig)
144 189.6 Q(a.c for full details.)-.05 E F2(msdos)108 206.4 Q F0
(This terminal type supports MS-DOS based systems.)9.33 E
(See msdos.c for full details.)5 E F2(str)108 223.2 Q(eam)-.18 E F0 .87
(This terminal type should support an)6.75 F 3.37(ys)-.15 G .87
(ystem with a C compiler; it uses simple C stdio routines)307.4 223.2 R
(that all C libraries will ha)144 235.2 Q -.15(ve)-.2 G 5(.N).15 G(othing f)
269.75 235.2 Q(anc)-.1 E 1.3 -.65(y, b)-.15 H(ut it w).45 E(orks.)-.1 E
(Also in the w)108 252 Q(orks is an X11-based interf)-.1 E(ace.)-.1 E .832
(This man page describes the interf)108 268.8 R .832
(ace between the pinfo interpreter and the terminal support packages so)-.1 F
.202(that programmers can create their o)108 280.8 R .201(wn interf)-.25 F .201
(aces to ne)-.1 F 2.701(ws)-.25 G(ystems.)340.534 280.8 Q/F3 10/Times-Italic@0
SF -.92(Te)5.201 G .201(rminal interface).92 F F0 .201(will be abbre)2.701 F
.201(viated to)-.25 F F2(TI)108 292.8 Q F0(belo)2.5 E -.65(w.)-.25 G F2(En)87
309.6 Q(vir)-.4 E(onment)-.18 E F0 .85(The interpreter operates in tw)108 321.6
R 3.35(om)-.1 G .851(odes: g)245.73 321.6 R .851(ame-playing mode \(def)-.05 F
.851(ault\) and information mode \(if an)-.1 F 3.351(yo)-.15 G 3.351(ft)521.099
321.6 S(he)530.56 321.6 Q .362(command-line options)108 333.6 R F2<ad68>2.862 E
F0(,)A F2<ad6f>2.862 E F0(,)A F2<ad4f>2.861 E F0(,)A F2<ad76>2.861 E F0(and/or)
2.861 E F2<ad56>2.861 E F0 .361(are gi)2.861 F -.15(ve)-.25 G .361
(n\), where the g).15 F .361(ame is not played b)-.05 F .361(ut information)-.2
F(about it is instead displayed on the screen.)108 345.6 Q .338
(All input and output in g)108 362.4 R .339(ame-playing mode is done via the)
-.05 F F2(scr_*\(\))2.839 E F0 .339(functions described belo)2.839 F 4.139 -.65
(w. O)-.25 H .339(utput dur).65 F(-)-.2 E
(ing information mode is via simple C stdio library functions.)108 374.4 Q
1.572(The only interf)108 391.2 R 1.571(ace between the interpreter and the te\
rminal handling code is through the functions and)-.1 F 1.393(global v)108
403.2 R 1.393(ariables described belo)-.25 F 1.394
(w; no other symbols in the TI code should be e)-.25 F 1.394
(xternally visible and an)-.15 F(y)-.15 E(other e)108 415.2 Q
(xternal symbols in the interpreter code are subject to change.)-.15 E F1
(GENERAL)72 432 Q F0(Some general issues to be considered:)108 444 Q F2
(Asynchr)87 460.8 Q(onous Ev)-.18 E(ents)-.1 E F0 .677(The interpreter re)108
472.8 R .676
(gisters a signal handler for the SIGINT signal and sets to ignore the SIGQ)
-.15 F .676(UIT signal \(if)-.1 F(de\214ned\).)108 484.8 Q(An)108 501.6 Q 3.158
(yo)-.15 G .658(ther signals or other asynchronous e)133.228 501.6 R -.15(ve)
-.25 G .658(nts are free to be handled by the TI as it sees \214t.).15 F .658
(Note, ho)5.658 F(w-)-.25 E -2.15 -.25(ev e)108 513.6 T 1.816 -.4(r, t).25 H
1.015(hat none of these handler routines may modify or access an).4 F 3.515(yi)
-.15 G 1.015(nterpreter v)391.675 513.6 R 1.015(ariables: interpreter v)-.25 F
(ari-)-.25 E .528(ables listed belo)108 525.6 R 3.028(wa)-.25 G .528
(re only guaranteed to be v)187.934 525.6 R .528
(alid when one of the scr_*\(\) functions belo)-.25 F 3.029(wh)-.25 G .529
(as been prop-)485.072 525.6 R(erly called from within the interpreter code.)
108 537.6 Q F2(Pr)87 554.4 Q(oportional F)-.18 E(onts)-.25 E F0 .51(If the TI \
supports multiple fonts it is perfectly reasonable to use proportional-width f\
onts for printing gen-)108 566.4 R(eral g)108 578.4 Q(ame te)-.05 E
(xt if you wish.)-.15 E(Ho)108 595.2 Q(we)-.25 E -.15(ve)-.25 G 1.173 -.4(r, a)
.15 H 2.873(tc).4 G .373(ertain points in the g)163.506 595.2 R .373(ame \214x)
-.05 F .374(ed-width fonts are required, such as when printing maps, etc.)-.15
F -.8(To)5.374 G 3.353(accomodate this, before printing to the screen)108 607.2
R F2(scr_putline\(\))5.852 E F0 3.352(\(see belo)5.852 F 3.352(w\) should in)
-.25 F -.2(vo)-.4 G 3.552 -.1(ke t).2 H 3.352(he macro).1 F F2
(F2_IS_SET\(B_FIXED_FONT\))108 619.2 Q F0 5.337(.I)C 2.837(ft)250.847 619.2 S
.337(his macro returns non-0 then the current b)259.794 619.2 R(uf)-.2 E .337
(fer should be printed in a)-.25 F<8c78>108 631.2 Q(ed-width font; if it retur\
ns 0 then a proportional-width font may be used if desired.)-.15 E F2
(Scripting)87 648 Q F0 1.686(All Infocom g)108 660 R 1.686(ames support the)
-.05 F F2(script)4.186 E F0 1.686(command, which is supposed to be)4.186 F
1.685(gin a transcript of the user')-.15 F(s)-.55 E(adv)108 672 Q 3.12
(enture. Normally)-.15 F .62
(this initialized the printer and all subsequent te)3.12 F .62
(xt and commands were printed to the)-.15 F(printer as well as to the screen.)
108 684 Q .057(The TI may support this feature as well.)108 700.8 R(There')
5.057 E 2.557(sn)-.55 G 2.557(oZ)310.973 700.8 S .057(-Code primiti)324.64
700.8 R .357 -.15(ve f)-.25 H .056(or turning on and of).15 F 2.556(fs)-.25 G
.056(cripting, ho)483.534 700.8 R(w-)-.25 E -2.15 -.25(ev e)108 712.8 T 7.002
(r: instead a \215ag is set or reset.).25 F(In)301.366 712.8 Q F2
(scr_putline\(\))9.502 E F0(and)9.502 E F2(scr_getline\(\))9.502 E F0 7.003
(the macro call)9.502 F F2(F2_IS_SET\(B_SCRIPTING\))108 724.8 Q F0 2.286
(should be used; if it returns non-0 then the output line or prompt and)4.786 F
(Re)72 768 Q(vision 3.0)-.25 E(21 October 1992)272.395 768 Q(2)535 768 Q EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 133.47(PINFO_TI\(3\) Contrib)72 48 R(uted Softw)-.2 E
133.47(are PINFO_TI\(3\))-.1 F
(command should be printed to the script \214le as well as the display)108 84 Q
(.)-.65 E .245(The interf)108 100.8 R .245(ace will call)-.1 F/F1 10
/Times-Bold@0 SF(scr_open_sf\(\))2.745 E F0 .245(with a \214le type of)2.745 F
F1(SF_SCRIPT)2.745 E F0 .246(when a script \214le is to be opened and)2.745 F
F1(scr_close_sf\(\))108 112.8 Q F0(when a script \214le is to be closed.)2.5 E
F1(Fixed W)87 129.6 Q(indo)-.18 E(w)-.1 E F0(Only)108 141.6 Q/F2 10
/Times-Italic@0 SF(Seastalk)2.804 E(er)-.1 E F0(mak)2.804 E .304
(es use of the \214x)-.1 F .303(ed windo)-.15 F 2.803(wf)-.25 G .303
(eature in Standard Series g)306.47 141.6 R .303(ames, b)-.05 F .303(ut it')-.2
F 2.803(sn)-.55 G .303(ice to ha)476.101 141.6 R .603 -.15(ve n)-.2 H -.25(ev)
.15 G(-).25 E(ertheless.)108 153.6 Q 1.49(If the TI can support a \214x)108
170.4 R 1.49(ed windo)-.15 F 3.991(wi)-.25 G 3.991(na)271.161 170.4 S 1.491
(ddition to the normal scrolling te)284.592 170.4 R 1.491(xt windo)-.15 F 3.991
(wt)-.25 G(hen)473.799 170.4 Q F1(scr_begin\(\))3.991 E F0 .655
(should notify the interpreter by calling)108 182.4 R F1(F1_SETB\(B_ST)3.155 E
-.95(AT)-.9 G(US_WIN\)).95 E F0 5.655(.I)C 3.155(nt)403.235 182.4 S .655
(his case the)414.17 182.4 R F1(scr_windo)3.155 E(w\(\))-.1 E F0(and)3.155 E F1
(scr_set_win\(\))108 194.4 Q F0(functions described belo)2.5 E 2.5(ww)-.25 G
(ill be used to create/manage/delete the \214x)281.6 194.4 Q(ed windo)-.15 E
-.65(w.)-.25 G .468(If the TI cannot support a \214x)108 211.2 R .468(ed windo)
-.15 F 2.968(wt)-.25 G .468(hen the abo)275.764 211.2 R .768 -.15(ve m)-.15 H
.469(acro should not be called and).15 F F1(scr_windo)2.969 E(w\(\))-.1 E F0
(and)2.969 E F1(scr_set_win\(\))108 223.2 Q F0(may be dummy functions.)2.5 E/F3
9/Times-Bold@0 SF(GLOB)72 240 Q(AL V)-.27 E(ARIABLES)-1.215 E F0
(These global v)108 252 Q
(ariables are de\214ned in the interpreter code and may be used by the TI:)-.25
E F1(g\215ags)87 268.8 Q F0 .609(Contains global \215ags and other general v)
108 280.8 R .609(ariables of interest.)-.25 F .609
(The only \214eld which may be modi\214ed is the)5.609 F F1(pr_status)108 292.8
Q F0(\214eld, if the TI doesn')2.5 E 2.5(ts)-.18 G
(upport status line printing.)244.2 292.8 Q F1(ti_location)87 309.6 Q F0 .183(\
This nul-terminated string is a short description of the current location of t\
he player)108 321.6 R 2.683(,f)-.4 G .183(or printing on the sta-)452.608 321.6
R(tus line.)108 333.6 Q
(It is usually displayed on the left-hand side of the status line.)5 E F1
(ti_status)87 350.4 Q F0 1.364
(This nul-terminated string contains the status of the player)108 362.4 R 6.364
(.D)-.55 G 1.364(epending on the g)367.756 362.4 R 1.363
(ame this may be score,)-.05 F .743(score and turn number)108 374.4 R 3.243(,o)
-.4 G 3.243(rt)210.272 374.4 S .743(he current time in a 12-hour clock.)219.625
374.4 R .743(This string is usually printed on the right-)5.743 F
(hand side of the status line.)108 386.4 Q .607(These global v)108 403.2 R .606
(ariables should be de\214ned in the TI .c \214le; the)-.25 F 3.106(yw)-.15 G
.606(ill be declared e)371.788 403.2 R .606(xternal where used in the)-.15 F
(interpreter code.)108 415.2 Q F1(scr_usage)87 432 Q F0(The)108 444 Q F1
(scr_usage)4.233 E F0 -.25(va)4.233 G 1.734
(riable should be initialized to a string containing info about an).25 F 4.234
(ye)-.15 G 1.734(xtra command-line)462.446 444 R(options that the TI mak)108
456 Q(es a)-.1 E -.25(va)-.2 G 2.5(ilable. Here').25 F 2.5(sa)-.55 G 2.5(ne)
288.25 456 S(xample from the)300.04 456 Q F2(termcap)2.5 E F0(TI:)2.5 E
(const char *scr_usage = "[-H \214le] [-C \214le]";)118 480 Q
(If there are no e)108 496.8 Q(xtra command-line options the v)-.15 E
(ariable should be set to the empty string \(""\),)-.25 E F1(not)2.5 E F0
(NULL.)2.5 E F1(scr_long_usage)87 513.6 Q F0(The)108 525.6 Q F1(scr_long_usage)
3.265 E F0 -.25(va)3.265 G .765(riable should be initialized to be a string co\
ntaining a one-line per option descrip-).25 F .643(tion of an)108 537.6 R 3.143
(ye)-.15 G .644(xtra command-line options that the TI mak)159.899 537.6 R .644
(es a)-.1 F -.25(va)-.2 G 3.144(ilable. Here').25 F 3.144(sa)-.55 G 3.144(ne)
424.264 537.6 S .644(xample from the)436.698 537.6 R F2(termcap)3.144 E F0(TI:)
108 549.6 Q(const char *scr_long_usage = "\\)118 573.6 Q
(\\t-H \214le\\tread/store command history in \214le\\n\\)118 585.6 Q
(\\t-C \214le\\tread/store user command completions in \214le\\n";)118 597.6 Q
(If there are no e)108 614.4 Q(xtra command-line options the v)-.15 E
(ariable should be set to NULL.)-.25 E F1(scr_opt_list)87 631.2 Q F0(The)108
643.2 Q F1(scr_opt_list)3.033 E F0 -.25(va)3.033 G .532(riable should be initi\
alized to be a string containing getopt\(3\)-style descriptions of an).25 F(y)
-.15 E -.15(ex)108 655.2 S 1.45(tra command-line options that the TI mak).15 F
1.451(es a)-.1 F -.25(va)-.2 G 3.951(ilable. Brie\215y).25 F 3.951(,e)-.65 G
1.451(ach option character is placed in the)387.444 655.2 R 1.033
(string; if the option has an ar)108 667.2 R 1.033(gument \(no optional ar)-.18
F 1.033(guments allo)-.18 F 1.033(wed\) then it should be immediately fol-)-.25
F(lo)108 679.2 Q(wed by a colon \(:\).)-.25 E(Here')5 E 2.5(sa)-.55 G 2.5(ne)
228.83 679.2 S(xample from the)240.62 679.2 Q F2(termcap)2.5 E F0(TI:)2.5 E
(const char *scr_opt_list = "C:H:";)118 703.2 Q(If there are no e)108 720 Q
(xtra command-line options the v)-.15 E
(ariable should be set to the nul string \(""\).)-.25 E(Re)72 768 Q(vision 3.0)
-.25 E(21 October 1992)272.395 768 Q(3)535 768 Q EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 133.47(PINFO_TI\(3\) Contrib)72 48 R(uted Softw)-.2 E
133.47(are PINFO_TI\(3\))-.1 F/F1 9/Times-Bold@0 SF(Inter)72 84 Q(pr)-.09 E
(eter Macr)-.162 E(os)-.162 E F0 1.471(The follo)108 96 R 1.471
(wing macros are de\214ned in)-.25 F/F2 10/Times-Italic@0 SF(infocom.h)3.972 E
F0 1.472(and a)3.972 F -.25(va)-.2 G 1.472
(ilable to the TI writer for access to certain data).25 F(structures.)108 108 Q
(The \215ags a)108 124.8 Q -.25(va)-.2 G(ilable with).25 E/F3 10/Times-Bold@0
SF(F1_*\(\))2.5 E F0(macros are:)2.5 E F3(B_USE_TIME)108 141.6 Q F0 .144
(If set them time is displayed on the status line, otherwise score/mo)144 153.6
R -.15(ve)-.15 G 2.644(si).15 G 2.644(sd)430.13 153.6 S 2.644(isplayed. This)
441.664 153.6 R .144(is a read-)2.644 F(only v)144 165.6 Q
(alue; the TI cannot change it.)-.25 E F3(B_T)108 182.4 Q(AND)-.9 E(Y)-.4 E F0
(The T)144 194.4 Q(andy license \215ag; if set then T)-.8 E
(andy licensing mode is turned on, otherwise it')-.8 E 2.5(st)-.55 G(urned of)
483.48 194.4 Q(f.)-.25 E F3(B_AL)108 211.2 Q(T_PR)-.92 E(OMPT)-.3 E F0(The alt\
ernate prompt \215ag; if set then alternate prompting is enabled, otherwise it\
')144 223.2 Q 2.5(sd)-.55 G(isabled.)480.07 223.2 Q F3(B_ST)108 240 Q -.95(AT)
-.9 G(US_WIN).95 E F0(If set the TI supports \214x)144 252 Q(ed windo)-.15 E
(ws \(for)-.25 E F2(Seastalk)2.5 E(er)-.1 E F0(\), if not set it doesn').73 E
(t.)-.18 E(The \215ags a)108 268.8 Q -.25(va)-.2 G(ilable with).25 E F3
(F2_*\(\))2.5 E F0(macros are:)2.5 E F3(B_SCRIPTING)108 285.6 Q F0
(If set then scripting mode is currently enabled, otherwise it')144 297.6 Q 2.5
(sd)-.55 G(isabled.)393.69 297.6 Q F3(B_FIXED_FONT)108 314.4 Q F0 .4
(If set then the current b)144 326.4 R(uf)-.2 E .4
(fer must be printed in a \214x)-.25 F .401
(ed-width font if possible; otherwise it may be)-.15 F
(printed in a proportional font.)144 338.4 Q F3(B_SOUND)108 355.2 Q F0 .07
(If set the interpreter may issue)144 367.2 R F3(scr_putsound\(\))2.57 E F0 .07
(requests; otherwise it w)2.57 F(on')-.1 E 2.57(t. Note)-.18 F .07
(this \215ag is read-)2.57 F(only and may not be set by the TI.)144 379.2 Q F3
(F?_IS_SET\(\))87 396 Q F0 .379(This macro returns a 0 if the speci\214ed g)108
408 R .38(ame header \215ag is not set, and a non-0 \(note)-.05 F F3(not)2.88 E
F0 .38(necessarily 1!\))2.88 F(if)5.38 E(it is not set.)108 420 Q F3
(F?_SETB\(\))87 436.8 Q F0(This macro sets the speci\214ed g)108 448.8 Q
(ame header \215ag.)-.05 E F3(F?_RESETB\(\))87 465.6 Q F0 .058
(This macro resets \(un-sets\) the speci\214ed g)108 477.6 R .058
(ame header \215ag.)-.05 F .057(The follo)5.057 F .057
(wing functions are de\214ned in the inter)-.25 F(-)-.2 E(preter and a)108
489.6 Q -.25(va)-.2 G(ilable to the TI writer for use \(no other functions in \
the interpreter should be called\).).25 E F3(xmalloc\(\))87 506.4 Q F0
(This function calls)108 518.4 Q F3(malloc\(\))2.5 E F0(and e)2.5 E
(xits with an error if there is no heap left.)-.15 E F3(xr)87 535.2 Q
(ealloc\(\))-.18 E F0(This function calls)108 547.2 Q F3 -.18(re)2.5 G
(alloc\(\)).18 E F0(and e)2.5 E(xits with an error if there is no heap left.)
-.15 E F3(chop_b)87 564 Q(uf\(\))-.2 E -.2(bu)108 576 S(f).2 E F0(Buf)144 576 Q
(fer to be chopped.)-.25 E F3(max)108 592.8 Q F0(Max number of chars w)144
592.8 Q(anted)-.1 E .28(This function locates the longest section of)108 609.6
R F3 -.2(bu)2.78 G(f).2 E F0 .28(less than or equal to)2.78 F F3(max)2.78 E F0
.28(characters containing at least one)2.78 F 1.001(complete w)108 621.6 R
3.501(ord. It)-.1 F 1.001(does not modify the b)3.501 F(uf)-.2 E(fer)-.25 E
6.001(.I)-.55 G 3.501(tr)308.208 621.6 S 1
(eturns a pointer to the space where the line should be)317.819 621.6 R(brok)
108 633.6 Q(en, or to the nul character \('\\0'\) if)-.1 E F3 -.2(bu)2.5 G(f).2
E F0(is less than or equal to)2.5 E F3(max)2.5 E F0(chars long.)2.5 E 1.067
(This function is useful with \214x)108 650.4 R 1.068
(ed-width font TIs for chopping up the b)-.15 F(uf)-.2 E 1.068(fer passed to)
-.25 F F3(scr_putline\(\))3.568 E F0(into)3.568 E
(sections which \214t on the screen.)108 662.4 Q(See e)5 E
(xamples of its use in)-.15 E F2(str)2.5 E(eam.c)-.37 E F0(.).31 E F1
(TI Functions)72 679.2 Q F0(The follo)108 691.2 Q
(wing functions need to be pro)-.25 E(vided by the TI code.)-.15 E(Re)72 768 Q
(vision 3.0)-.25 E(21 October 1992)272.395 768 Q(4)535 768 Q EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 133.47(PINFO_TI\(3\) Contrib)72 48 R(uted Softw)-.2 E
133.47(are PINFO_TI\(3\))-.1 F/F1 10/Times-Bold@0 SF(scr_cmdar)87 84 Q(g\(\))
-.1 E(ar)108 96 Q(gc)-.1 E F0(Number of command-line ar)144 96 Q(gs.)-.18 E F1
(ar)108 112.8 Q(gv_p)-.1 E F0
(Pointer to an array of strings; each one is a command-line ar)6.1 E(gument.)
-.18 E .422(This function will be called before an)108 129.6 R 2.921(yo)-.15 G
.421(ther scr_*\(\) function, and before the command-line ar)273.272 129.6 R
.421(guments are)-.18 F -.15(ex)108 141.6 S .238(amined by the interpreter).15
F 5.238(.I)-.55 G 2.738(ta)229.332 141.6 S(llo)239.29 141.6 Q .238
(ws the TI to add \(and possibly remo)-.25 F -.15(ve)-.15 G 2.738(\)a).15 G
-.18(rg)415.064 141.6 S .239(uments to the command line.).18 F .522
(If the interf)108 158.4 R .521(ace has the ability to determine command-line \
options from an alternate source, such as a con-)-.1 F .518
(\214guration \214le, an en)108 170.4 R .518(vironment v)-.4 F .518
(ariable, windo)-.25 F .519(wing resources, or sa)-.25 F -.15(ve)-.2 G 3.019
(dg).15 G .519(ame resources, then it should add)404.095 170.4 R
(these options to)108 182.4 Q F1(ar)2.5 E(gv_p)-.1 E F0(so the)2.5 E 2.5(yw)
-.15 G(ill be noticed by the interpreter)243.86 182.4 Q(.)-.55 E 1.126
(Note that when adding options the)108 199.2 R 3.625(ys)-.15 G 1.125
(hould be inserted between)263.485 199.2 R F1(\(*ar)3.625 E(gv_p\)[0])-.1 E F0
(and)3.625 E F1(\(*ar)3.625 E(gv_p\)[1])-.1 E F0 3.625(,s)C(hifting)513.33
199.2 Q .98(the e)108 211.2 R .98(xisting options o)-.15 F -.15(ve)-.15 G 1.78
-.4(r, s).15 H 3.48(ot).4 G .98(hat the)229.83 211.2 R 3.48(yw)-.15 G .98
(ill be properly o)273.3 211.2 R -.15(ve)-.15 G .98(rridden by an).15 F 3.48
(yo)-.15 G .98(ptions gi)418.15 211.2 R -.15(ve)-.25 G 3.48(no).15 G 3.48(nt)
476.38 211.2 S .98(he command)487.64 211.2 R(line.)108 223.2 Q .136
(This function should return the number of elements in)108 240 R F1(ar)2.635 E
(gv_p)-.1 E F0 .135(after modi\214cation \(the ne)2.635 F 2.635(wa)-.25 G -.18
(rg)476.165 240 S .135(ument count\).).18 F .771(It is e)108 252 R .771
(xpected that after this function is called,)-.15 F F1(\(*ar)3.271 E(gv_p\)[0])
-.1 E F0 .772(remains the name of the interpreter program,)3.271 F F1(\(*ar)108
264 Q(gv_p\)[1])-.1 E F0(to)2.5 E F1(\(*ar)2.5 E(gv_p\)[ar)-.1 E(gc-1])-.1 E F0
(are command-line ar)2.5 E(guments, and)-.18 E F1(\(*ar)2.5 E(gv_p\)[ar)-.1 E
(gc])-.1 E F0(is 0 \(NULL\).)2.5 E .722(Although it is perfectly le)108 280.8 R
-.05(ga)-.15 G 3.222(lt).05 G 3.222(or)231.68 280.8 S(emo)243.232 280.8 Q 1.022
-.15(ve a)-.15 H -.18(rg).15 G .722(uments from).18 F F1(ar)3.222 E(gv_p)-.1 E
F0 .721(as well, this is trickier because you must)3.222 F(follo)108 292.8 Q
3.276(wa)-.25 G .776(ll UNIX getopt\(1\) con)141.576 292.8 R -.15(ve)-.4 G
3.276(ntions. It).15 F .777(is suggested that)3.277 F F1(scr_getopt\(\))3.277 E
F0 .777(is used to process ar)3.277 F .777(guments on)-.18 F
(the command line, and)108 304.8 Q F1(scr_cmdar)2.5 E(g\(\))-.1 E F0
(used only to add e)2.5 E(xtra ar)-.15 E(guments if needed.)-.18 E F1
(scr_getopt\(\))87 321.6 Q(c)108 333.6 Q F0(The command-line option character)
144 333.6 Q(.)-.55 E F1(ar)108 350.4 Q(g)-.1 E F0(The command-line option ar)
144 350.4 Q(gument \(if used\).)-.18 E .299
(This function will be called each time an option speci\214ed in)108 367.2 R F1
(scr_opt_list)2.798 E F0 .298(is found on the command line.)2.798 F(It)5.298 E
.597(is guaranteed that only options contained in)108 379.2 R F1(scr_opt_list)
3.097 E F0 .598(will be passed, and each option which requires a)3.097 F 1.006
(command-line ar)108 391.2 R 1.006(gument will ha)-.18 F 1.306 -.15(ve o)-.2 H
3.506(ne. Error).15 F 1.006
(messages for poorly formed options will be printed by the)3.506 F
(interpreter and this function will not be called.)108 403.2 Q F1
(scr_setup\(\))87 420 Q(mar)108 432 Q(gin)-.1 E F0
(The number of spaces in the right mar)144 444 Q(gin.)-.18 E F1(indent)108
460.8 Q F0 .537(The number of spaces in the left mar)8.77 F 3.038(gin. Note)
-.18 F .538(that normally only the output te)3.038 F .538(xt is indented, not)
-.15 F(the command prompts.)144 472.8 Q F1(lines)108 489.6 Q F0 .183
(The number of lines per screenful.)144 489.6 R .183(If this v)5.183 F .183
(alue is non-0 then the TI must mak)-.25 F 2.682(ee)-.1 G -.15(ve)471.264 489.6
S .182(ry ef).15 F .182(fort to use)-.25 F .821(this v)144 501.6 R .821
(alue as the number of lines per screenful.)-.25 F .821
(If it is 0 then the interf)5.821 F .821(ace must infer the screen)-.1 F
(size as best it can.)144 513.6 Q F1(context)108 530.4 Q F0 .905
(The number of lines that should be k)144 542.4 R .905
(ept at the top of the screen when scrolling; this man)-.1 F 3.405(yl)-.15 G
(ines)523.89 542.4 Q(should be left at the top of each page of output if a pag\
ed output mode is in ef)144 554.4 Q(fect.)-.25 E .491
(This function is called after the g)108 571.2 R .491
(ame has initialized and e)-.05 F .492(xamined its command-line ar)-.15 F .492
(guments b)-.18 F .492(ut before)-.2 F(an)108 583.2 Q .533
(ything else is done.)-.15 F .533(It is called for both g)5.533 F .533
(ame-playing and information modes, so it should perform an)-.05 F(y)-.15 E
(setup necessary for general stdio printing.)108 595.2 Q 1.691(This function s\
hould return the number of characters that may be printed on one line in infor\
mational)108 612 R 2.5(mode. If)108 624 R -.05(ga)2.5 G
(me-playing mode is to be used then this v).05 E(alue is ignored.)-.25 E F1
(scr_shutdo)87 640.8 Q(wn\(\))-.1 E F0 .71(This function should perform an)108
652.8 R 3.21(yg)-.15 G .71(eneral end processing appropriate for both g)253.33
652.8 R .71(ame-playing and informa-)-.05 F(tional modes.)108 664.8 Q F1
(scr_begin\(\))87 681.6 Q F0 .931
(This function will be called just before the interpreter goes into g)108 693.6
R .931(ame-playing mode.)-.05 F .932(If the interpreter is)5.932 F
(running in information mode this function will ne)108 705.6 Q -.15(ve)-.25 G
2.5(rb).15 G 2.5(ec)326.48 705.6 S(alled.)337.86 705.6 Q(An)108 722.4 Q 2.896
(yg)-.15 G .395(ame-playing mode speci\214c processing should be done here, su\
ch as opening a ne)132.916 722.4 R 2.895(ww)-.25 G(indo)478.295 722.4 Q 1.695
-.65(w, c)-.25 H(learing).65 E(Re)72 768 Q(vision 3.0)-.25 E(21 October 1992)
272.395 768 Q(5)535 768 Q EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 133.47(PINFO_TI\(3\) Contrib)72 48 R(uted Softw)-.2 E
133.47(are PINFO_TI\(3\))-.1 F .582
(the screen, setting terminal characteristics, etc.)108 84 R .582
(After this function returns the screen should be set up and)5.582 F
(the cursor should be positioned at the lo)108 96 Q(wer)-.25 E
(-left hand corner of the screen.)-.2 E(Additionally)108 112.8 Q 2.934(,i)-.65
G 2.934(ft)166.124 112.8 S .434(he TI supports the creation of a \214x)175.168
112.8 R .433(ed status windo)-.15 F 2.933(w\()-.25 G .433
(in addition to the normal status line\))392.402 112.8 R .105
(it should call the macro)108 124.8 R/F1 10/Times-Bold@0 SF(F1_SETB\(B_ST)2.605
E -.95(AT)-.9 G(US_WIN\);).95 E F0 .106(here to notify the g)2.605 F .106
(ame Z-Code so that it will prop-)-.05 F(erly call the)108 136.8 Q F1
(scr_windo)2.5 E(w\(\))-.1 E F0(and)2.5 E F1(scr_set_win\(\))2.5 E F0
(functions \(see belo)2.5 E(w\).)-.25 E F1(scr_end\(\))87 153.6 Q F0 .189
(This function should perform an)108 165.6 R 2.689(ye)-.15 G .189
(nd processing appropriate for g)250.165 165.6 R .188(ame-playing mode only)
-.05 F 2.688(,s)-.65 G .188(uch as deleting)479.634 165.6 R(windo)108 177.6 Q
(ws, resetting terminal characteristics, etc.)-.25 E F1(scr_putline\(\))87
194.4 Q -.2(bu)108 206.4 S(ffer).2 E F0 3.54(An)9.54 G 1.04
(ul-terminated string containing an)159.76 206.4 R 3.54(yn)-.15 G 1.04
(umber of characters.)312.09 206.4 R 1.04(The string may be empty)6.04 F 3.54
(,b)-.65 G 1.04(ut the)516.46 206.4 R(pointer will not be NULL.)144 218.4 Q
(There will be no ne)5 E(wline character \('\\n'\) at the end of the string.)
-.25 E .716(This function should print)108 235.2 R F1 -.2(bu)3.216 G(ffer).2 E
F0 .715(to the screen, performing whate)3.216 F -.15(ve)-.25 G 3.215(rl).15 G
.715(ine wrapping, paging, etc. is neces-)395.345 235.2 R(sary)108 247.2 Q 5
(.P)-.65 G(rocessing should proceed as follo)137.07 247.2 Q(ws:)-.25 E -.15(Fo)
108 264 S 2.5(re).15 G(ach lineful of characters in)128.68 264 Q F1 -.2(bu)2.5
G(ffer).2 E F0(:)A 15(*p)108 280.8 S(rint whate)133 280.8 Q -.15(ve)-.25 G 2.5
(ri).15 G(ndent w)190.92 280.8 Q(as speci\214ed.)-.1 E 15(*p)108 297.6 S
(rint a lineful along with a ne)133 297.6 Q(wline and whate)-.25 E -.15(ve)-.25
G 2.5(rs).15 G(crolling is necessary)330.37 297.6 Q(.)-.65 E 15(*i)108 314.4 S
2.816(ft)130.78 314.4 S .316(he interf)139.706 314.4 R .316
(ace supports paging, and it')-.1 F 2.816(se)-.55 G .316(nabled, and it')
295.642 314.4 R 2.817(sb)-.55 G .317(een \(screenful - conte)364.921 314.4 R
.317(xt\) lines since the last)-.15 F(prompt w)128 326.4 Q
(as printed, then perform whate)-.1 E -.15(ve)-.25 G 2.5(rp).15 G
(aging is necessary)308.85 326.4 Q(.)-.65 E .506
(If the TI supports proportional- and \214x)108 343.2 R .506
(ed-width fonts then the macro call)-.15 F F1(F2_IS_SET\(B_FIXED_FONT\))3.005 E
F0 1.292(should be used before printing)108 355.2 R F1(each)3.792 E F0 1.292
(line; if the macro returns non-0 then that line must be printed in a)3.792 F
<8c78>108 367.2 Q 1.204(ed-width font if possible \(maps, etc.\).)-.15 F 1.203
(If the macro returns 0 then a proportional font may be used if)6.204 F
(desired.)108 379.2 Q 1.263(If the TI supports scripting then the macro call)
108 396 R F1(F2_IS_SET\(B_SCRIPTING\))3.764 E F0 1.264(should be check)3.764 F
1.264(ed; if the)-.1 F(macro returns non-0 then)108 408 Q F1 -.2(bu)2.5 G(ffer)
.2 E F0(should be printed to the script \214le as well.)2.5 E F1(scr_putscor)87
424.8 Q(e\(\))-.18 E F0 .497(This function is called whene)108 436.8 R -.15(ve)
-.25 G 2.997(rt).15 G .497(he v)245.895 436.8 R .497
(alues on the status line are to be displayed.)-.25 F .496(If the interf)5.496
F .496(ace supports)-.1 F .133
(status-line printing and it is enabled, then this function should use the v)
108 448.8 R .134(alues of)-.25 F F1(ti_location)2.634 E F0(and)2.634 E F1
(ti_status)2.634 E F0(to)2.634 E 1.572
(display the status line on the screen in whate)108 460.8 R -.15(ve)-.25 G
4.072(rm).15 G 1.572(anner it chooses \(these v)323.108 460.8 R 1.572
(ariables al)-.25 F -.1(wa)-.1 G 1.571(ys contain the).1 F(proper v)108 472.8 Q
(alues; the)-.25 E 2.5(ym)-.15 G(ay be used by an)194.53 472.8 Q 2.5(yT)-.15 G
2.5(If)274.64 472.8 S(unction\).)283.8 472.8 Q
(This function should be also be called whene)108 489.6 Q -.15(ve)-.25 G 2.5
(rt).15 G(he TI code might ha)305.9 489.6 Q .3 -.15(ve d)-.2 H
(isturbed the status line.).15 E F1(scr_putsound\(\))87 506.4 Q(number)108
518.4 Q F0(The sound number to be played.)144 530.4 Q F1(action)108 547.2 Q F0
(The action to be tak)9.89 E(en.)-.1 E F1 -.1(vo)108 564 S(lume).1 E F0(The v)
144 576 Q(olume at which to play the sound \(between 1 and 8\).)-.2 E F1(ar)108
592.8 Q(gc)-.1 E F0(The number of ar)144 592.8 Q
(guments \(1 to 3\) passed to the function.)-.18 E .098
(This function will be called by the interpreter if the g)108 609.6 R .098
(ame being played contains sound support.)-.05 F .098(If the inter)5.098 F(-)
-.2 E -.1(fa)108 621.6 S(ce doesn').1 E 2.5(ts)-.18 G(upport sound then a simp\
le output line may be printed by this function stating that f)162.7 621.6 Q
(act.)-.1 E .716(Unfortunately dif)108 638.4 R .716(ferent v)-.25 F .716
(ersions of Infocom g)-.15 F .715(ames require dif)-.05 F .715
(ferent methods of sound support, b)-.25 F .715(ut gener)-.2 F(-)-.2 E .846(al\
ly a separate sounds \214le is supplied with the data\214le and the sounds mus\
t be retrie)108 650.4 R -.15(ve)-.25 G 3.346(da).15 G .847(nd played from)
477.206 650.4 R(there.)108 662.4 Q F1(scr_putmesg\(\))87 679.2 Q -.2(bu)108
691.2 S(ffer).2 E F0 2.5(An)9.54 G
(ul-terminated string containing a message from the interpreter)158.72 691.2 Q
(.)-.55 E(Re)72 768 Q(vision 3.0)-.25 E(21 October 1992)272.395 768 Q(6)535 768
Q EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 133.47(PINFO_TI\(3\) Contrib)72 48 R(uted Softw)-.2 E
133.47(are PINFO_TI\(3\))-.1 F/F1 10/Times-Bold@0 SF(is_err)108 84 Q(or)-.18 E
F0(Set to 1 if the message is an error message, or 0 if it')144 96 Q 2.5(sa)
-.55 G 2.5(ni)364.8 96 S(nformational message only)375.08 96 Q(.)-.65 E .504
(This function is called whene)108 112.8 R -.15(ve)-.25 G 3.003(rt).15 G .503
(he interpreter needs to print a message for some reason.)245.927 112.8 R .503
(Messages from)5.503 F .318(the g)108 124.8 R .318
(ame will be printed via scr_putline\(\).)-.05 F .318(The TI should)5.318 F F1
(not)2.818 E F0 .318(attempt to e)2.818 F .319(xit the program or an)-.15 F
.319(ything else;)-.15 F
(the interpreter will decide what to do about the message.)108 136.8 Q F1
(scr_getline\(\))87 153.6 Q(pr)108 165.6 Q(ompt)-.18 E F0 2.5(An)144 177.6 S(u\
l-terminated string which is the prompt to be printed when requesting a comman\
d.)158.72 177.6 Q F1(length)108 194.4 Q F0(The maximum number of characters \(\
including the nul character\) which can be placed in)9.33 E F1 -.2(bu)2.5 G
(ffer).2 E F0(.)A F1 -.2(bu)108 211.2 S(ffer).2 E F0 2.5(As)9.54 G(tring of)
157.61 211.2 Q F1(length)2.5 E F0
(characters, in which the command should be returned.)2.5 E 1.748(This functio\
n is called when the interpreter needs command input from the user)108 228 R
6.748(.T)-.55 G 1.748(he function should)462.064 228 R 1.786(accept up to)108
240 R F1(length)4.287 E F0 1.787
(-1 characters of input and place them, along with a terminating nul character)
B 4.287(,i)-.4 G(nto)527.22 240 Q F1 -.2(bu)108 252 S(ffer).2 E F0 5.337(.A)C
.337(ll command history)149.517 252 R 2.837(,e)-.65 G .336
(diting, shell escaping, etc. etc. must be done internal to this function.)
237.098 252 R(Also)5.336 E .269(if the user types more than)108 264 R F1
(length)2.769 E F0 .269(-1 characters the function should \215ush the rest of \
the input and notify the)B(user that it is doing so.)108 276 Q .695(If this fu\
nction causes the status line to be messed up \(i.e., a shell escape causes e)
108 292.8 R .694(xtra lines to be printed,)-.15 F(etc.\) care should be tak)108
304.8 Q(en to re)-.1 E(write the status line correctly)-.25 E(.)-.65 E .122(Th\
e interpreter supports an "interpreter escape mode", where interpreter \215ags\
 and options may be modi\214ed.)108 321.6 R .317(This mode is in)108 333.6 R
-.2(vo)-.4 G -.1(ke).2 G 2.817(db).1 G 2.817(yt)202.458 333.6 S .316
(he user typing the escape character \(by def)213.055 333.6 R .316(ault `)-.1 F
(`@')-.74 E .316('\) as the \214rst character on the)-.74 F .374(command line.)
108 345.6 R .374(If this function sees that as the \214rst character)5.374 F
2.874(,i)-.4 G 2.874(ts)362.784 345.6 S .374(hould call)372.328 345.6 R F1
(ti_escape\(\))2.874 E F0 .375(with the remainder)2.874 F .173
(of the command line \()108 357.6 R F1(not)2.673 E F0 .172
(the escape character\).)2.673 F .172
(Once that function returns the prompt should be reprinted)5.172 F .062
(and more input should be obtained without returning.)108 369.6 R .062
(If the TI wishes to pro)5.062 F .063(vide its o)-.15 F .063
(wn escape commands)-.25 F(it should process them itself and not call)108 381.6
Q F1(ti_escape\(\))2.5 E F0(for those commands.)2.5 E .124
(The escape char by itself will list the a)108 398.4 R -.25(va)-.2 G .124
(ilable options.).25 F .124
(If the TI wishes to supply options in addition to the)5.124 F
(interpreter options, it should call)108 410.4 Q F1(ti_escape\(\))2.5 E F0
(\214rst, then print its o)2.5 E(wn options.)-.25 E .514
(Note that the TI may pro)108 427.2 R .514(vide alternati)-.15 F .814 -.15
(ve w)-.25 H .515(ays of manipulating these options, such as pull-do).05 F .515
(wn or pop-up)-.25 F .309(menus on windo)108 439.2 R .309(wing systems;)-.25 F
F1(ti_escape\(\))2.809 E F0 .309(can be called whene)2.809 F -.15(ve)-.25 G
2.809(rc).15 G .308(ontrol is properly passed to the TI; not)384.241 439.2 R
(from a signal handler)108 451.2 Q 2.5(,e)-.4 G(tc.)202.3 451.2 Q .221
(If the TI supports scripting, then it should check the command to see if it w)
108 468 R .222(as "script".)-.1 F .222(If it w)5.222 F .222(as and script-)-.1
F 1.416(ing is not already enabled then it should be enabled here.)108 480 R
1.416(If the enabling f)6.416 F 1.415(ails then an error should be)-.1 F(print\
ed and the TI should ask for another command without returning to the interpre\
ter)108 492 Q(.)-.55 E .928
(The function should return the number of characters placed into)108 508.8 R F1
-.2(bu)3.429 G(ffer).2 E F0 3.429(,n)C .929(ot counting the terminating nul)
412.394 508.8 R(character)108 520.8 Q(.)-.55 E F1(scr_windo)87 537.6 Q(w\(\))
-.1 E(size)108 549.6 Q F0 .537(Create a \214x)144 549.6 R .537(ed status windo)
-.15 F(w)-.25 E F1(size)3.037 E F0 .537(lines high.)3.037 F(If)5.537 E F1(size)
3.037 E F0 .536(is 0, then delete the current \214x)3.037 F .536
(ed status win-)-.15 F(do)144 561.6 Q 2.5(w\()-.25 G(if an)166.8 561.6 Q(y\).)
-.15 E 1.116(This function is called if the g)108 578.4 R 1.116
(ame supports a \214x)-.05 F 1.117(ed status windo)-.15 F 3.617(w\()-.25 G
(currently)389.255 578.4 Q/F2 10/Times-Italic@0 SF(Seastalk)3.617 E(er)-.1 E F0
1.117(is the only such)3.617 F 4.268(Standard Series g)108 590.4 R 4.268
(ame\), and the TI has re)-.05 F 4.268
(gistered that it supports such functionality by calling)-.15 F F1
(F1_SETB\(B_ST)108 602.4 Q -.95(AT)-.9 G(US_WIN\)).95 E F0(in scr_be)2.5 E
(gin\(\) \(see abo)-.15 E -.15(ve)-.15 G(\).).15 E .058
(The function will be passed the number of v)108 619.2 R .058
(ertical lines needed for the \214x)-.15 F .059(ed status windo)-.15 F 3.859
-.65(w. W)-.25 H .059(hen the win-).65 F(do)108 631.2 Q 2.802(wi)-.25 G 2.802
(st)130.552 631.2 S 2.802(ob)140.024 631.2 S 2.802(ed)152.826 631.2 S .302
(eleted it will be passed an ar)165.068 631.2 R .302(gument of 0.)-.18 F .301
(Note it may be passed a 0 e)5.302 F -.15(ve)-.25 G 2.801(ni).15 G 2.801(ft)
468.177 631.2 S .301(he windo)477.088 631.2 R 2.801(wc)-.25 G(ur)528.54 631.2 Q
(-)-.2 E(rently doesn')108 643.2 Q 2.5(te)-.18 G
(xist; in this case the function should just silently return.)169.88 643.2 Q
(If the TI doesn')108 660 Q 2.5(ts)-.18 G(upport a \214x)179.47 660 Q
(ed status windo)-.15 E 2.5(wt)-.25 G(hen just pro)299.9 660 Q
(vide a dummy function which does nothing.)-.15 E F1(scr_set_win\(\))87 676.8 Q
(win)108 688.8 Q F0(Determines which windo)144 688.8 Q 2.5(wt)-.25 G 2.5(os)
256.79 688.8 S(tart printing in.)268.18 688.8 Q 1.116
(This function is called if the g)108 705.6 R 1.116(ame supports a \214x)-.05 F
1.117(ed status windo)-.15 F 3.617(w\()-.25 G(currently)389.255 705.6 Q F2
(Seastalk)3.617 E(er)-.1 E F0 1.117(is the only such)3.617 F 4.268
(Standard Series g)108 717.6 R 4.268(ame\), and the TI has re)-.05 F 4.268
(gistered that it supports such functionality by calling)-.15 F F1
(F1_SETB\(B_ST)108 729.6 Q -.95(AT)-.9 G(US_WIN\)).95 E F0(in scr_be)2.5 E
(gin\(\) \(see abo)-.15 E -.15(ve)-.15 G(\).).15 E(Re)72 768 Q(vision 3.0)-.25
E(21 October 1992)272.395 768 Q(7)535 768 Q EP
%%Page: 8 8
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 133.47(PINFO_TI\(3\) Contrib)72 48 R(uted Softw)-.2 E
133.47(are PINFO_TI\(3\))-.1 F .309(After the)108 84 R/F1 10/Times-Bold@0 SF
(scr_windo)2.809 E(w\(\))-.1 E F0 .309(function has been called \(see abo)2.809
F -.15(ve)-.15 G .31(\), this function will be used to switch back and).15 F
.121(forth between the tw)108 96 R 2.621(ow)-.1 G(indo)205.584 96 Q 2.621
(ws. If)-.25 F .121(called with)2.621 F F1(win)2.621 E F0 .121
(set to 0, then the TI should set up to start printing in the)2.621 F(re)108
108 Q .15(gular te)-.15 F .15(xt windo)-.15 F 3.95 -.65(w. I)-.25 H 2.65(fc).65
G .15(alled with)209.04 108 R F1(win)2.65 E F0 .151
(set to 1, then set up to start printing in the \214x)2.65 F .151
(ed status windo)-.15 F 3.951 -.65(w. A)-.25 H(ll).65 E
(actual printing is done with the normal)108 120 Q F1(scr_putline\(\))2.5 E F0
(function.)2.5 E F1(scr_open_sf\(\))87 136.8 Q(length)108 148.8 Q F0(The maxim\
um number of characters \(including the nul character\) which can be placed in)
9.33 E F1 -.2(bu)2.5 G(ffer).2 E F0(.)A F1 -.2(bu)108 165.6 S(ffer).2 E F0 2.5
(As)9.54 G(tring of)157.61 165.6 Q F1(length)2.5 E F0
(characters, in which the \214lename should be returned.)2.5 E F1(type)108
182.4 Q F0(The type of sa)144 182.4 Q .3 -.15(ve \214)-.2 H
(le to be opened: SF_SA).15 E(VE, SF_REST)-1.35 E(ORE, or SF_SCRIPT)-.18 E(.)
-.74 E .317(This function is called when the interpreter needs to open a sa)108
199.2 R .617 -.15(ve g)-.2 H .317(ame \214le for either sa).1 F .316
(ving or restoring, or)-.2 F(to open a script \214le.)108 211.2 Q(When)108 228
Q F1(scr_open_sf\(\))2.753 E F0 .253(is called,)2.753 F F1 -.2(bu)2.753 G(ffer)
.2 E F0 .253(will contain a def)2.753 F .254
(ault \214lename \(initially it will be a static name, after)-.1 F .229
(the \214rst call it will contain the last \214lename entered\).)108 240 R(If)
5.229 E F1(length)2.729 E F0 .229
(is 0, then the \214le should just be opened and)2.729 F .627
(the \214le pointer returned.)108 252 R(If)5.627 E F1(length)3.127 E F0 .628
(is greater than 0, the function should print an appropriate prompt, then)3.127
F 1.787(accept up to)108 264 R F1(length)4.287 E F0 1.787
(-1 characters of input and place them, along with a terminating nul character)
B 4.286(,i)-.4 G(nto)527.22 264 Q F1 -.2(bu)108 276 S(ffer).2 E F0
(then open that \214le and return the \214le pointer)2.5 E(.)-.55 E(If)108
292.8 Q F1(type)2.767 E F0 .267(is SF_SA)2.767 F .267(VE or SF_SCRIPT)-1.35 F
2.767(,t)-.74 G .268(hen the \214le is being opened to sa)260.032 292.8 R .568
-.15(ve t)-.2 H .268(he g).15 F .268(ame or write script to and so)-.05 F .291
(should be opened for writing \(binary mode for SF_SA)108 304.8 R .291
(VE and plain te)-1.35 F .29(xt mode for SF_SCRIPT\).)-.15 F .29(The func-)5.29
F(tion should test if the \214le already e)108 316.8 Q
(xists and if so, ask the user to con\214rm o)-.15 E -.15(ve)-.15 G
(rwriting it.).15 E(If)108 333.6 Q F1(type)2.795 E F0 .295(is SF_REST)2.795 F
.295(ORE, then the \214le is being opened to restore a g)-.18 F .295
(ame and so should be opened for read-)-.05 F(ing in binary mode.)108 345.6 Q
(An)108 362.4 Q 3.189(yc)-.15 G .689(ommand history)132.699 362.4 R 3.189(,e)
-.65 G .689(diting, \214lename completion, shell escaping, etc. etc. must be d\
one internal to this)208.147 362.4 R 2.552(function. Also)108 374.4 R .052
(if the user types more than)2.552 F F1(length)2.552 E F0 .052
(-1 characters the function should \215ush the rest of the input)B
(and notify the user that it is doing so.)108 386.4 Q .695(If this function ca\
uses the status line to be messed up \(i.e., a shell escape causes e)108 403.2
R .694(xtra lines to be printed,)-.15 F(etc.\) care should be tak)108 415.2 Q
(en to re)-.1 E(write the status line correctly)-.25 E(.)-.65 E .411
(If the TI wishes to use this function for other purposes, the)108 432 R F1
(type)2.911 E F0(ar)2.911 E .411(gument can be used: the interpreter will)-.18
F .076(only call this function with v)108 444 R .075(alues >=0 for)-.25 F F1
(type)2.575 E F0 .075(so the TI is free to call it with special v)2.575 F .075
(alues <0 if it wishes.)-.25 F .02
(The function should return a FILE pointer to the open \214le.)108 460.8 R .02
(If the user cancels the operation someho)5.02 F 2.52(wo)-.25 G 2.52(rt)521.93
460.8 S(he)530.56 460.8 Q .398(open f)108 472.8 R .397
(ails, then the function should return 0 \(NULL\).)-.1 F .397(If the return v)
5.397 F .397(alue is NULL then the interpreter will)-.25 F -.15(ex)108 484.8 S
(amine).15 E F1(err)2.892 E(no)-.15 E F0 2.892(:i)C(f)176.804 484.8 Q F1(err)
2.892 E(no)-.15 E F0 .393
(is 0 then the interpreter will assume the operation w)2.892 F .393
(as canceled; if it')-.1 F 2.893(sn)-.55 G .393(on-0 then)501.557 484.8 R .277
(the interpreter will assume there w)108 496.8 R .277
(as an error during opening of the \214le and print an appropriate error mes-)
-.1 F(sage.)108 508.8 Q .008(If the function returns non-NULL, the interpreter\
 will attempt to read/write data from the current position in)108 525.6 R .282
(the \214le without re)108 537.6 R .282(winding or other manipulation.)-.25 F
.282(This means that you may store TI-speci\214c information at)5.282 F(the be)
108 549.6 Q(ginning of sa)-.15 E -.15(ve)-.2 G 2.5(dg).15 G
(ame \214les and read them back in when restoring if you lik)205.77 549.6 Q(e.)
-.1 E F1(scr_close_sf\(\))87 566.4 Q(\214lenm)108 578.4 Q F0(The name of the g)
9.33 E(ame \214le just sa)-.05 E -.15(ve)-.2 G(d/restored).15 E F1(fp)108 595.2
Q F0(FILE pointer of the g)144 595.2 Q(ame just sa)-.05 E -.15(ve)-.2 G
(d/restored).15 E F1(type)108 612 Q F0(The type of sa)144 612 Q .3 -.15
(ve \214)-.2 H(le to be opened: SF_SA).15 E(VE, SF_REST)-1.35 E
(ORE, or SF_SCRIPT)-.18 E(.)-.74 E .187
(This function is called immediately after a g)108 628.8 R .187(ame sa)-.05 F
.487 -.15(ve \214)-.2 H .187(le is sa).15 F -.15(ve)-.2 G 2.687(do).15 G 2.687
(rr)380.564 628.8 S .187(estored or a script \214le is to be closed.)389.911
628.8 R .369(At the v)108 640.8 R .369
(ery least this function should perform an)-.15 F F1(fclose\(fp\))2.869 E F0
.369(to close the \214le.)2.869 F .369(Additionally it may add more)5.369 F(te\
rminal-speci\214c data, create special con\214guration \214les, change \214le \
pri)108 652.8 Q(vile)-.25 E(ges, etc.)-.15 E .411
(If the TI wishes to use this function for other purposes, the)108 669.6 R F1
(type)2.911 E F0(ar)2.911 E .411(gument can be used: the interpreter will)-.18
F .076(only call this function with v)108 681.6 R .075(alues >=0 for)-.25 F F1
(type)2.575 E F0 .075(so the TI is free to call it with special v)2.575 F .075
(alues <0 if it wishes.)-.25 F/F2 9/Times-Bold@0 SF(Writing a New Interface)72
698.4 Q F0 .594(If you wish to create a ne)108 710.4 R 3.094(wT)-.25 G .594
(I, I suggest that you start with stream.c as the simplest current interf)
228.818 710.4 R 3.094(ace. Be)-.1 F .987(sure you e)108 722.4 R .986
(xamine all of this code so you understand in detail what each function does.)
-.15 F -1.1(Yo)5.986 G 3.486(us)1.1 G .986(hould then)496.514 722.4 R(Re)72 768
Q(vision 3.0)-.25 E(21 October 1992)272.395 768 Q(8)535 768 Q EP
%%Page: 9 9
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 133.47(PINFO_TI\(3\) Contrib)72 48 R(uted Softw)-.2 E
133.47(are PINFO_TI\(3\))-.1 F(create your o)108 84 Q
(wn .c \214le and add functionality as you lik)-.25 E(e.)-.1 E/F1 9
/Times-Bold@0 SF(MAKEFILE)72 100.8 Q F0 .511(After you create your ne)108 112.8
R 3.011(wT)-.25 G 3.011(Iy)223.875 112.8 S .511
(ou should name the .c \214le something rele)235.216 112.8 R -.25(va)-.25 G
.511(nt, such as).25 F/F2 10/Times-Italic@0 SF(pcdos.c)3.011 E F0 .511
(for an inter)3.011 F(-)-.2 E -.1(fa)108 124.8 S .384
(ce to an IBM PC-compatible in DOS, or).1 F F2(pcwindows.c)2.884 E F0 .384
(for an interf)2.884 F .383(ace to an IBM PC-compatible running)-.1 F(MS-W)108
136.8 Q(indo)-.4 E .515(ws, or something.)-.25 F .516
(Then you should create a ne)5.515 F 3.016(wT)-.25 G .516
(ERMTYPE section in the Mak)361.15 136.8 R 3.016(e\214le. Decide)-.1 F .036
(what, if an)108 148.8 R 1.336 -.65(y, \215)-.15 H .036(ags you need to gi).65
F .336 -.15(ve t)-.25 H 2.536(ot).15 G .036(he compiler and \214ll in TERMFLA)
262.944 148.8 R .036(GS; lik)-.4 F -.25(ew)-.1 G .035(ise for an).25 F 2.535
(ye)-.15 G .035(xtra libraries)489.145 148.8 R(you need and TERMLIB.)108 160.8
Q 1.615(If you')108 177.6 R 4.115(dl)-.5 G(ik)148.5 177.6 Q 4.115(ey)-.1 G
1.615(our interf)169.735 177.6 R 1.616(ace distrib)-.1 F 1.616
(uted with the pinfocom distrib)-.2 F 1.616(ution, and an interf)-.2 F 1.616
(ace doesn')-.1 F 4.116(ta)-.18 G(lready)515.01 177.6 Q -.15(ex)108 189.6 S
1.181(ist, then send it to the pinfocom maintainer and he/she').15 F 1.18
(ll incorporate it in.)-.1 F 1.18(Note you must place your)6.18 F(interf)108
201.6 Q .415(ace code under the GNU Public License for it to be distrib)-.1 F
.416(uted \(see the cop)-.2 F .416(yright notices in the other)-.1 F .228
(\214les\), and pro)108 213.6 R .227
(vide an address for people to contact you about b)-.15 F .227
(ugs, enhancements, etc. in a comment in the)-.2 F(.c \214le.)108 225.6 Q 1.477
(If an interf)108 242.4 R 1.477(ace already e)-.1 F 1.477(xists then you')-.15
F 1.477(ll ha)-.1 F 1.777 -.15(ve t)-.2 H 3.977(oc).15 G 1.478
(ontact the author and the tw)318.593 242.4 R 3.978(oo)-.1 G 3.978(fy)451.23
242.4 S 1.478(ou can hash it out)463.538 242.4 R(between you :-\).)108 254.4 Q
(Re)72 768 Q(vision 3.0)-.25 E(21 October 1992)272.395 768 Q(9)535 768 Q EP
%%Trailer
end
%%EOF
