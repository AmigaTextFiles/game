; The Legend of the Elves v1.5 Update Installation Script
; (C) 1998/1999 Peter Armann

(complete 0)

(set #vernum (getversion))
(set #ver (/ #vernum 65536))
(set #vb (database "vblank"))

(If (= (cat #vb) 60)
   (abort "You need a PAL Amiga to run \"The Legend of the Elves\".\nSorry!")
)

(message (cat "Thank you for choosing to update \"The Legend of the Elves\".\n\n"
              "This script will guide you through the simple installation procedure."  
         )
)

(set #destdir
   (askdir
      (prompt "Please select the directory where the\n\"Legend of the Elves\" 'Elves' directory exists")
      (help @askdir-help)
      (default "Work:")
   )
)


(set @default-dest (tackon #destdir "Elves"))
(if (not (exists (@default-dest)))
   (abort (cat "The game doesn't seem to be installed here\n\n"
               "The 'Elves' directory does not exist"
          )
   )
)

(copyfiles
   (source "Eric")
   (dest @default-dest)
)

(complete 33)

(copyfiles
   (source "Legend.guide")
   (dest @default-dest)
)

(complete 66)

(copyfiles
   (source "")
   (dest @default-dest)
   (pattern "ODATA#?")
)

(complete 99)

(message (cat "Thank you for updating \"The Legend of the Elves\"\n\n"
              "If you haven't already, please register your copy of\n"
              "\"The Legend of the Elves\" for free at\n\n"
              "http://www.ericelf.freeserve.co.uk/\n\n"
              "(Please note the change of web address)"
         )
)

(complete 100)
(exit)
