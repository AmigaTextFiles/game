NEWS for Porrog
===============

Changes in V0.06 since V0.05(b)
===============================

 The HARD TO KILL Release :D (after hiatus of a year and a day...)
 ===========================

-Fancy graphical splash-screens, rendered in full monochrome ASCII!
 (NB: symbols for rendering system not fully allocated, so you'll see
 lots of "4"s and other such nonsense in the renderings for a while. Sorry)

-Time system implemented: various actions take different amounts of
 time, some take none at all. Note that this is not remotely complete!
 With the time system, added a "wait" key to simple stand still for a moment.

-You will not notice when doors you've already seen are opened out of
 your sight, until they're actually visible again. This also applies to
 the doors closing, except you're the only one who can close them so far.

-Doors can't be closed on creatures or (heaps of) items, can sometimes
 stick when opening or closing, and finally have a decent UI.

-Some new tools, and staves added! Some items changed symbol and/or colour.
 Some items are now a bit rarer than others.

-Properly fixed the bug that I only half fixed in 0.05b. Sorry.

-Work started on making game work under Windows. Mostly works, but has
 glitches, and Windows console is SLOW and unresponsive!!! Also hasn't
 had much testing, and Windows version doesn't work under DOS. I'll try
 to see if I can make DJGPP work for that :)
 (NOTE: Has now been tested a lot more, so some bugs found and fixed)

-Item lists no longer have the stupid bug that made it look like the game
 had frozen, and are a *lot* better in general, now!

-Various user prompts are now shown in a dedicated "prompt" area of the
 display, for clarity. Prompts shown there will *not* appear in the
 messages log (this is deliberate!!). Once the user has given a response
 to the prompt, the prompt is removed (again, for clarity).

-You can now (on the one hand) get hungry, and (on the other) eat things!
 Note that both of these features can be disabled with the "NO_EAT"
 compile-time option, in which case the game will act as before in that
 respect. Note also that *currently* everything you can eat will yield
 the same level of nutrition.

-Numerous code tidyings etc that you almost certainly won't notice but I
 will because I have to work with it ;)

-Monsters are now in colour.

-Help pages reorganised, and several new ones added

-Pressing help key ('?') again in (contents pages of) help system gives
 you a page of help *about* help :)

-Some items such as food (but not condiments) and coins are never
 generated cursed any more.

-Probably other things I've forgotten.


Changes in V0.05b since V0.05
=============================

-Fixed a bug that only showed up from OSX


Changes in V0.05 since V0.04
============================

-Map display is now drawn (partly) in colour! After much combat, your
 surroundings now appear to be swimming in blood (due to the red corpses)

-Finally implemented the help system, and it seems to be working very
 nicely, and a lot more snapilly than I'd imagined it would be.
 VERY satisfying!

-There's also an separate, standalone helpfile browser, named porroghelp,
 that you can use to test helpfiles. You could also use it for your own
 uses, if you wanted. The core code could even be ported to other projects
 (where *both* licenses allow it), as it is fairly self-contained. Note
 that when you view help within porrog, it isn't using the standalone
 version, but both viewers use the same code.

-Done some changes to the way items are described (they should now mostly
 look right; some food items still look wrong).

-Items now stack together if they're the same type (eg: picking up an
 arrow when you already have an arrow gives you 2 arrows, rather than
 an arrow and another arrow), and some items may be generated in quantity.

-Some items can be cursed! Wooeeooo! But ATM, you automatically see them
 as such, and there's no way of removing cursed items. This will change,
 of course!

-Dungeon features are described! (But altars aren't actually useful yet)

-Potions now have descriptions separate from their types ("flavoured items",
 as Angband would describe them), such that each game a magic potion will
 have a different description, etc. Also, you can now QUAFF the potions!
 And they have effects! Well, they print a stupid message, anyways.

-Items you pick up are now placed at the *end* of your inventory, not the
 start, making it look nicer (and like all other roguelikes I can think
 of).

-Monsters are now different to each other! And there's a couple more.

-You can now gain experience, and advance with it; the level you're at
 affects the level of monsters that get generated, too.

-Monsters can advance too! Although their advancement needs tweaking.

-Weapons and stats now have an effect on combat!


Changes in V0.04 since V0.03
============================

 The combat mechanics release!
 =============================

-Compile-time options are now set in config.h rather than in the makefile.
 This means that if you change those options, you *don't* have to do
 make clean  before you can recompile: instead, make notices the change
 and deals with it properly. OTOH you need to know the format for the
 options is different.

-Some attempt is actually given to freeing memory now, so you *shouldn't*
 see reports of hundreds of memory allocations being unfreed when the
 game ends. If there *are* any unfreed at that point, it'll print out
 a cryptic report of *what* things are unfreed. Don't sweat it, it's
 just to help me spot memory leaks. It shouldn't be serious.
 But I've now reached the point where I'm seeing *no* unfreed memory
 being reported any more (good).

-Armour now has an effect on combat! Armour items have a "coverage"
 factor, and a "protection" factor. The coverage makes it more likely
 the item will get in the way of the attack, the protection decreases
 the amount of damage a blow does. The status area now shows details
 of the armour: it shows total coverage (a percentage), and also
 "Protection Average", which isn't used in any calculations, but gives
 a good indication of average level of protection given over many
 hits on you. I'll explain it in the help pages ...when I do them.

-Started work on differentiating one item type from another. So far,
 this is being done for the armour items and the containers.

-Decided on a couple of stats (still need more later), and details of
 how stats work- there's to be one global scale of stats, but different
 races will have different possible ranges for these stats. The closer
 you get to your race's maximum for a stat, the harder it gets to
 improve that stat. This is already implemented. But currently, the
 player has his stat ranges hardcoded, and there's no way to train them!

-Put in preliminary code to display message history like in Nethack
 (when you press ctrl-P, also like in Nethack...). After a while,
 I improved it by making it fully scrollable (it still only stores
 the 200 or so latest messages though), and it seems complete now.
 Extra long lines are cropped because I can't be bothered dealing
 with word wrap there (its complicated enough in the normal messages
 display). Please look out for any potential bugs there!

-All the annoying debug messages are no longer shown in the messages
 area on screen, but are instead put into a bug log that is dumped to
 a file at the end of the game. If something sufficiently serious is
 logged, "*BUG LOGGED* will still be shown on the screen. But most of
 these bugs will make the game stop anyway.

-Thanks to the use of that new function, you should no longer have
 to worry about the FATAL_PATHS compile-time option; FATAL_PATHS was
 only a setting that forced the game to crash when the AI's pathfinding
 tripped up, so I wouldn't miss any time this happened. As I soon
 found out that this happened, and that it actually happened pretty
 often, this was no longer news (as it should be fixed, I'll again
 want to know if it happens though if it happens). And with the
 bug logging function, it isn't so necessary to crash the game to
 make sure it isn't missed. THIS IS GOOD!

-The terrible map generation bug that caused the aforementioned
 pathfinding crashes has now been mostly FIXED, as long as you don't
 comment out the "PLUNK_PATHS" option in config.h (just leave that line
 as it is, you have no resaon to touch it!!). There's strictly speaking
 some stuff the reworked code doesn't do yet, but that's for fairly
 unusual circumstances that I don't think will crop up often. I'll
 finish that later, but in the meantime, it should be fine.

-The state of doors (open/closed) is now persistent! Previously, if you
 left a level, everything would be exactly the same when you returned,
 except the doors would all be shut! Well, that's fixed now. Unfortunately
 your memory of what you'd already seen still *isn't* persistent across
 levels, that's a lot harder (storing all the visibility data on a
 naive, cell-by-cell basis for each level would take too much memory,
 so it wants to be done smarter than that). In the meantime, you'll
 just have to try to remember the layout yourself!!

-Players get a starting inventory! What exactly you get is currently
 chosen from 1 of 4 sets of equipment (but if you don't use the compile-
 -time option for random games, you'll always get the same stuff).

-Containers are being reworked. You can now take things out again
 (how helpful!), and the UI for them is improved. Will improve the
 UI further in future. Also note now that many containers now can
 only hold certain types of things, and have weight limits (but
 currently, all items have a weight of 1...). Please play with
 the containers to see if you can find bugs!

-Can now 'T'ake off armour you've worn. Handy, eh? ;)

-I've tried changing the 'w'ield command to work like NH to allow you
 to press '-' to mean "wield nothing". But as 'w' allows you to ready
 ranged weapons too, which use a separate slot, this raises the issue
 of how you specify "ready nothing" with this system. Pah.
 And unlike NH, you still can't wield something whilst you're already
 wielding something else. This design needs more thought.

-The display is now slightly taller (for the map view area, anyway).

-I finally noticed a very old bug from the beginning of the map
 generation code. I was suprised to realise what an effect it had
 on subsequent steps of the map generation: if running in the
 non-randomised version, the maps produced seem to be profoundly
 different now I've fixed that bug. :|

-Fixed behaviour of rings (before, you could put the same ring on
 twice in a row, for example).


Changes in V0.03 since V0.02
============================

-Started using a global array of dice rather than lots of local ones. FWIW.

-In making that change, I finally got around to changing those functions
 that place items and monsters such that they use the dice (rather than
 being directly determined by room number...). Sadly this currently shows
 up a silly bug that means you can start the game with a monster generated
 on top of you. Meh. I'll fix it in time...

-Began changing map generator as outlined in note Tunnels2, in order to
 make the dungeon more "open", and allow for the AI I'm planning.

-Little improvements to UI (eg: now tells you if a key does nothing,
 doesn't ask you what to drop if you press 'd' whilst carrying nothing,
 now tells you if you try to pick up something that isn't there, the
 routine for choosing items from a heap on the floor is far less messy...).

-Improved the message display space so that FINALLY messages accumulate
 rather than always overwriting whatever was last shown, and when display
 space fills, user is prompted to press SPACE, like in Nethack, etc.
 Think it's working as I want it to, but still needs much more testing
 (eg watch out for words disappearing from the ends of messages).

-You can now *close* doors as well as open them...

-You can go up/down stairs to a new level, and then go down/up the stairs
 to return to the level you'd left! In other words, we have a multi-level
 persistent world! Yay!

-The marker objects left in each room are now gone, they were only
 helpful long ago, and since then only made things untidy.

-Monsters are now autonomous, and can attack you (combat is currently
 only simplistic stopgap version until a proper design is worked out).

-With the AI, added a AUTOPILOT compile-time option, that just creates
 one monster, and watches it run around in real-time! Funky!
 (any time the monster kills the player in this mode, the player is
 simply teleported elsewhere).

-Can now equip inventory items! Not that they do anything.

-Tried adding "intersections" to map generator in order to improve
 monster's short-term pathfinding. Seems to work!

-The final issue of whether monsters can get themselves out of traffic-
 jams is solved (properly? prolly not, but it works at least a fair bit).

-In trying to test that, I added a compile-time option CALM that prevents
 monsters from resorting to fighting each other if they get in each other's
 way. Using this option seems to show that given time, the traffic-jam
 solving system always(??) works.


Changes in V0.02 since V0.01
============================

-Big increases in speed of map generator code after profiling it

-Obstacles that block your path (so you can't just walk through walls now)

-A very rudimentary line of sight system based on that from the
 original rogue -when you're in a room, you can see the room. When
 you're in the corridor, you can see the squares around you. When
 you're in a doorway, you can see the squares around you *and*
 the room. This will eventually be replaced by a normal LOS system
 when I figure that out and find the time. Till then, it's good enough.

-The LOS interacts with the display code such that places you've
 seen that you can't see any more will show any objects that you
 *remember* being there. So it won't show it changing if a monster
 picks up or drops something. Not that they'll do that yet. So
 you won't really notice this effect in its entirety yet.

-Openable doors!

-A nice little message area for printing all messages!

-Added REAMS of object types! But only containers do anything,
 the rest are all utterly inert, all you can do with them is
 pick them up and put them down (and put them in the containers).

-Occurred to me to change the name of the executable- it had been
 called "makemap" when I was developing the map generator, no longer
 appropriate now that's done and everything else is being worked on.

-Player can now choose specific items to drop, by inventory letter.

-Player can similarily choose specific items to pick up.

-Compilation doesn't give quite so many warnings any more
 since I tidied stuff up!

-At the last minute, very vaguely added initial monsters (they
 do *nothing* but you can kill them and they die leaving a corpse)
 more for completeness than anything else. Implementation will
 change a lot, so don't complain about them being so lame.


Changes in V0.01 since V0.0
===========================

-Added files like this NEWS.

-Map generator code is more or less finished, the rooms are now
 (nearly) all connected by tunnels so they're (nearly) all accessible.

-Player character added (only as one of the generic monster types)

-Monsters (only useful for the player) can pick up and drop items
 in the dungeon. Yay!

-Display of sets of items now implemented.

-Version display!

-Possibly other stuff I've forgotten.


V0.0: Don't ask.
================

