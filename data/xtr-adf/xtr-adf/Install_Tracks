;;
;; XTR tracks installer V1.0
;;

(transcript "Install XTR ADF Trackset")

(complete 0)

(welcome "XTR ADF Trackset Install V1.0")

(message "\n\nWelcome to the\n\n* ADF Trackset Installer *\nFor Xtreme Racing\nWritten by David Flaherty\n\nTracks Designed by Nicolas Imbert\n\nE-Mail:-\ndflaherty@nutts.demon.co.uk")

(complete 1)

;try to figure out a place where the user usually installs his games
(if (exists "Games:XTR/" (noreq) )
    (set @path "Games:XTR/")
    (if (exists "SYS:Games/XTR/" (noreq) )
        (set @path "SYS:Games/XTR/")
        (if (exists "Work:Games/XTR/" (noreq) )
            (set @path "Work:Games/XTR/")
            (if (exists "gamesstuff:XTR/" (noreq) )
                (set @path "gamesstuff:XTR/")
                (set @path "SYS:")
            )
        )
    )
)

(set path
         (askdir
               (prompt "Please select your XTR directory")
               (help @askdir-help)
               (default @path)
               (newpath)
         )
)


(set @path path)

(if (not (exists (tackon path "FrontEnd")))
(abort "This is not the XTR directory!")
)



(set #destlay (tackon @path "Layouts"))
(set #destmisc (tackon @path "Misc"))
(set #destmod (tackon @path "Modules"))
(set #desttile (tackon @path "Tiles"))
(set #desttrack (tackon @path "Tracks"))
(set #destworld (tackon @path "Worlds"))

(complete 20)

(message "\nXTR ADF Tracks will be installed to\n\n '" path "' \n\nPress Abort To Cancel")

(copyfiles
          (source "layouts")
          (dest #destlay)
          (all)
          (infos)
)

(complete 35)


(copyfiles
          (source "misc")
          (dest #destmisc)
          (all)
          (infos)
)

(complete 45)

(copyfiles
          (source "modules")
          (dest #destmod)
          (all)
          (infos)
)

(complete 55)

(copyfiles
          (source "tiles")
          (dest #desttile)
          (all)
          (infos)
)

(complete 70)

(copyfiles
          (source "tracks")
          (dest #desttrack)
          (all)
          (infos)
)

(complete 80)

(copyfiles
          (source "worlds")
          (dest #destworld)
          (all)
          (infos)
)

(complete 100)

(message "\nThe ADF trackset has been installed ")

(run "C:run >NIL: sys:utilities/multiview readme.txt")

(exit
     (cat
         "ADF trackset Installed To '" path "'."
     )
     (quiet)
)

; EOF
