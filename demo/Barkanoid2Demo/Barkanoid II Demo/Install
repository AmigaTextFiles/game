;
; $VER: Install Barkanoid2 Demo (15.05.2005)
; This Install-script is part of Barkanoid2 ©2005 MagnusSoft
; MorphOS Version ©2005 RuneSoft ®
; installscript by Michael Garlich
; English Installation
;**************************************************************************

(if (= @language "english")
	(
		(set default-lang 2)
		
		(set #welcome
			(cat
				"\n\n\nWelcome to Barkanoid2 Demo installation\n\n"
				"Barkanoid2 ©2005 MagnusSoft ®.\n"
                "MorphOS Version ©2005 RuneSoft ®."
		))
        (set #where-Barkanoid
            (cat
	         "Where do you wish to install Barkanoid2?\n A drawer 'Barkanoid2 Demo' will be created automatically."
        ))
		(set #copy "Kopiere %s nach %s...")
        (set #MOSreboot
            (cat
                "A system reboot is necessary,\n"
                "to make changes effective!\n\n"
                "Would you like to restart now?\n\n"

        ))
		(set #help "No help available...")
        (set #barka-drawer "Barkanoid2 Demo")
        (set #drawericon "Barkanoid2 Demo.Info")
		(set #old "Bereits installierte Version: ")
		(set #new "Zu installierende Version: ")
		(set #overwritelib "Die Library ist bereits installiert.\nMöchten Sie sie überschreiben?")
		(set #yes "Ja")
		(set #no "Nein")
        (set #usenewer "Your MorphOS Version is outdated,\n please upgrade to version 1.42 at least")
        (set #newSDL "Installation of PowerSDL Library Version 11")
	)
)

;**************************************************************************
; the installaion script
(effect 'center' 'horizontal' $436A9A $6EB0FC)
(showmedia 'Logo' 'pic/b2_1main.jpg' 'upper_center' 'none' 0)
(showmedia 'shot1' 'pic/sc1_small.jpg' 'lower_left' 'none' 0)
(showmedia 'shot1' 'pic/sc2_small.jpg' 'lower_right' 'none' 0)
(set syssettings "ENVARC:")
(set @default-dest "")

; Check Kickstart version. Exit if not at least 3.0
(if (< (/ (getversion) 65536) 50)
        (abort #usenewer)
)

;Check CPU. Exit if >= 60040
;(if (NOT (PATMATCH "(68040|68060)" (DATABASE "cpu")))
;        (abort #bad-cpu)
;)

(message #welcome)

(welcome)
    (set Barka-where
		(askdir
			(prompt  #where-Barkanoid)
			(help    @askdir-help)
			(default "sys:")
		)
 	 )
     (makedir
         ((tackon Barka-where #Barka-Drawer))
     )
     (copyfiles
            (source "Icons/FolderIcon.info")
            (dest Barka-where)
            (newname #drawericon)
     )
     (set Barka-Dest (tackon Barka-where #Barka-Drawer))
     (makedir (tackon Barka-Dest "Data"))
     (copyfiles
            (all)
			(prompt "copying BarkanoidII datafiles")
			(help #help)
			(source "data")
			(dest (tackon Barka-Dest "Data"))
			(confirm)
	 )
     (copyfiles
			(prompt "copying BarkanoidII main executable")
			(help #help)
			(source "BarkanoidII")
			(dest Barka-dest)
			(confirm)
	 )                
     (copyfiles
            (source "Icons/ProgramIcon.info")
            (dest Barka-Dest)
            (newname "BarkanoidII.info")
     )
     (copyfiles
            (prompt "copying Readme-file")
			(help #help)
			(source "ReadMe.html")
			(dest Barka-dest)
			(confirm)
	 )
     (copyfiles
            (source "Icons/ReadMeIcon.info")
            (dest Barka-Dest)
            (newname "ReadMe.html.info")
     )
     (makedir (tackon Barka-Dest "Pic"))
     (copyfiles
            (all)
			(prompt "copying readme picfolder")
			(help #help)
			(source "pic")
			(dest (tackon Barka-Dest "Pic"))
			(confirm)
	 )
     (copylib
			(prompt #newSDL)
			(help #help)
			(source "libs/powersdl.library")
			(dest "MOSSYS:Libs")
			(confirm)
	 )
     (copylib
			(prompt "Installation of PowerSDL-gfx.library" )
			(help #help)
			(source "libs/powersdl_gfx.library")
			(dest "MOSSYS:Libs")
			(confirm)
	 )
     (copylib
			(prompt "Installation of PowerSDL-image.library")
			(help #help)
			(source "libs/powersdl_image.library")
			(dest "MOSSYS:Libs")
			(confirm)
	 )
     (copylib
			(prompt "Installation of PowerSDL-mixer.library")
			(help #help)
			(source "libs/powersdl_mixer.library")
			(dest "MOSSYS:Libs")
			(confirm)
	 )
     (copylib
			(prompt "Installation of PowerSDL-net.library")
			(help #help)
			(source "libs/powersdl_net.library")
			(dest "MOSSYS:Libs")
			(confirm)
	 )
     (copylib
			(prompt "Installation of PowerSDL-ttf.library")
			(help #help)
			(source "libs/powersdl_ttf.library")
			(dest "MOSSYS:Libs")
			(confirm)
	 )
     (copylib
			(prompt "copying SDL Default-Icon")
			(help #help)
			(source "env-archive/Sys/def_SDL.info")
			(dest "ENVARC:Sys")
			(confirm)
	 )

	(set amireboot
		(askbool
			(prompt  #MOSreboot)
			(help    #help)
			(default 0)
		)
	)

(if amireboot
  (
    (copyfiles
        (source "Reboot")
        (dest   "RAM:")
    )
    (run "RAM:Reboot")

  )
)
(complete 100)
(exit)


