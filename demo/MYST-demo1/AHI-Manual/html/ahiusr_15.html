<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from ahiusr.texinfo on 31 October 1997 -->

<TITLE>Ahi{} User's Guide - AHI-Handler</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="ahiusr_1.html">first</A>, <A HREF="ahiusr_14.html">previous</A>, <A HREF="ahiusr_16.html">next</A>, <A HREF="ahiusr_25.html">last</A> section, <A HREF="ahiusr_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC15" HREF="ahiusr_toc.html#TOC15">AHI-Handler</A></H2>

<P>
<A NAME="IDX30"></A>
<A NAME="IDX31"></A>

</P>
<P>
The <CODE>AHI-Handler</CODE> is an I/O mechanism that is used to play and record
sounds.  The <CODE>AHI-Handler</CODE> is normally mounted as <CODE>AUDIO:</CODE> at
startup time, or later by double-clicking on its icon or by giving the
following command in a Shell window:  <KBD>mount AUDIO:  <KBD>RET</KBD></KBD>.

</P>
<P>
The DOSDriver entry is:

</P>

<PRE>
Handler         = L:AHI-Handler
Stacksize       = 4096
Priority        = 5
GlobVec         = -1
</PRE>

<P>
When the device is mounted, you can read from the device to record and
write to it to play.  Options can be given like this:

</P>

<PRE>
"AUDIO:PRIORITY=1 VOLUME=50"
</PRE>

<P>
All slashes (<SAMP>`/'</SAMP>) in the name will be translated to spaces.  Thus, if
you use slashes instead of spaces, you don't have to use quotes around the
name:

</P>

<PRE>
AUDIO:PRIORITY/1/VOLUME/50
</PRE>

<P>
The full template for reading is:

</P>

<PRE>
B=BITS/K/N,C=CHANNELS/K/N,F=FREQUENCY/K/N,T=TYPE/K,L=LENGTH/K/N,
S=SECONDS/K/N,BUF=BUFFER/K/N,UNIT/K/N
</PRE>

<P>
The full template for writing is:

</P>

<PRE>
B=BITS/K/N,C=CHANNELS/K/N,F=FREQUENCY/K/N,T=TYPE/K,V=VOLUME/K/N,
P=POSITION/K/N,PRI=PRIORITY/K/N,L=LENGTH/K/N,S=SECONDS/K/N,
BUF=BUFFER/K/N,UNIT/K/N
</PRE>

<P>
<SAMP>`BITS'</SAMP> can be one of 8, 16 or 32.  <SAMP>`CHANNELS'</SAMP> can be either 1 for
mono or 2 for stereo.  The <SAMP>`FREQUENCY'</SAMP> is in Hertz, <SAMP>`TYPE'</SAMP> is one
of <SAMP>`SIGNED'</SAMP>, <SAMP>`AIFF'</SAMP> or <SAMP>`AIFC'</SAMP>.  <SAMP>`VOLUME'</SAMP> ranges from 0
(silence) to 100 (full volume), and <SAMP>`POSITION'</SAMP> ranges from -100
(far left) via 0 (center) to 100 (far right).  The <SAMP>`PRIORITY'</SAMP> can be
from -128 to 127 (unstoppable).  <SAMP>`LENGTH'</SAMP> is how many bytes you
wish to read or write, and <SAMP>`SECONDS'</SAMP> is the same, but in seconds
instead of bytes.  The <SAMP>`BUFFER'</SAMP> size is specified in bytes.  Note that
two buffers are always used, which means that the memory usage will be two
times BUFFER.  <SAMP>`UNIT'</SAMP> selects which <CODE>ahi.device</CODE> unit to use.

</P>
<P>
The default options for reading are <SAMP>`BITS=8'</SAMP> <SAMP>`CHANNELS=1'</SAMP>
<SAMP>`FREQUENCY=8000'</SAMP> <SAMP>`TYPE=SIGNED'</SAMP> <SAMP>`LENGTH=very-very-much'</SAMP>
<SAMP>`BUFFER=32768'</SAMP> <SAMP>`UNIT=0'</SAMP>.

</P>
<P>
The default options for reading are <SAMP>`BITS=8'</SAMP> <SAMP>`CHANNELS=1'</SAMP>
<SAMP>`FREQUENCY=8000'</SAMP> <SAMP>`TYPE=&#60;none&#62;'</SAMP> <SAMP>`VOLUME=100'</SAMP>
<SAMP>`POSITION=0'</SAMP> <SAMP>`PRIORITY=0'</SAMP> <SAMP>`LENGTH=very-very-much'</SAMP>
<SAMP>`BUFFER=32768 UNIT=0'</SAMP>.

</P>
<P>
<A NAME="IDX32"></A>
<A NAME="IDX33"></A>
<A NAME="IDX34"></A>
<A NAME="IDX35"></A>

</P>
<P>
If <SAMP>`TYPE'</SAMP> is not specified, the default behaviour is to identify the
data stream as <STRONG>IFF-AIFF</STRONG> or <STRONG>IFF-AIFC</STRONG>.  If so, the default values
of <SAMP>`BITS'</SAMP>, <SAMP>`CHANNELS'</SAMP>, <SAMP>`FREQUENCY'</SAMP> and <SAMP>`LENGTH'</SAMP> will
taken from the file.  You can still override them if you wish.  If the
stream could not be identified, the data format is assumed to be
<SAMP>`SIGNED'</SAMP>.

</P>
<P>
<A NAME="IDX36"></A>

</P>
<P>
Both when reading and writing the sample rate will be converted on the fly
to what the underlying hardware is configured to.  Normally this is not a
big problem when writing, but the quality when reading leaves quite a lot
to wish for, since no low-pass filters are used.

</P>
<P>
Example 1:

</P>

<PRE>
copy Louise.AIFF AUDIO:
</PRE>

<P>
plays the file <TT>`Louise.AIFF'</TT>.

</P>
<P>
Example 2:

</P>

<PRE>
copy AUDIO:SECONDS/10/TYPE/AIFC/B/16/F/44100/C/2 sample.AIFC
</PRE>

<P>
records 10 seconds of audio and stores it in the file <TT>`sample.AIFC'</TT> as
uncompressed <STRONG>IFF-AIFC</STRONG>, 16 bit stereo at 44.1 kHz.

</P>

<P><HR><P>
Go to the <A HREF="ahiusr_1.html">first</A>, <A HREF="ahiusr_14.html">previous</A>, <A HREF="ahiusr_16.html">next</A>, <A HREF="ahiusr_25.html">last</A> section, <A HREF="ahiusr_toc.html">table of contents</A>.
</BODY>
</HTML>
