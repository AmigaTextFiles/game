<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from ahiusr.texinfo on 31 October 1997 -->

<TITLE>Ahi{} User's Guide - The Drivers</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="ahiusr_1.html">first</A>, <A HREF="ahiusr_16.html">previous</A>, <A HREF="ahiusr_18.html">next</A>, <A HREF="ahiusr_25.html">last</A> section, <A HREF="ahiusr_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC17" HREF="ahiusr_toc.html#TOC17">The Drivers</A></H3>

<P>
<A NAME="IDX52"></A>

</P>
<P>
The hardware drivers themself are located in the <TT>`DEVS:AHI'</TT> drawer,
and are named as <TT>`&#60;name&#62;.audio'</TT>.  They are actually libraries, in
spite of being located under the <TT>`DEVS:'</TT> assign, and will be flushed
out from memory when not in use and the system needs more RAM.  Many of the
drivers require additional files; see below.  These extra files are not
delivered with AHI.

</P>
<DL COMPACT>

<DT><CODE>delfina.audio</CODE>
<DD>
Requires <CODE>delfina.library</CODE> version 4 or greater <A NAME="DOCF7" HREF="ahiusr_foot.html#FOOT7">(7)</A>.

<DT><CODE>maestropro.audio</CODE>
<DD>
Requires <CODE>maestix.library</CODE> version 40.10 or greater <A NAME="DOCF8" HREF="ahiusr_foot.html#FOOT8">(8)</A>.  For
more information about this driver as well as the most recent version of
<CODE>maestix.library</CODE>, please visit the author's WWW page <A NAME="DOCF9" HREF="ahiusr_foot.html#FOOT9">(9)</A>.

<DT><CODE>melody.audio</CODE>
<DD>
Requires <CODE>melodympeg.device</CODE> version 1.40 or greater <A NAME="DOCF10" HREF="ahiusr_foot.html#FOOT10">(10)</A>.

<A NAME="IDX53"></A>
<A NAME="IDX54"></A>
<A NAME="IDX55"></A>
<A NAME="IDX56"></A>

<DT><CODE>paula.audio</CODE>
<DD>
On startup, the file <TT>`ENV:CyberSound/SoundDrivers/14Bit_Calibration'</TT>
is read and used for the 14 bit DAC calibration.

The 14 bit modes cannot be used for recording, but the 8 bit modes supports
both generic parallel port samplers as well as both the Aura and Clarity
samplers.

<A NAME="IDX57"></A>

The environment variable <TT>`AHIpaulaFilterFreq'</TT> is checked every time
playback starts, and should be set to a frequency in Hertz.  If the mixing
frequency is higher than this value, the internal low-pass filter will be
turned off.  If it is lower, the filter will be activated.  The default is
0 Hz, which means that the filter will always be turned off.  Example:


<PRE>
SetEnv AHIpaulaFilterFreq 16000
Copy ENV:AHIpaulaFilterFreq ENVARC:
</PRE>

<A NAME="IDX58"></A>

The variable <TT>`AHIpaulaSampleLimit'</TT> is also checked.  This variable
controls how the driver should handle mixing frequencies greater than 28
kHz, which is the limit of the hardware when using 15 kHz screen modes
(PAL, NTSC, Euro36).  If the current screen mode is a VGA (31 kHz) mode,
the driver allows frequencies up to 48 kHz.  Normally, the driver checks
the current screen mode, and decides if the higher mixing frequencies
should be available or not.  By setting this variable, you can control that
decision.  If set to <SAMP>`0'</SAMP>, the frequency will always be limited to 28
kHz and if set to <SAMP>`1'</SAMP>, there will never be any limit.  Example:


<PRE>
SetEnv AHIpaulaSampleLimit 1
Copy ENV:AHIpaulaSampleLimit ENVARC:
</PRE>

This will disable any screen mode checking, and will always allow up to 48
kHz in the mode requesters.


<PRE>
Delete ENV:AHIpaulaSampleLimit
Delete ENVARC:AHIpaulaSampleLimit
</PRE>

This will turn on the screen mode checking again.

<A NAME="IDX59"></A>

Because of incorrect hardware documentation, there is great confusion about
which hardware channels are sent to the left speaker, and which are sent to
the right.  <CODE>paula.audio</CODE> uses the correct order (right, left, left,
right) but many other programs don't.  The <TT>`AHIpaulaSwapChannels'</TT>
variable was added to let the user decide if the correct or incorrect
behaviour should be used.  In not present or set to <SAMP>`0'</SAMP>, the correct
behaviour is used.  If set to <SAMP>`1'</SAMP>, the left and right channels will be
swapped.

<A NAME="IDX60"></A>
<A NAME="IDX61"></A>
<A NAME="IDX62"></A>

Finally, the variable <TT>`AHIpaulaBufferLength'</TT> controls the minimum
playback buffer size to use.  Because of the limited <STRONG>Chip RAM</STRONG>
bandwidth, a <STRONG>MC68060</STRONG> CPU might run into trouble when using the
default minumum buffer size (0).  By setting this variable to <SAMP>`1024'</SAMP>,
for example, you will reduce the number of interrupts caused and increase
the number of samples transferred each time to at least 1024 samples.  But
take care!  Setting this variable too high will cause long periods with
multitasking disabled.

<A NAME="IDX63"></A>

<DT><CODE>toccata.audio</CODE>
<DD>
Requires <CODE>toccata.library</CODE> version 12 or greater <A NAME="DOCF11" HREF="ahiusr_foot.html#FOOT11">(11)</A>.
This driver also reads the environment variables <TT>`AHItoccataNoTask'</TT>
and <TT>`AHItoccataIrqSize'</TT>.  If <TT>`AHItoccataNoTask'</TT> is set to
<SAMP>`1'</SAMP>, all mixing will be done in a <STRONG>Software Interrupt</STRONG> which means
the sound output will not suffer when multitasking is turned off.  The back
side is that it requires a faster CPU.  Much faster.  Only use this option
as a last resort.  Example:


<PRE>
SetEnv AHItoccataNoTask 1
Copy ENV:AHItoccataNoTask ENVARC:
</PRE>

<A NAME="IDX64"></A>

<TT>`AHItoccataIrqSize'</TT> specifies the number of bytes transferred to the
card each interrupt and defaults to <SAMP>`512'</SAMP>.  It must be one of
<SAMP>`32'</SAMP>, <SAMP>`64'</SAMP>, <SAMP>`128'</SAMP>, <SAMP>`256'</SAMP> or <SAMP>`512'</SAMP>.  If you
encounter problems with serial port hardware, you might want to set this
variable to a lower value than the default.

Please note that this driver is used for both the DraCo Motion and the
Toccata.

<DT><CODE>wavetools.audio</CODE>
<DD>
Requires <CODE>dad_audio.device</CODE>.

</DL>

<P><HR><P>
Go to the <A HREF="ahiusr_1.html">first</A>, <A HREF="ahiusr_16.html">previous</A>, <A HREF="ahiusr_18.html">next</A>, <A HREF="ahiusr_25.html">last</A> section, <A HREF="ahiusr_toc.html">table of contents</A>.
</BODY>
</HTML>
