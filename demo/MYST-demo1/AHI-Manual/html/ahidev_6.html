<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from ahidev.texinfo on 31 October 1997 -->

<TITLE>Ahi Developers's Guide - Guidelines</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="ahidev_1.html">first</A>, <A HREF="ahidev_5.html">previous</A>, <A HREF="ahidev_7.html">next</A>, <A HREF="ahidev_21.html">last</A> section, <A HREF="ahidev_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC6" HREF="ahidev_toc.html#TOC6">Guidelines</A></H2>

<P>
<A NAME="IDX21"></A>
<A NAME="IDX22"></A>

</P>



<H3><A NAME="SEC7" HREF="ahidev_toc.html#TOC7">Follow The Rules</A></H3>

<P>
 It's really simple.  If I tell you to check return values, check sample
types when recording, not to trash d2-d7/a2-a6 in hooks, or not to call
<CODE>AHI_ControlAudio()</CODE> with the <CODE>AHIC_Play</CODE> tag from interrupts or
hooks, you do as you are told.

</P>



<H3><A NAME="SEC8" HREF="ahidev_toc.html#TOC8">The Library Base</A></H3>

<P>
<A NAME="IDX23"></A>
<A NAME="IDX24"></A>

</P>
<P>
 The <CODE>AHIBase</CODE> structure is private, so are the sub libraries' library
base structures.  Don't try to be clever.

</P>



<H3><A NAME="SEC9" HREF="ahidev_toc.html#TOC9">The Audio Database</A></H3>

<P>
<A NAME="IDX25"></A>

</P>
<P>
<A NAME="IDX26"></A>
<A NAME="IDX27"></A>
<A NAME="IDX28"></A>

</P>
<P>
 The implementation of the database is private, and may change any time.
<CODE>ahi.device</CODE> provides functions access the information in the database
(<CODE>AHI_NextAudioID()</CODE>, <CODE>AHI_GetAudioAttrsA()</CODE> and
<CODE>AHI_BestAudioIDA()</CODE>).

</P>



<H3><A NAME="SEC10" HREF="ahidev_toc.html#TOC10">User Hooks</A></H3>

<P>
<A NAME="IDX29"></A>

</P>
<P>
 All user hooks must follow normal register conventions, which means that
d2-d7 and a2-a6 must be preserved.  They may be called from an interrupt,
but you cannot count on that; it can be your own process or another
process.  Don't assume the system is in single-thread mode.  Never spend
much time in a hook, get the work done as quick as possible and then
return.

</P>



<H3><A NAME="SEC11" HREF="ahidev_toc.html#TOC11">Function Calls From Other Tasks, Interrupts Or User Hooks</A></H3>

<P>
 The <CODE>AHIAudioCtrl</CODE> structure may not be shared with other
tasks/threads.  The task that called <CODE>AHI_AllocAudioA()</CODE> must do all
other calls too (except those callable from interrupts).

</P>
<P>
 Only calls specifically said to be callable from interrupts may be called
from user hooks or interrupts.  Note that <CODE>AHI_ControlAudioA()</CODE> has
some tags that must not be present when called from an interrupt.

</P>



<H3><A NAME="SEC12" HREF="ahidev_toc.html#TOC12">Multitasking</A></H3>

<P>
<A NAME="IDX30"></A>

</P>
<P>
 Most audio drivers need multitasking to be turned on to function properly.
Don't turn it off while using the device.

</P>

<P><HR><P>
Go to the <A HREF="ahidev_1.html">first</A>, <A HREF="ahidev_5.html">previous</A>, <A HREF="ahidev_7.html">next</A>, <A HREF="ahidev_21.html">last</A> section, <A HREF="ahidev_toc.html">table of contents</A>.
</BODY>
</HTML>
