<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from ahidev.texinfo on 31 October 1997 -->

<TITLE>Ahi Developers's Guide - Reading From The Device</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="ahidev_1.html">first</A>, <A HREF="ahidev_12.html">previous</A>, <A HREF="ahidev_14.html">next</A>, <A HREF="ahidev_21.html">last</A> section, <A HREF="ahidev_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC25" HREF="ahidev_toc.html#TOC25">Reading From The Device</A></H2>

<P>
<A NAME="IDX93"></A>
<A NAME="IDX94"></A>

</P>
<P>
<A NAME="IDX95"></A>
<A NAME="IDX96"></A>
<A NAME="IDX97"></A>
<A NAME="IDX98"></A>
<A NAME="IDX99"></A>
<A NAME="IDX100"></A>
<A NAME="IDX101"></A>
<A NAME="IDX102"></A>

</P>
<P>
 You read from <CODE>ahi.device</CODE> by passing an <CODE>AHIRequest</CODE> to the
device with <CODE>CMD_READ</CODE> set in <CODE>io_Command</CODE>, the number of bytes
to be read set in <CODE>io_Length</CODE>, the address of the read buffer set in
<CODE>io_Data</CODE>, the desired sample format set in <CODE>ahir_Type</CODE> and the
desired sample frequency set in <CODE>ahir_Frequency</CODE>.  The first read
command in a sequence should also have <CODE>io_Offset</CODE> set to 0.
<CODE>io_Length</CODE> must be an even multiple of the sample frame size.

</P>


<H3><A NAME="SEC26" HREF="ahidev_toc.html#TOC26">Double Buffering</A></H3>

<P>
<A NAME="IDX103"></A>

</P>
<P>
 To do double buffering, just fill the first buffer with <CODE>DoIO()</CODE> and
<CODE>io_Offset</CODE> set to 0, then start filling the second buffer with
<CODE>SendIO()</CODE> using the same I/O request (but don't clear
<CODE>io_Offset</CODE>!).  After you have processed the first buffer, wait until
the I/O request is finished and start over with <CODE>SendIO()</CODE> on the
first buffer.

</P>


<H3><A NAME="SEC27" HREF="ahidev_toc.html#TOC27">Distortion</A></H3>

<P>
<A NAME="IDX104"></A>

</P>
<P>
 The samples will automatically be converted to the sample format set in
<CODE>ahir_Type</CODE> and to the sample frequency set in <CODE>ahir_Frequency</CODE>.
Because it is quite unlikely that you ask for the same sample frequency the
user has chosen in the preference program, chances that the quality is
lower than expected are pretty high.  The worst problem is probably the
anti-aliasing filter before the A/D converter.  If the user has selected a
higher sampling/mixing frequency than you request, the signal will be
distorted according to the Nyquist sampling theorem.  If, on the other
hand, the user has selected a lower sampling/mixing frequency than you
request, the signal will not be distorted but rather bandlimited more than
necessary.

</P>

<P><HR><P>
Go to the <A HREF="ahidev_1.html">first</A>, <A HREF="ahidev_12.html">previous</A>, <A HREF="ahidev_14.html">next</A>, <A HREF="ahidev_21.html">last</A> section, <A HREF="ahidev_toc.html">table of contents</A>.
</BODY>
</HTML>
