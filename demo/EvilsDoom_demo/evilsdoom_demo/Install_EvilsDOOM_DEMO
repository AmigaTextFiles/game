
;$VER: Evil's Doom installer script V1.0

	(set programname "Evil's Doom")
	(set drawername "Evil's Doom Demo")
	(set assignname "EVIL")
	(set savegameassignname "SAGA")

	(set bytesreq "1.8MB")

	(set initialdir "work:")
	(run "GCD")


	(welcome
	(message
	"\nWelcome to...\n\nEVIL'S DOOM\nA Fantasy Role Playing Saga\n\n"
	"About " bytesreq " of free space is required for some necessary files and future saved games. This will take only a second so be patient "
	"and follow the instructions carefuly...")
	)
	;-------------------
	; Ask where to install it...
	(set wheredir
		(askdir
		(prompt	"Please select a path for the Evil's Doom drawer:")
		(help	"This path MUST be selected! Suggest to select a "
			"path like 'work:games/', or 'dh1:games/', or 'dh0:games'"
			", or, dh1:, dh0:, or whatever.\n\nA new drawer called Evil's Doom will be created where some necessary files and future saved games will be placed!")
		(default "work:")
		)
	)

	(set maintargetdir wheredir)
	(set wheredir (tackon wheredir drawername))
	(set @default-dest wheredir)
	(message "\n\n" programname " will be installed in a new drawer called `" wheredir "'.  If this is correct, click `Proceed'.")
	(makedir wheredir)
	(set savedir (tackon wheredir "Save"))
	(makedir savedir)
	(makedir (tackon savedir "A"))
	(makedir (tackon savedir "B"))
	(makedir (tackon savedir "C"))
	(makedir (tackon savedir "D"))
	(makedir (tackon savedir "E"))
	(makedir (tackon savedir "F"))
	(makedir (tackon savedir "G"))
	(makedir (tackon savedir "H"))
	(makedir (tackon savedir "I"))
	(makedir (tackon savedir "J"))
	(makedir (tackon savedir "K"))
	(makedir (tackon savedir "L"))
	(makedir (tackon savedir "M"))
	(makedir (tackon savedir "N"))
	(makedir (tackon savedir "O"))
	(makedir (tackon savedir "P"))
	(makedir (tackon savedir "X"))
	(makedir (tackon savedir "Y"))


	(textfile
		(dest (tackon wheredir ("Start saga!")))
		(prompt "")
		(help "")
		(append "Assign >nil: " assignname ": \"")
		(append (include "T:DirName"))
		(append	"\"\n"
			"Assign >nil: " savegameassignname ": \"" wheredir "\"\n"
			"CPU >nil: cache burst datacache databurst\n"
			"EVIL:prg/int.dat"
		
		)
	)

	(copyfiles
		(prompt "")
		(help "")
		(source "save/Y")
		(dest (tackon savedir "Y"))
		(all)
	)

	(copyfiles
		(prompt "")
		(help "")
		(source "save")
		(dest savedir)
		(choices "Dir")
	)

	(copyfiles
		(prompt "")
		(help "")
		(source "X")
		(dest maintargetdir)
		(choices "Evil's Doom Demo.info")
	)

	(copyfiles
		(prompt "")
		(help "")
		(source "X")
		(dest wheredir)
		(choices "Start saga!.info")
	)



	(run 'assign >nil: EVIL: ""')

	(
		if ( exists ("EVIL:PIC/ARNOYTAVERN.fig"))
		(
		(run "DPK >con:0/0/640/64/EvilOutput")
		(run "delete >nil: EVIL:pic/#?.fig")
		(run "delete >nil: EVIL:int/#?.fig")
		)
	)
