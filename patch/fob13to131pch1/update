
;intro

echo " "
echo "Update Fields of Battle"
echo "Version 1.3 -> 1.31"
echo " "

;is complete

if not exists "unzip"
  echo "Error: Patch is incomplete. Missing file: unzip"
  quit
endif

if not exists "added1.zip"
  echo "Error: Patch is incomplete. Missing file: added1.zip"
  quit
endif

if not exists "added2.zip"
  echo "Error: Patch is incomplete. Missing file: added2.zip"
  quit
endif

if not exists "added3.zip"
  echo "Error: Patch is incomplete. Missing file: added3.zip"
  quit
endif

if not exists "added4.zip"
  echo "Error: Patch is incomplete. Missing file: added4.zip"
  quit
endif

if not exists "added5.zip"
  echo "Error: Patch is incomplete. Missing file: added5.zip"
  quit
endif

if not exists "added6.zip"
  echo "Error: Patch is incomplete. Missing file: added6.zip"
  quit
endif

if not exists "added7.zip"
  echo "Error: Patch is incomplete. Missing file: added7.zip"
  quit
endif

if not exists "change.zip"
  echo "Error: Patch is incomplete. Missing file: change.zip"
  quit
endif

if not exists "change0.zip"
  echo "Error: Patch is incomplete. Missing file: change0.zip"
  quit
endif

if not exists "change2.zip"
  echo "Error: Patch is incomplete. Missing file: change2.zip"
  quit
endif

if not exists "change3.zip"
  echo "Error: Patch is incomplete. Missing file: change3.zip"
  quit
endif

if not exists "change4.zip"
  echo "Error: Patch is incomplete. Missing file: change4.zip"
  quit
endif

;check

if not exists "keyfile"
  echo "Error: The patch must be in the Fields of Battle"
  echo "       directory to work."
  quit
endif

if not exists "pic/english/feather1.gif"
  echo "Error: This patch is not for your current version."
  echo "       of Fields of Battle. Needs v. 1.3"
  quit
endif

if not exists "data/english/weticonl.qef"
  echo "Error: This patch is not for your current version."
  echo "       of Fields of Battle. Needs v. 1.3"
  quit
endif

;delete

echo "  Deleting files..."

if exists "pic/english/feather1.gif"
 delete  "pic/english/feather1.gif" quiet
endif
if exists "pic/english/logo.gif"
 delete  "pic/english/logo.gif" quiet
endif
if exists "pic/english/logo2.gif"
 delete  "pic/english/logo2.gif" quiet
endif
if exists "toolbars/english/ticonlib.qef.info"
 delete  "toolbars/english/ticonlib.qef.info" quiet
endif
if exists "toolbars/english/default.qef.info"
 delete  "toolbars/english/default.qef.info" quiet
endif
if exists "text/english/lex/MAIN.INF"
 delete  "text/english/lex/MAIN.INF" quiet
endif
if exists "data/english/framilib.qef.info"
 delete  "data/english/framilib.qef.info" quiet
endif
if exists "data/english/iconfram.qef.info"
 delete  "data/english/iconfram.qef.info" quiet
endif
if exists "data/english/weticonl.qef.info"
 delete  "data/english/weticonl.qef.info" quiet
endif

;add

echo "  Adding files..."

echo "    Part 1"
unzip -o -qq added1

echo "    Part 2"
unzip -o -qq added2

echo "    Part 3"
unzip -o -qq added3

echo "    Part 4"
unzip -o -qq added4

echo "    Part 5"
unzip -o -qq added5

echo "    Part 6"
unzip -o -qq added6

echo "    Part 7"
unzip -o -qq added7

;change

echo "  Change files..." 

echo "    Generel"
unzip -o -qq change

if exists "Fields of Battle"
  echo "    68000"
  unzip -o -qq change0
endif

if exists "Fields of Battle (020)"
  echo "    68020"
  unzip -o -qq change2
endif

if exists "Fields of Battle (030fp)"
  echo "    68030fp"
  unzip -o -qq change3
endif

if exists "Fields of Battle (040fp)"
  echo "    68040fp"
  unzip -o -qq change4
endif

;cleanup

echo "  Cleanup..."
delete added1.zip quiet
delete added2.zip quiet
delete added3.zip quiet
delete added4.zip quiet
delete added5.zip quiet
delete added6.zip quiet
delete added7.zip quiet
delete change.zip quiet
delete change0.zip quiet
delete change2.zip quiet
delete change3.zip quiet
delete change4.zip quiet
delete unzip quiet

echo "Done."

