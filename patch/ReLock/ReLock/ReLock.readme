-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Short:    Makes MuFS (+ others) accept weird locks
Uploader: nybo@softhome.net (Martin Nybo Andersen)
Author:   nybo@softhome.net (Martin Nybo Andersen)
Type:     game/patch
Requires: OS 2.0 (V36)
Version:  1.31
__________________________________________________________________________________

Ever wanted to use AMOS on a MultiUserFS partition?
Ever wanted to play Worms(DC) on a MultiUserFS partition?
And what about all the other progs, which can't get files stored on your MuFS
partition?

- - Here's the fix..!

- - - ---

Background:

AmigaDOS has a function to lock a file to prevent it from being altered while a
program uses it. This lock can be defined in two ways:

 1: Shared    - for reading - ($fffffffe, or -2 for ordinary humans... :)
 2: Exclusive - for writing - ($ffffffff, or -1 for ordinary humans... :)

Now there's just one little problem:
What about all the other 4294967294 (2³²-2) different possibilities when using a
32bit integer?

FastFileSystem assumes that if it isn't an exclusive lock it must be a shared one.
MultiUserFileSystem, on the other hand, concludes that if it isn't an exclusive or
a shared lock, it simply can't be a valid lock.

MuFS's conclusion is perfectly okay, if it haven't been for all those dumb coders
with too much lumpy gravy for brains --- FIX YOUR CODE NOW!!!

This little patch makes all filesystems act like FFS when dealing with locks.

- - - -Martin   http://www.amiga.dk/nybo    nybo@softhome.net
__________________________________________________________________________________

-----BEGIN PGP SIGNATURE-----
Version: PGPfreeware 5.0i for non-commercial use
Comment: PGP 5 - Generated on an Amiga computer!
Charset: noconv

iQA/AwUBN3/oa9nNDa/JjIIfEQILjgCg9wGMdNLfOUgHogBwlcZDdo7v+usAn0Qr
YH1yfJhys3siAk8C9JgND9hM
=cywt
-----END PGP SIGNATURE-----
