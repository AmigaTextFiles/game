SUSHI v1.0beta2 - Quake Competition servermod by 'surgeon'      
Date  : 09/12 1999     
Author: v2615l@groenjord.dk     
        http://members.xoom.com/surgeonsq1/index.htm     
=============================================================================   
   
Main bandwidth saving features:     
(Network traffic is reduced by 50%, compared to standard quake!!)  
- wastly reduced amount of tempentities     
- reduced gibs     
  (network traffic can be further reduced by enabeleing antilag)   
  
Main FPS boosting features:     
(Framerate is 10-50% higher than standard quake during combat) 
- All quakeC based dynamic lightning is disabled     
- Dead bodies and gibs are removed at respawn     
- Explosion effect exchanged for teleporter effect     
- Torches/fire disabled     
  (framerate can be further improved by disabeling hitflash)  
   
Some special features:     
- Voting system for democratic server administration by the players 
- 3 servemodes: FFA, Match & Rocketarena - players decide what game to play 
- Every player can be voted admin and directly toggle all server vars 
- Remote Admins can toggle sys_ticrate (# of updates sent over net) 
- Players can decide to remove admins (by voting) 
- Map selection: Support for all ID maps + ztndm1-6 
- Prematch practice mode 
- Deathmatch 3 (weapons stay, fast ammo respawn) supported 
- Match countdown and simultaneous starts 
- Possibility to autokick players trying to join during a match 
- Ghosted frags (every player get's a ghostcode at matchstart enabeling them
  to restore personal frags, should they loose their connection
  or disconnect by accident) 
- ON/OFF toggle for powerups, traps and comments 
- Toggle for quad/pent light effect (default off)     
- Toggle for weapon kick (individual)   
- Observer cameras     
- Random respawns     
- Forced respawn after 5 seconds     
- Antilag effects filter     
- Fairpacks toggle (bypasses boomstick scripting)   
- Random map rotation in anarchy (ffa) modes 
- High performance RocketArena mode built in   
  rotatation on 9 extremely fast maps:     
         - Rage Arena  (from original fasrv12)     
         - ArenaX      (from original fasrv12)     
         - Inventory   (by 'Ohnosofa')  
         - DocRA1-5    (maps by 'surgeon')     
         - Sushi Arena (by 'surgeon) 
 
  (note that sky-textures on RageArena, ArenaX and Inventory has been edited  
  in order to bypass skybug on Amiga)  
  
- Optional Cells restriction for RocketArena (keeps cells count to max 30)  
- Option to skip 1 map ahead in arenamode     
=============================================================================   
   
     
SUSHI Combat Server installation:     
   
extract the archive to your quake-dir.     
contents should be:   
   
 SUSHI/     
        PAK0.PAK     (maps & sounds for rocketarena subgame)
        progs.dat
        PAK1.PAK     (not in main archive) 
        autoexec.cfg (server settings)   
        anarchy.cfg  (server settings)   
        arena.cfg    (server settings)   
        match.cfg    (server settings)   
        docs/   
             SUSHI.txt  (this file)   
             arena.htm  (documentation for RocketArena)   
        progs/  
              missile.mdl (optional - delete if unwanted)  
              bolt2.mdl   (optional - delete if unwanted)  
              player.mdl  (for better team recognition)  
   
PAK0.PAK & progs.dat contains the vital stuff - don't mess with it :)   
  
PAK1.PAK is optional - it contains a the ztndm(x) maps  - if you already  
have the ztndm(x) maps in your ID1 dir, there's no need for this.     
   
autoexec.cfg: is loaded when the server is started the first time   
 it contains the "global" settings such as "noexit" and "hostname"   
  
anarchy.cfg: is loaded whenever a level is started in anarchy(ffa) mode   
 it contains the timelimit, the eventual fraglimit for this mode.   
    
arena.cfg: is loaded whenever the server starts a level in arenamode   
 it cotains the fraglimit (range 7-15 is suitable) and an eventual timelimit.  
   
match.cfg: is loaded whenever the server starts a level in one of the  
 matchmodes. Again, it contains the eventual fraglimit and a timelimit.   
   
 the timelimit set in this cfg is ignored IF a match is started.   
  
Please note, that the "samelevel" console variable is toggled internally.  
It's used for holding information about serversettings across levels.  
  
  
!IMPORTANT!   
The Maps ztndm1-6 are needed for anarchy. They should reside in ID1/maps or 
in your SUSHI direcrory as PAK1.PAK 
Availability: http://www.planetquake.com/ztn/ 
              http://members.xoom.com/surgeonsq1/  
  
Launching the server:   
   
Start quake with the parameters:     
  
-listen -game SUSHI     
to set up a listen server     
  
or     
   
-dedicated -game SUSHI     
to set up a dedicated server     
     
   
Command aliases and 'online-help' is sent to clients when they connect   
to the server.     
  
=============================================================================     
   
Client commands:     
   
   
General:   
-----------------------------------------------------------------------------   
"i-server" to display online-help commandlist   
"i-mode", to get info on current servermode   
"i-cam", for camera controls list   
"i-match", to cycle through info on match control   
"i-vote", to cycle through info on votingsessions   
"i-arena", for arena impulse reference   
"i-admin", to cycle through admin cmds   
-----------------------------------------------------------------------------   
"wkick", to toggle weapon kick ON/OFF (individual setting)   
"hitflash" to toggle flashs ON/OFF (individual setting)   
(will improve framerate in critical situations, such as performing lavajumps)  
"observe", to enter observer mode   
"vote", in order to initiate a voting session   
  
Voting:   
-----------------------------------------------------------------------------   
type "vote" to start a 1 minute session.   
Then subject must be set:   
it can be a map, a random levelchange, a toggle or a servermode.   
Then other players type "yes", to vote for suggested subject   
Maps   
-----------------------------------------------------------------------------   
"random",to suggest random map/vote for random map.   
to suggest a particular map type the mapname.   
(Supports dm1-6,start,end,e1m1-e4m8,ztndm1-6)   
In arenamode, "skip" will skip 1 map ahead in the rotation. 
   
Toggles   
-----------------------------------------------------------------------------   
to toggle powerups, type "powerups".   
to turn off lavaballs & shooters, type "notraps".   
to toggle deathcomments, type "deathcomments".   
to togle powerup effects, type "pfx".   
to toggle effects filter, type "antilag".   
to toggle fairpacks, type "fairpacks"  
   
Only in matchmode:   
to toggle dm mode3, type "mode3"   
 
Only in arenamode: 
"cells", will restrict cell ammo count to max 30 
   
Server Modes   
-----------------------------------------------------------------------------   
type "ffa1" or "ffa3" to set anarchy modes   
-server will then restart   
type "arena" to put server in RocketArena mode   
-server will then restart   
type "match" for individual match mode or   
type "tmatch1" or "tmatch2" to set teamplay match mode 1 or 2   
-SERVER WILL RESTART IN TRAINING MODE!   
   
Other   
-----------------------------------------------------------------------------   
type "noadmin" to suggest removal of admin(S)   
   
=============================================================================   
  
Admin Commands   
  
General  
-----------------------------------------------------------------------------   
IN OBSERVEMODE, type "reqadmin" to suggest yourself as admin  
(requires players accept)  
Alternatively, type "reqadmin" as subject in a votingsession.   
(also requires players accept)   
   
Once you are admin, you may give up admin status by typing "noadmin".   
   
When you have recieved admin-status you can directly issue commands:   
   
Toggles:   
-----------------------------------------------------------------------------   
"deathcomments" - toggle "player rides x's rocket" ON/OFF   
"powerups"  - disable or enable Quad/666/Ring   
"notraps"   - disable lavaballs & spikeshooters   
"pfx"       - toggle the light associated with powerups   
"mode3"     - toggle weapons stay and fast ammo respawn   
"antilag"   - toggle effects filter   
"fairpacks" - toggles fairpacks on/off   
"cells"     - cells restriction on/off (only arena-mode) 
 
sys_ticrate:   
"lticrate" to set 10 updates/sec   
"nticrate" to set 20 updates/sec   
"hticrate" to set 50 updates/sec   
   
Match control:   
-----------------------------------------------------------------------------   
"beginmatch" to start 60 sec countdown immediately   
"endmatch" to end ongoing match immediately   
"lockmatch" to open/close the server for joining   
"allowjoin" to allow/forbid obsevers to join ongoing match   
   
Map selection/mode selection:   
-----------------------------------------------------------------------------   
type mapname (e.g. "dm2", "e1m2") to set map, followed by   
"execute" to change level   
type modename (e.g "ffa1", "tmatch2", "arena"), followed by   
"execute" to restart server in new mode   
  
=============================================================================   
   
Observer Commands:   
-----------------------------------------------------------------------------   
   
Camera Control   
-----------------------------------------------------------------------------   
"auto", for auto selection   
"player1"-"player16" selects player   
"follow", for force-follow   
"normal", to end force-follow   
"hand", for force-hand   
"nclip", for noclip   
"messages", to toggle messages   
"lock", to lock on target   
"next", for next target   
   
Other   
-----------------------------------------------------------------------------   
"join", to exit observer mode   
"reqadmin" to suggest yourself as admin   
 
During matches, provided that observers are allowed to join: 
"restore" - send your ghostcode to restore your frags 
"red" - sign up as red challenger/teamplayer & join match 
"blue" - sign up as blue challenger/teamplayer & join match 
=============================================================================   
  
   
Match Commands:   
-----------------------------------------------------------------------------   
THESE COMMANDS ARE ONLY AVAILABLE IN MATCHMODE   
 - "MODE3" REQUIRES VOTE!   
-----------------------------------------------------------------------------   
To toggle deathmatch 3 rules on/off, type "mode3"   
(mode3 is weapons stay & 15 sec ammo respawn, compared to normal 30 sec   
-----------------------------------------------------------------------------   
"red" - sign up as red challenger/teamplayer 
"blue" - sign up as blue challenger/teamplayer 
"ready" to commit to match   
"notready" to uncommit   
 when all players have committed, match will start in T-60 seconds   
"reporting" - toggles printing of score difference at bottom of your screen. 
"teamscores" dumps current teamfrags (your team and enemy) to your console. 
"ghost" - view your ghostcode (it will be printed on your screen at 
 matchstart, if you forget to view it before) 
 at any time before or during match, "ghost" will print your ghostcode. 
"restore" - server will give you 60 seconds to send your ghostcode. 
 Example: Ghostcode '2 8 1' must be sent as 'impulse 2', 'impulse 8', 
 'impulse 1' or via the aliases: d2, d8, d1. 
 You must send the digits one at a time pressign enter between each. 
 The purpose is to restore your personal frags, although the match result 
 will becalculated based on your color (blue or red). 
 The reason for colorbased frag-ghosting is, that it makes it possible to 
 make substitutions in team matches whitout the team loosing any frags. 
-----------------------------------------------------------------------------   
TO ABORT MATCH: vote for a mode/map-change, 
                or ask admin to issue command "endmatch"   
   
=============================================================================   
   
RocketArena Commands:   
-----------------------------------------------------------------------------   
"impulse 68" - see stats for current level   
"impulse 69" - see how many are ahead of you   
"impulse 70" - step out of line/back to line   
"impulse 71" - set status bar text for 320x200    
"impulse 72" - set status bar text for 320x240 or higher   
  
"cells" - toggles cells restriction on/off (requires votingsession)  
"skip"  - skips 1 map ahead in the rotation (requires votingsession) 
=============================================================================    
   
Some notes:     
------------     
After a votingsession is initiated, subject must be set.     
It can be a mapname (dmX, eXmY, ztndmX, random)     
a toggle (pfx, powerups, traps, deathcomments, mode3, antilag)     
or a matchmode: arena, match, tmatch1, tmatch2, ffa1 or ffa3    
If more than 50% votes "yes" within 1 minute,   
the suggested  change will take effect.   
   
If less than 50% votes yes within 1 minute, the voting session     
will be canceled.     
   
Subject can not be changed during a session.     
   
In the traditional competition modes (team1/2 & individual), 
type "ready" to commit to the match and "notready" to uncommit. 
When all players are ready, a timer will count down from 60  and spawn all 
players simultaneously. 
 
Team matches end after 20 minutes. Individual after 10 mins.  
During matches, normal fraglimit and timelimit is ignored!  
If a player connects during a match, he will be put in  
observermode, and will not be able to join, unless administrator  
toggles the "allowjoin" variable.  
   
If you connect to a server running SUSHI with the name     
camclient, you will be put in observermode by default.   
The Prematch training mode is great for practicing lavajumps and rocketjumps   
   
  
Notes on anitlag toggle:   
------------------------   
Antilag filters out some effects.   
When antilag is enabled, nail and shaft filters are activated.   
Furthermore gunshots, that doesn't hit anything that takes damage,  
are not displayed, and bubblespawning is disabled.  
Blood is replaced with a tempentity, in order to reduce priority and amount.  
Additionally, weaponkick & hitflash is disabled for all players.   
  
This should free a little more bandwidth than the standard 50% of SUSHI,   
compared to standard quake.  
It will also reduce CPU workload for server & clients.  
   
Have fun!     
-surgeon     
   
=============================================================================   
   
Credits:     
   
Main coding, ideas, optimizations, arena maps docra1-5 & sushi arena:     
- 'surgeon'     
  
Testing: 'surgeon' & 'siir'     
  
QuakeC & map resources, implemented and customized for SUSHI by 'surgeon':     
- David 'crt' Wright (Rocketarena code & sounds V1.2)     
(http://www.planetquake.com/servers/arena/fasrv12.zip)     
- 'Kashua' (kascam V1.8)     
- 'Dr.Banzai' (Voting server patch)     
- 'Nacho' (arena map: rarena3)     
- Brian 'plucky' Ploeckelman (arena map: arenax)     
- 'Ohnosofa' (arena map: inventory)   
- 'ztn' (maps ztndm1-6) 
  
Bugreprots to: v2615@groenjord.dk     
   
=============================================================================     
   
Short history:     

09/12 - 99: Version 1.0beta2
- Added fragstats (*) in console upon match exit
- Added client auto-screenshot of match result
- Fixed minor problems with "report" and joining match from observermode
- Changed 'restoreghost' cmd to 'restore'

(*)Fragstats:
name|EnemyKills|FriendKills-KilledByEnemy|KilledByFriend|Suicides|KilledByEnvironment

  
24/10 - 99: Version 1.0beta 
- Namechange to "SUSHI Combat Server" (was formerly "TheMod") 
- New arenamap : "sushi arena" 
- RocketArena mode now rotates on 9 maps 
- Players are disarmed when servermode is changed 
- Map voting blocked in rocketarena mode - now requires modechange 
  (avoids incompatibility) 
- Added "skip" command to arenamode 
  (if players don't like map and wants to go ahead) 
- Countdown timer for matchmodes changed to 60 seconds. 
- Server made more foolproof in general - it's now virtually impossible 
  to mess up matchmodes. 
- Players admins are always in observermode - to join game, they have to 
  give up admin status. 
- Checks for committed players at matchstart 
  (players who haven't selected color/team will be observers) 
- In 1on1 mode, excessive players will be thrown in observermode when 
  countdown starts 
- Teamfrags are preserved if a player disconnects/becomes observer/joins 
  from observermode 
- New commands for Matchmodes (*) 
- Ghostcodes(**) - can restore personal frags if connection is lost 
  (Matchmodes Only!) 
 
(*) "blue"/"red" assigns you to a team 
(*) "reporting"(ON/OFF)- prints leading team & by how many frags at bottom 
    of your screen. 
(*) "teamscores" - dumps team frags (your team & enemy) + leading team and 
    by how many frags. 
(**) if you forget to make a ghost before countdown, codes are sent to you 
    when countdown starts. 
 
 
06/10 - 99: Version 0.99 
- Included an extra RocketArena map + patched the sky textures to avoid 
  skybug on amiga. 
- Cleaned up CheckPowerups function to ignore kascam and to perform better.  
  when pfx is on - reduces network traffic & server CPU load 
- antilag toggle now shuts off bubble spawning 
- Fixed discharge messages (knows lava & slime from water)  
- Fairpacks option (always drops best weapon)  
- Cells restrict option for rocketarena (keeps cells count to 30)  
- Kill command re-enabled for matchmodes  
- "unconnected" players are autokicked after 15 seconds  
- internal check for invalid deathmatch/samelevel settings  
- new playerskin for easier team recognition  
- player, missile & bolt2 mdl placed in progs dir outside PAK  
- better apperance for online-help  
- RockerArena maps edited to bypass skybug on Amiga  
- New Arena map added (inventory by 'ohnosofa')  
 
  
22/6 - 99: Version 0.98   
- Direct admin features added for players (previously only observers)   
- Admin status is retained until admin types "noadmin",   
  or players vote to remove admin   
- Anti-lag toggle (effects filter)   
- Random map rotation for ffa modes made independent of "samelevel" cvar  
- Status of antilag, deathcomments and powerups toggle is retained  
  across levels.  
- Weaponkick switchable for every player   
- Hitflash switchable for every player  
- PFX toggle modified to turn off light at once   
- During match, observers are unlocked if one player disconnects   
  This makes it possible to replace the player   
- The "i-mode" command now lists status of toggles    
- Fixed some problems with "allowjoin" command.   
- Directed the "camera running" message to observer only   
- Fixed bug with healthpack not respawning in ffa3 mode   
- Fixed bug that could cause server-crash in ffa-modes  
 
  
10/6 - 99: Version 0.95     
- Seperate cfg files for matchmodes, ffamodes & arenamode   
- Direct admin features for observers   
- Onlinehelp revised   
- Aliases are now only sent when players connect   
- Mode3 in match modes is now a toggle and does not require restart   
- Matches now exit with a level-restart    
- Various small fixes   
- Full documentation written   
- Included short documentation for RocketArena (arena.htm)   
- Restructured the pakfiles   
 
   
25/5 - 99: Version 0.9      
- RocketArena mode works correctly! (bugfix)     
- Corpses left at disconnect removed (bugfix)     
- added online help for arenamode     
 
   
12/5 - 99: Initial beta release     
   
     
   
     
   
   
   
   
   
   
   
   
   
