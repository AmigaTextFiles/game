;Patch Fields of Battle registered version 1.2 -> 1.3 (Amiga only)
;Copyright 1996 Bevelstone Production I/S
;All rights reserved.

echo " "
echo "Patch Fields of Battle registered version 1.2 -> 1.3 (Amiga only)"
echo "Copyright 1996 Bevelstone Production I/S"
echo "All rights reserved."
echo " "


;Check if we are in the right place

if not exists keyfile
  echo "You are NOT in the Fields of Battle directory."
  echo "Aborting."
  quit
endif

if exists data/english/logcodes.qef
  echo "You already have installed this patch."
  quit
endif

;Delete files

echo "Deleting files..."
echo "  Text"
if exists text/english/misslist.qei
  delete text/english/misslist.qei quiet
endif
delete text/english/mission/INTRO7.TXT quiet
delete text/english/mission/INTRO6.TXT quiet
delete text/english/mission/INTRO5.TXT quiet
delete text/english/mission/INTRO4.TXT quiet
delete text/english/mission/INTRO3.TXT quiet
delete text/english/mission/INTRO2.TXT quiet
delete text/english/mission/INTRO1.TXT quiet
delete text/english/mission/INTRO0.TXT quiet
delete text/english/HELP/M1008.QHT quiet
delete text/english/HELP/m1007.qht quiet
delete text/english/HELP/m1006.qht quiet
delete text/english/HELP/m1005.qht quiet
delete text/english/HELP/m1004.qht quiet
delete text/english/HELP/m1003.qht quiet
delete text/english/HELP/m1002.qht quiet
delete text/english/HELP/m1001.qht quiet
delete text/english/HELP/m1000.qht quiet
echo "  Data"
delete data/logcodes.qef quiet
delete data/logoanim.qef quiet
delete data/iconlib.qef quiet
delete data/fobgrmap.qef quiet
delete data/baticon.qef quiet
delete data/frames.qef quiet
echo "  Dumps"
delete dumps/d17.gif quiet
delete dumps/d1.gif quiet
echo "  Fotos"
delete fotos/s4.gif quiet
delete fotos/s3.gif quiet
delete fotos/p6.gif quiet
delete fotos/p2.gif quiet
delete fotos/l6.gif quiet
delete fotos/h3.gif quiet
echo "  Table"
delete table/draw1.qef quiet
delete table/draw8.qef quiet
delete table/draw6.qef quiet
delete table/draw4.qef quiet
delete table/draw2.qef quiet
delete table/draw7.qef quiet
delete table/draw5.qef quiet
delete table/draw3.qef quiet
echo "  Mission"
delete mission/mis0.qef quiet
echo "  Pic"
delete pic/title.gif quiet
delete pic/iconset.gif quiet
delete pic/about.gif quiet
delete pic/trans/t4.IFF quiet
delete pic/trans/t3.IFF quiet
delete pic/trans/t1.IFF quiet

;Add files

echo "Adding new files..."
echo "  Part 1"
unzip -o -q added1.zip
echo "  Part 2"
unzip -o -q added2.zip
echo "  Part 3"
unzip -o -q added3.zip
echo "  Part 4"
unzip -o -q added4.zip

;changed files

echo "Updating changed files..."
unzip -o -q changed.zip

;Moved files

echo "Moving files..."
echo "  Pdr"
makedir pdr/english
rename pdr/PX9.qef pdr/english/PX9.qef
rename pdr/PX8.qef pdr/english/PX8.qef
rename pdr/PX7.qef pdr/english/PX7.qef
rename pdr/PX6.qef pdr/english/PX6.qef
rename pdr/PX5.qef pdr/english/PX5.qef
rename pdr/PX4.qef pdr/english/PX4.qef
rename pdr/PX3.qef pdr/english/PX3.qef
rename pdr/PX23.qef pdr/english/PX23.qef
rename pdr/PX22.qef pdr/english/PX22.qef
rename pdr/PX21.qef pdr/english/PX21.qef
rename pdr/PX20.qef pdr/english/PX20.qef
rename pdr/PX2.qef pdr/english/PX2.qef
rename pdr/PX19.qef pdr/english/PX19.qef
rename pdr/PX18.qef pdr/english/PX18.qef
rename pdr/PX17.qef pdr/english/PX17.qef
rename pdr/PX16.qef pdr/english/PX16.qef
rename pdr/PX15.qef pdr/english/PX15.qef
rename pdr/PX14.qef pdr/english/PX14.qef
rename pdr/PX13.qef pdr/english/PX13.qef
rename pdr/PX12.qef pdr/english/PX12.qef
rename pdr/PX11.qef pdr/english/PX11.qef
rename pdr/PX10.qef pdr/english/PX10.qef
rename pdr/PX1.qef pdr/english/PX1.qef
rename pdr/PX0.qef pdr/english/PX0.qef
rename pdr/px.qef pdr/english/px.qef
echo "  Mission 1"
makedir mission/english/bvlmis0/side0
makedir mission/english/bvlmis0/side1
makedir mission/english/bvlmis1/side0
makedir mission/english/bvlmis1/side1
makedir mission/english/bvlmis2/side0
makedir mission/english/bvlmis2/side1
makedir mission/english/bvlmis3/side0
makedir mission/english/bvlmis3/side1
makedir mission/english/bvlmis4/side0
makedir mission/english/bvlmis4/side1
makedir mission/english/bvlmis5/side0
makedir mission/english/bvlmis5/side1
makedir mission/english/bvlmis6/side0
makedir mission/english/bvlmis6/side1
makedir mission/english/bvlmis7/side0
makedir mission/english/bvlmis7/side1
echo "  Text"
rename text/english/mission/side1/intro7.qht mission/english/bvlmis7/side1/intro7.qht
rename text/english/mission/side1/INTRO6.qht mission/english/bvlmis6/side1/INTRO6.qht
rename text/english/mission/side1/INTRO5.qht mission/english/bvlmis5/side1/INTRO5.qht
rename text/english/mission/side1/INTRO4.qht mission/english/bvlmis4/side1/INTRO4.qht
rename text/english/mission/side1/INTRO3.qht mission/english/bvlmis3/side1/INTRO3.qht
rename text/english/mission/side1/INTRO2.qht mission/english/bvlmis2/side1/INTRO2.qht
rename text/english/mission/side1/INTRO1.qht mission/english/bvlmis1/side1/INTRO1.qht
rename text/english/mission/side1/intro0.qht mission/english/bvlmis0/side1/intro0.qht
rename text/english/mission/side0/intro7.qht mission/english/bvlmis7/side0/intro7.qht
rename text/english/mission/side0/INTRO6.qht mission/english/bvlmis6/side0/INTRO6.qht
rename text/english/mission/side0/INTRO5.qht mission/english/bvlmis5/side0/INTRO5.qht
rename text/english/mission/side0/INTRO4.qht mission/english/bvlmis4/side0/INTRO4.qht
rename text/english/mission/side0/INTRO3.qht mission/english/bvlmis3/side0/INTRO3.qht
rename text/english/mission/side0/INTRO2.qht mission/english/bvlmis2/side0/INTRO2.qht
rename text/english/mission/side0/INTRO1.qht mission/english/bvlmis1/side0/INTRO1.qht
rename text/english/mission/side0/intro0.qht mission/english/bvlmis0/side0/intro0.qht
rename text/english/intro/intro7.qht mission/english/bvlmis7/intro7.qht
rename text/english/intro/intro6.qht mission/english/bvlmis6/intro6.qht
rename text/english/intro/intro5.qht mission/english/bvlmis5/intro5.qht
rename text/english/intro/intro4.qht mission/english/bvlmis4/intro4.qht
rename text/english/intro/intro3.qht mission/english/bvlmis3/intro3.qht
rename text/english/intro/intro2.qht mission/english/bvlmis2/intro2.qht
rename text/english/intro/intro1.qht mission/english/bvlmis1/intro1.qht
rename text/english/intro/intro0.qht mission/english/bvlmis0/intro0.qht
echo "  Data"
rename data/iconlib.h data/english/iconlib.h
makedir data/english/geoanim
rename data/geoanim/k12.qef data/english/geoanim/k12.qef
rename data/geoanim/k9.qef data/english/geoanim/k9.qef
rename data/geoanim/k8.qef data/english/geoanim/k8.qef
rename data/geoanim/k4.qef data/english/geoanim/k4.qef
rename data/geoanim/k3.qef data/english/geoanim/k3.qef
rename data/geoanim/k2.qef data/english/geoanim/k2.qef
rename data/geoanim/k15.qef data/english/geoanim/k15.qef
rename data/geoanim/k14.qef data/english/geoanim/k14.qef
rename data/geoanim/k13.qef data/english/geoanim/k13.qef
rename data/geoanim/k11.qef data/english/geoanim/k11.qef
rename data/geoanim/k10.qef data/english/geoanim/k10.qef
rename data/geoanim/k1.qef data/english/geoanim/k1.qef
rename data/geoanim/k0.qef data/english/geoanim/k0.qef
rename data/geoanim/k7.qef data/english/geoanim/k7.qef
rename data/geoanim/k6.qef data/english/geoanim/k6.qef
rename data/geoanim/k5.qef data/english/geoanim/k5.qef
rename data/fobbamap.qef data/english/fobbamap.qef
echo "  Dumps"
rename dumps/d19.gif dumps/english/d19.gif
rename dumps/d16.gif dumps/english/d16.gif
rename dumps/m4.gif dumps/english/m4.gif
rename dumps/m3.gif dumps/english/m3.gif
rename dumps/m2.gif dumps/english/m2.gif
rename dumps/m1.gif dumps/english/m1.gif
rename dumps/d9.gif dumps/english/d9.gif
rename dumps/d8.gif dumps/english/d8.gif
rename dumps/d7.gif dumps/english/d7.gif
rename dumps/d6.gif dumps/english/d6.gif
rename dumps/d5.gif dumps/english/d5.gif
rename dumps/d4.gif dumps/english/d4.gif
rename dumps/d3.gif dumps/english/d3.gif
rename dumps/d20.gif dumps/english/d20.gif
rename dumps/d2.gif dumps/english/d2.gif
rename dumps/d15.gif dumps/english/d15.gif
rename dumps/d14.gif dumps/english/d14.gif
rename dumps/d13.gif dumps/english/d13.gif
rename dumps/m5.gif dumps/english/m5.gif
rename dumps/d12.gif dumps/english/d12.gif
rename dumps/d11.gif dumps/english/d11.gif
rename dumps/d10.gif dumps/english/d10.gif
rename dumps/d21.gif dumps/english/d21.gif
rename dumps/d18.gif dumps/english/d18.gif
echo "  Fotos Y"
rename fotos/y5.gif fotos/english/y5.gif
rename fotos/y4.gif fotos/english/y4.gif
rename fotos/y3.gif fotos/english/y3.gif
rename fotos/y2.gif fotos/english/y2.gif
rename fotos/y1.gif fotos/english/y1.gif
echo "  Fotos U"
rename fotos/u9.gif fotos/english/u9.gif
rename fotos/u8.gif fotos/english/u8.gif
rename fotos/u7.gif fotos/english/u7.gif
rename fotos/u6.gif fotos/english/u6.gif
rename fotos/u5.gif fotos/english/u5.gif
rename fotos/u4.gif fotos/english/u4.gif
rename fotos/u3.gif fotos/english/u3.gif
rename fotos/u2.gif fotos/english/u2.gif
rename fotos/u17.gif fotos/english/u17.gif
rename fotos/u16.gif fotos/english/u16.gif
rename fotos/u15.gif fotos/english/u15.gif
rename fotos/u14.gif fotos/english/u14.gif
rename fotos/u13.gif fotos/english/u13.gif
rename fotos/u11.gif fotos/english/u11.gif
rename fotos/u10.gif fotos/english/u10.gif
rename fotos/u1.gif fotos/english/u1.gif
echo "  Fotos S"
rename fotos/s6.gif fotos/english/s6.gif
rename fotos/s5.gif fotos/english/s5.gif
rename fotos/s2.gif fotos/english/s2.gif
rename fotos/s1l.gif fotos/english/s1l.gif
rename fotos/s5l.gif fotos/english/s5l.gif
echo "  Fotos P"
rename fotos/p8.gif fotos/english/p8.gif
rename fotos/p7.gif fotos/english/p7.gif
rename fotos/p10.gif fotos/english/p10.gif
rename fotos/p1.gif fotos/english/p1.gif
rename fotos/p4.gif fotos/english/p4.gif
echo "  Fotos L"
rename fotos/l5.gif fotos/english/l5.gif
rename fotos/l3.gif fotos/english/l3.gif
rename fotos/l2.gif fotos/english/l2.gif
rename fotos/l1.gif fotos/english/l1.gif
echo "  Fotos H"
rename fotos/h9.gif fotos/english/h9.gif
rename fotos/h8.gif fotos/english/h8.gif
rename fotos/h7.gif fotos/english/h7.gif
rename fotos/h5.gif fotos/english/h5.gif
rename fotos/h4.gif fotos/english/h4.gif
rename fotos/h2.gif fotos/english/h2.gif
rename fotos/h1.gif fotos/english/h1.gif
rename fotos/h6.gif fotos/english/h6.gif
rename fotos/h6l.gif fotos/english/h6l.gif
rename fotos/dum.gif fotos/english/dum.gif
echo "  Fotos C"
rename fotos/c9.gif fotos/english/c9.gif
rename fotos/c8.gif fotos/english/c8.gif
rename fotos/c7.gif fotos/english/c7.gif
rename fotos/c6.gif fotos/english/c6.gif
rename fotos/c5.gif fotos/english/c5.gif
rename fotos/c4.gif fotos/english/c4.gif
rename fotos/c3.gif fotos/english/c3.gif
rename fotos/c2.gif fotos/english/c2.gif
rename fotos/c19.gif fotos/english/c19.gif
rename fotos/c18.gif fotos/english/c18.gif
rename fotos/c17.gif fotos/english/c17.gif
rename fotos/c16.gif fotos/english/c16.gif
rename fotos/c15.gif fotos/english/c15.gif
rename fotos/c14.gif fotos/english/c14.gif
rename fotos/c13.gif fotos/english/c13.gif
rename fotos/c12.gif fotos/english/c12.gif
rename fotos/c11.gif fotos/english/c11.gif
rename fotos/c10.gif fotos/english/c10.gif
rename fotos/c1.gif fotos/english/c1.gif
echo "  Fotos B"
rename fotos/b9.gif fotos/english/b9.gif
rename fotos/b8.gif fotos/english/b8.gif
rename fotos/b7.gif fotos/english/b7.gif
rename fotos/b5.gif fotos/english/b5.gif
rename fotos/b4.gif fotos/english/b4.gif
rename fotos/b3.gif fotos/english/b3.gif
rename fotos/b17.gif fotos/english/b17.gif
rename fotos/b16.gif fotos/english/b16.gif
rename fotos/b14.gif fotos/english/b14.gif
rename fotos/b13.gif fotos/english/b13.gif
rename fotos/b11.gif fotos/english/b11.gif
rename fotos/b10.gif fotos/english/b10.gif
echo "  Mission 2"
rename mission/mis7.qef mission/english/bvlmis7/mis7.qef
rename mission/mis6.qef mission/english/bvlmis6/mis6.qef
rename mission/mis5.qef mission/english/bvlmis5/mis5.qef
rename mission/mis4.qef mission/english/bvlmis4/mis4.qef
rename mission/mis3.qef mission/english/bvlmis3/mis3.qef
rename mission/mis2.qef mission/english/bvlmis2/mis2.qef
rename mission/mis1.qef mission/english/bvlmis1/mis1.qef
echo "  Pic Geo"
rename pic/geo/gf9.iff pic/english/geo/gf9.iff
rename pic/geo/gf8.iff pic/english/geo/gf8.iff
rename pic/geo/gf7.iff pic/english/geo/gf7.iff
rename pic/geo/gf6.iff pic/english/geo/gf6.iff
rename pic/geo/gf5.iff pic/english/geo/gf5.iff
rename pic/geo/gf4.iff pic/english/geo/gf4.iff
rename pic/geo/gf3.iff pic/english/geo/gf3.iff
rename pic/geo/gf2.iff pic/english/geo/gf2.iff
rename pic/geo/gf15.iff pic/english/geo/gf15.iff
rename pic/geo/gf14.iff pic/english/geo/gf14.iff
rename pic/geo/gf13.iff pic/english/geo/gf13.iff
rename pic/geo/gf12.iff pic/english/geo/gf12.iff
rename pic/geo/gf11.iff pic/english/geo/gf11.iff
rename pic/geo/gf10.iff pic/english/geo/gf10.iff
rename pic/geo/gf1.iff pic/english/geo/gf1.iff
rename pic/geo/gf0.iff pic/english/geo/gf0.iff
rename pic/geo/gb15.iff pic/english/geo/gb15.iff
rename pic/geo/gb14.iff pic/english/geo/gb14.iff
rename pic/geo/gb13.iff pic/english/geo/gb13.iff
rename pic/geo/gb12.iff pic/english/geo/gb12.iff
rename pic/geo/gb11.iff pic/english/geo/gb11.iff
rename pic/geo/gb10.iff pic/english/geo/gb10.iff
rename pic/geo/gb1.iff pic/english/geo/gb1.iff
rename pic/geo/gb0.iff pic/english/geo/gb0.iff
rename pic/geo/gb9.iff pic/english/geo/gb9.iff
rename pic/geo/gb8.iff pic/english/geo/gb8.iff
rename pic/geo/gb7.iff pic/english/geo/gb7.iff
rename pic/geo/gb6.iff pic/english/geo/gb6.iff
rename pic/geo/gb5.iff pic/english/geo/gb5.iff
rename pic/geo/gb4.iff pic/english/geo/gb4.iff
rename pic/geo/gb3.iff pic/english/geo/gb3.iff
rename pic/geo/gb2.iff pic/english/geo/gb2.iff
echo "  Pic"
rename pic/spyrep0.gif pic/english/spyrep0.gif
rename pic/rusmap.gif pic/english/rusmap.gif
rename pic/peace_p.gif pic/english/peace_p.gif
rename pic/peace_n.gif pic/english/peace_n.gif
rename pic/peace_c.gif pic/english/peace_c.gif
rename pic/peace.gif pic/english/peace.gif
rename pic/map.gif pic/english/map.gif
rename pic/itamap.gif pic/english/itamap.gif
rename pic/f_battle.gif pic/english/f_battle.gif
rename pic/Germap.gif pic/english/Germap.gif
rename pic/feather1.gif pic/english/feather1.gif
rename pic/engmap.gif pic/english/engmap.gif
rename pic/Ausmap.gif pic/english/Ausmap.gif
rename pic/afrmap.gif pic/english/afrmap.gif
rename pic/battback.gif pic/english/battback.gif
rename pic/baticost.iff pic/english/baticost.iff
rename pic/logo1ail.gif pic/english/logo1ail.gif
rename pic/logo.gif pic/english/logo.gif
rename pic/f_fort.gif pic/english/f_fort.gif
rename pic/htgbbf.xpm pic/english/htgbbf.xpm
rename pic/f_blimp.gif pic/english/f_blimp.gif
rename pic/f_taskf.gif pic/english/f_taskf.gif
rename pic/f_gas.gif pic/english/f_gas.gif
rename pic/f_artil.gif pic/english/f_artil.gif
rename pic/f_sold.gif pic/english/f_sold.gif
rename pic/f_tank.gif pic/english/f_tank.gif
rename pic/f_zepp.gif pic/english/f_zepp.gif
rename pic/f_airpl.gif pic/english/f_airpl.gif
rename pic/f_trans.gif pic/english/f_trans.gif
rename pic/trans/t5.IFF pic/english/trans/t6.iff
rename pic/trans/t2.IFF pic/english/trans/t2.IFF
rename pic/f_sub.gif pic/english/f_sub.gif
rename pic/logo2.gif pic/english/logo2.gif
rename pic/logo1.gif pic/english/logo1.gif
rename pic/Turmap.gif pic/english/Turmap.gif

;Exec files

if exists "Fields of Battle"
  echo "Replacing exec 68000 file"
  unzip -o -q changed0.zip
endif

if exists "Fields of Battle (020)"
  echo "Replacing exec 68020 file"
  unzip -o -q changed2.zip
endif

if exists "Fields of Battle (030fp)"
  echo "Replacing exec 68030fp file"
  unzip -o -q changed3.zip
endif

if exists "Fields of Battle (040fp)"
  echo "Replacing exec 68040fp file"
  unzip -o -q changed4.zip
endif

;Cleanup

echo "Cleaning up"

delete added1.zip quiet
delete added2.zip quiet
delete added3.zip quiet
delete added4.zip quiet
delete changed.zip quiet
delete changed0.zip quiet
delete changed2.zip quiet
delete changed3.zip quiet
delete changed4.zip quiet
delete unzip quiet

echo " "
echo "Update of Fields of Battle is complete"
echo "You have version 1.3 now. "
echo " "


