; UFO CD³² Mediascript 02082003
; Save extra data that does not fit in nonvolatile memory.

makedir RAM:ufotmp
assign UFOTemp: RAM:ufotmp
Intro

FailAt 20

If exists UFOSAV:saveinfo.dat
    copy UFOSAV:#?.dat UFOTemp: quiet
    If exists UFOTemp:pch.missioncomplete.dat
        SKIP geo
    ENDIF
    SKIP begin
ENDIF

Geo "0" 0"
IF ERROR
        SKIP begin
ENDIF

SKIP end

LAB begin
Tactical "1" "0"
echo > UFOTemp:pch.missioncomplete.dat
ask "Save game (assign UFOSAV: to correct place or insert the volume)?"
IF WARN
       copy UFOTemp:#?.dat UFOSAV: quiet
ENDIF
ask "EXIT game?"
IF WARN
       SKIP end
ENDIF

LAB geo
Geo "1" "0"
delete UFOTemp:pch.missioncomplete.dat quiet
ask "Save game (assign UFOSAV: to correct place or insert the volume)?"
IF WARN
       delete UFOSAV:pch.missioncomplete.dat quiet
       copy UFOTemp:#?.dat UFOSAV: quiet
ENDIF
ask "EXIT game?"
IF WARN
       SKIP end
ENDIF

SKIP begin BACK

LAB end
echo "Cleaning up!"
delete UFOTemp:#?.dat quiet
Assign UFOTemp: remove
delete RAM:ufotmp quiet
